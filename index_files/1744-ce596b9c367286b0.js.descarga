(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1744],{65452:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var r=i(47568),t=i(97582),o=i(62327),a=i(88767),s=i(46682);function l(){var e=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.Z.getCustomers(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.Z.getCustomerDetail(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.post(s.Z.updateCustomer,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}();return{useGetCustomers:function(n){return(0,a.useQuery)(["get_customers",n],(function(){return e(n)}),{enabled:!!(n.p_identification_type||n.p_identification_number||n.p_customers_full_name||n.p_license_plate)})},useGetCustomerDetail:function(e,i){return(0,a.useQuery)(["get_customer_code"],(function(){return n(i)}),{enabled:e})},useUpdateCustomer:function(){return(0,a.useMutation)(i)}}}},19675:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var r=i(47568),t=i(97582),o=i(62327),a=i(88767),s={getProcessesList:function(){return"/dbo/panel_methods/get_processes_list/"},getCardPanel:"/dbo/panel_methods/get_card_panel/",findParameters:function(){return"/dbo/panel_methods/find_parameters/"},getCardPanelDetail:"/dbo/panel_methods/get_card_panel_detail/",getCardPaneDetailExcel:"/dbo/panel_methods/get_card_panel_detail_excel/"};function l(){var e=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.getProcessesList(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.post(s.getCardPanel,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)((function(){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return[4,o.Z.get(s.findParameters())];case 1:return[2,e.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.post(s.getCardPanelDetail,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.post(s.getCardPaneDetailExcel,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}();return{useGetProcessesList:function(n){return(0,a.useQuery)(["getProcessesList"],(function(){return e(n)}))},useGetCardPanel:function(){return(0,a.useMutation)(n)},useFindParameters:function(){return(0,a.useQuery)(["findParameters"],(function(){return i()}))},useGetCardPanelDetail:function(){return(0,a.useMutation)(l)},useGetCardPaneDetailExcel:function(){return(0,a.useMutation)(c)}}}},51790:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var r=i(47568),t=i(97582),o=i(62327),a=i(88767),s={getReport:function(e){var n=e.p_hash;return"dbo/reports/request_report/?p_hash=".concat(void 0===n?null:n)},getReportParameterForm:function(e){var n=e.p_report_id;return"dbo/reports/get_report_parameter_form/?p_report_id=".concat(void 0===n?null:n)},getListValues:function(e){var n=e.p_parameter_id,i=void 0===n?null:n,r=e.p_json_parameter,t=void 0===r?null:r;return"dbo/reports/get_values/?p_parameter_id=".concat(i,"&p_json_parameter=").concat(t)},addPendingReportExecution:"dbo/reports/add_pending_report_execution/",getWfOnlineReportsList:function(e){return"dbo/reports/get_wf_online_reports_list/?p_workflow_id=".concat(e)},getReportUrlToRun:function(e){var n=e.p_report_run_id;return"/dbo/reports_manager/get_report_url_to_run/?p_report_run_id=".concat(void 0===n?null:n)},getBlobReportsId:function(e){var n=e.p_report_run_id;return"/dbo/reports_manager/get_blob_reports_id_to_run/?p_report_run_id=".concat(void 0===n?null:n)}};function l(){var e=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.getReport(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.getReportParameterForm(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.getListValues(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.post(s.addPendingReportExecution,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.getWfOnlineReportsList(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.getReportUrlToRun(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((function(e){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,o.Z.get(s.getBlobReportsId(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}();return{useGetReport:function(n){return(0,a.useQuery)(["get_report"],(function(){return e(n)}))},useGetReportParameterForm:function(e){return(0,a.useQuery)(["get_report_parameter_form"],(function(){return n(e)}))},useGetListValues:function(e,n,r){return(0,a.useQuery)(["get_list_values_".concat(e)],(function(){return i(r)}),{enabled:n})},useGenerateReport:function(){return(0,a.useMutation)(l)},useGetWfOnlineReportsList:function(e){return(0,a.useQuery)(["getWfOnlineReportsList"],(function(){return c(e)}),{refetchInterval:1e4})},useGetReportUrlToRun:function(e){var n=e.p_report_run_id;return(0,a.useQuery)(["get_report_url_to_run",e],(function(){return d(e)}),{enabled:!!n})},useGetBlobReportsId:function(e){var n=e.p_report_run_id;return(0,a.useQuery)(["get_blob_reports_id_to_run",e],(function(){return u(e)}),{enabled:!!n})}}}},27314:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return s}});var r=i(85893),t=i(45697),o=i.n(t),a=i(3584);function s(e){var n=e.index,i=(e.customerType,e.readonly),t=(e.budgetArea,e.disabledInfo);e.disableEdoCivil;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.be,{label:"Cod Inter",name:"p_codintermediario_".concat(n),readonly:i||!1,disabled:t||!1,required:!0}),(0,r.jsx)(a.be,{label:"Nombre Intermediario",name:"p_intermediario_".concat(n),readonly:i||!1,disabled:t||!1,required:!0})]})}s.propTypes={index:o().any,readOnly:o().bool}},32677:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return p}});var r=i(14924),t=i(85893),o=(i(67294),i(98888)),a=i(93725),s=i(90948),l=i(80822),c=i(11057),d=i(11163),u=i(73310);function p(){var e={container:{display:"flex",justifyContent:"center",alignItems:"center"},rectangle:{width:"600px",height:"300px",backgroundColor:"#ffc500",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"30px"},text:{color:"black",fontSize:"20px",whiteSpace:"pre-wrap"}},n=(0,d.useRouter)(),i=(0,u.Z)(),o=(i.useGetMotivoOficinareResult,(0,i.useGetDepartamentoResult)({p_resultdep:null===n||void 0===n?void 0:n.query.Departamento}).data),p=(0,s.ZP)(l.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,r.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));return(0,t.jsxs)(a.no,{title:"Resultado",headerColor:"purple",icon:"bi:person",children:[(0,t.jsx)(p,{children:(0,t.jsx)("div",{style:e.container,children:(0,t.jsx)("div",{style:e.rectangle,children:(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("h1",{style:e.text,children:["Dir\xedjase a: ",null===o||void 0===o?void 0:o.P_CURSOR[0].DESCRIP]}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"registro_intermediario"===(null===n||void 0===n?void 0:n.query.type)&&(0,t.jsxs)("h1",{style:e.text,children:["Asesor: ",null===n||void 0===n?void 0:n.query.Nomasesor]})]})})})}),(0,t.jsx)(p,{children:(0,t.jsx)(l.Z,{style:{marginTop:"40px"},children:(0,t.jsx)(c.Z,{onClick:function(){n.push({pathname:"/portal/visita/modulo_visitas"})},variant:"contained",size:"mediun",children:"Regresar - Menu"})})})]})}p.getLayout=function(e){return(0,t.jsx)(o.Z,{children:e})}},24284:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var r=i(85893),t=i(45697),o=i.n(t),a=i(51233),s=i(15861),l=i(80822),c=i(87784);function d(e){var n=e.total,i=e.currency;return(0,r.jsxs)(a.Z,{direction:"row",sx:{width:"100%",borderRadius:"8px",boxShadow:"0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)"},children:[(0,r.jsx)(a.Z,{sx:{backgroundColor:"#F4F6F8",width:"50%",justifyContent:"center",alignItems:"flex-end",color:"#637381"},children:(0,r.jsx)(s.Z,{variant:"subtitle1",sx:{borderTop:"1px solid rgba(224, 224, 224, 1)",width:"100%",textAlign:"end",my:"0.8em",px:2,pt:1},children:"Total Facturado"})}),(0,r.jsxs)(a.Z,{width:"50%",children:[(0,r.jsx)(l.Z,{bgcolor:"secondary.main",sx:{width:"100%",height:"0.8em",border:"1px solid rgba(224, 224, 224, 1)"}}),(0,r.jsx)(a.Z,{justifyContent:"center",alignItems:"flex-end",px:2,children:(0,r.jsxs)(s.Z,{variant:"body1",sx:{width:"100%",textAlign:"end",px:2,pt:1},children:[(0,c.dN)(n)," ",(0,c.z5)(i)]})})]})]})}d.propTypes={total:o().number.isRequired,currency:o().string.isRequired}},95265:function(e,n,i){"use strict";i.d(n,{dK:function(){return pe},w4:function(){return _e},c3:function(){return on},Gt:function(){return _r},f2:function(){return Jn},lz:function(){return Yn},$e:function(){return Ji},hF:function(){return Vn},Vm:function(){return Fn},ns:function(){return ri},jp:function(){return Wn},K9:function(){return Un},e2:function(){return bi},R4:function(){return ge.R4},$P:function(){return nn},m_:function(){return pr},os:function(){return gn},wI:function(){return rr},f7:function(){return Ki},UE:function(){return ki},vM:function(){return Gi},pm:function(){return fn},t:function(){return y},X6:function(){return c},kI:function(){return vr},O8:function(){return Te.O8},wo:function(){return an.wo},Vl:function(){return an.Vl},Df:function(){return an.Df},Dx:function(){return Te.Dx},pY:function(){return Te.pY},db:function(){return Te.db},CT:function(){return er},qK:function(){return or},M:function(){return en},x2:function(){return Ti},G5:function(){return Ei},l:function(){return Ci},Mj:function(){return Zi},Ab:function(){return Ri},FV:function(){return Oi},gS:function(){return Fr},S1:function(){return Dn},b2:function(){return Rn},M_:function(){return Nn},SA:function(){return On},Et:function(){return $e},jD:function(){return Xn.default},Kb:function(){return $n},qU:function(){return li},h8:function(){return mi},HU:function(){return _i},hv:function(){return ci},EU:function(){return di},iz:function(){return pi},Ak:function(){return ui},ZB:function(){return bn},vf:function(){return oe},Ks:function(){return G},kx:function(){return nr},Fb:function(){return qi},nP:function(){return Fi},Qr:function(){return Di},Od:function(){return wi},uy:function(){return Ai},fd:function(){return Mi},H4:function(){return mn},rH:function(){return Te.rH},Wt:function(){return Te.Wt},FA:function(){return oi},zf:function(){return ei},P_:function(){return si},Jz:function(){return gi},v7:function(){return yi},Ld:function(){return vi},jK:function(){return tn},BB:function(){return Yi},NN:function(){return mr},eC:function(){return hr},KS:function(){return Hi},fG:function(){return fr},D:function(){return xr},Zr:function(){return _n},Ps:function(){return Kr},hc:function(){return Kn},QL:function(){return Li},L0:function(){return ni},dP:function(){return ii},FG:function(){return Ii}});var r=i(85893),t=i(65582),o=i(15861),a=i(51233),s=i(23795),l=i(72007);function c(){return(0,r.jsxs)(t.Z,{sx:{py:{xs:8,md:10},textAlign:{xs:"center",md:"left"}},children:[(0,r.jsx)(o.Z,{variant:"h2",children:"Contactanos"}),(0,r.jsx)(o.Z,{variant:"subtitle1",sx:{mt:3,mb:{xs:3,md:6}},children:"Estaremos encantados de ayudarte con cualquier duda."}),(0,r.jsxs)(a.Z,{spacing:{xs:3,md:5},direction:{xs:"column",md:"row"},children:[(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsx)(o.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:"Email"}),(0,r.jsx)(s.Z,{variant:"body2",color:"inherit",href:"mailto:hello@example.com",children:"info@172.16.0.34"})]}),(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsx)(o.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:"Telefono"}),(0,r.jsx)(o.Z,{variant:"body2",children:"(58) 212 9010973"})]}),(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsx)(o.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:"Direccion"}),(0,r.jsx)(o.Z,{variant:"body2",children:"Caracas, Venezuela"})]}),(0,r.jsxs)(a.Z,{spacing:1,alignItems:{xs:"center",md:"flex-start"},children:[(0,r.jsx)(o.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:"Siguenos"}),(0,r.jsx)(l.Ij,{sx:{color:"text.primary"}})]})]})]})}var d=i(47568),u=i(14924),p=i(26042),h=i(69396),_=i(97582),x=i(87536),m=i(90948),v=i(31812),f=i(86886),g=i(50135),j=(0,m.ZP)("div")((function(e){var n=e.theme;return(0,u.Z)({padding:n.spacing(8,0)},n.breakpoints.up("md"),{padding:n.spacing(10,0)})}));function y(){var e=(0,x.cI)({mode:"onTouched",defaultValues:{fullName:"",subject:"",email:"",message:""}}),n=e.reset,i=e.control,s=e.handleSubmit,l=e.formState.isSubmitting,c=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){return setTimeout(e,500)}))];case 1:return e.sent(),n(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(j,{children:(0,r.jsx)(t.Z,{children:(0,r.jsx)(f.ZP,{container:!0,spacing:3,justifyContent:"center",children:(0,r.jsxs)(f.ZP,{item:!0,xs:12,md:8,children:[(0,r.jsxs)(a.Z,{spacing:2,sx:{mb:5,textAlign:"center"},children:[(0,r.jsx)(o.Z,{variant:"h3",children:"Dejanos tu duda!"}),(0,r.jsx)(o.Z,{sx:{color:"text.secondary"},children:"Responderemos lo antes posible para ayudarte"})]}),(0,r.jsx)("form",{onSubmit:s(c),children:(0,r.jsxs)(a.Z,{spacing:2.5,alignItems:"flex-start",children:[(0,r.jsx)(x.Qr,{name:"fullName",control:i,render:function(e){var n=e.field,i=e.fieldState.error;return(0,r.jsx)(g.Z,(0,h.Z)((0,p.Z)({},n),{fullWidth:!0,label:"Nombre completo",error:Boolean(i),helperText:null===i||void 0===i?void 0:i.message}))}}),(0,r.jsx)(x.Qr,{name:"email",control:i,render:function(e){var n=e.field,i=e.fieldState.error;return(0,r.jsx)(g.Z,(0,h.Z)((0,p.Z)({},n),{fullWidth:!0,label:"Email",error:Boolean(i),helperText:null===i||void 0===i?void 0:i.message}))}}),(0,r.jsx)(x.Qr,{name:"subject",control:i,render:function(e){var n=e.field,i=e.fieldState.error;return(0,r.jsx)(g.Z,(0,h.Z)((0,p.Z)({},n),{fullWidth:!0,label:"Asunto",error:Boolean(i),helperText:null===i||void 0===i?void 0:i.message}))}}),(0,r.jsx)(x.Qr,{name:"message",control:i,render:function(e){var n=e.field,i=e.fieldState.error;return(0,r.jsx)(g.Z,(0,h.Z)((0,p.Z)({},n),{fullWidth:!0,multiline:!0,rows:4,label:"Mensaje",error:Boolean(i),helperText:null===i||void 0===i?void 0:i.message,sx:{pb:2.5}}))}}),(0,r.jsx)(a.Z,{alignItems:"center",width:1,children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:l,children:"Enviar mensaje"})})]})})]})})})})}var b=i(45697),C=i.n(b),Z=i(80822),O=i(93725),R=i(77682);(0,m.ZP)("div")((function(e){var n,i=e.theme;return n={textAlign:"left",position:"relative",minHeight:"100vh",paddingBottom:i.spacing(5),backgroundColor:i.palette.secondary.main},(0,u.Z)(n,i.breakpoints.up("md"),{paddingBottom:i.spacing(10)}),(0,u.Z)(n,i.breakpoints.up("lg"),{height:"95vh",paddingBottom:i.spacing(10)}),n})),(0,m.ZP)((function(e){return(0,r.jsx)(a.Z,(0,p.Z)({spacing:2},e))}))((function(){return{zIndex:10,position:"relative"}})),(0,m.ZP)("img")({zIndex:9,width:"100%",height:"100%",transform:"scaleY(-1)",objectFit:"cover",position:"absolute"});C().array.isRequired,C().number,C().shape({description:C().string,icon:C().string,title:C().string,iconComponent:C().object});var S=i(45962),E=i(11057),P=i(67294),T=i(46066),I=(i(25675),i(96087)),D=i(87784),w=i(2734),M=i(542),A=(0,m.ZP)("div")((function(e){var n=e.theme;return(0,u.Z)({padding:n.spacing(2,0,0)},n.breakpoints.up("md"),{padding:n.spacing(2,0,0)})})),N=(0,m.ZP)(f.ZP,{shouldForwardProp:function(e){return"isDesktop"!==e}})((function(e){return{minHeight:e.isDesktop?"700px":"92vh",position:"relative",display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",flexDirection:e.reversed?"row-reverse":"row",paddingTop:42,marginLeft:1,marginRight:1}})),F=(0,m.ZP)(Z.Z)((function(){return{width:"100%",position:"relative"}}));(0,m.ZP)("img")({zIndex:5,width:"100%",height:"100%",objectFit:"cover",position:"absolute"});function V(e){var n=e.featuredData,i=(0,P.useRef)(null),o=(0,w.Z)(),a=(0,h.Z)((0,p.Z)({dots:!0,arrows:!1,autoplay:!1,autoplaySpeed:5e3,slidesToShow:1,slidesToScroll:1},(0,l.A0)({color:"secondary.main",sx:{mt:{xs:8,md:10},position:"absolute",bottom:"0%",left:"49%"}})),{responsive:[{breakpoint:800,settings:(0,p.Z)({dots:!0,arrows:!1,autoplaySpeed:4e3},(0,l.A0)({color:"secondary.main",sx:{mt:{xs:8,md:10},position:"absolute",bottom:"0%",left:"45.5%"}}))}]});return(0,r.jsx)(A,{children:(0,r.jsx)(t.Z,{sx:{position:"relative"},maxWidth:"xl",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,sx:(0,u.Z)({},o.breakpoints.up("md"),{paddingLeft:[2,"!important"],paddingRight:[2,"!important"]}),children:(0,r.jsx)(T.Z,(0,h.Z)((0,p.Z)({ref:i},a),{children:n.map((function(e){return(0,r.jsx)(q,{featuredData:e},e.attributes.orden)}))}))})})})})}function q(e){var n,i,t,s,c,d,p,h=e.featuredData,_=(0,w.Z)(),x=h.attributes,m=x.descripcion,v=x.titulo,g=x.imagen,j=x.subtitulo,y=x.es_reverso,b=x.texto_boton,C=x.resumen,O=x.tipo_elemento,R=x.subElements,S=x.identificador,P=(0,I.Fs)("up","xl"),T=(0,I.Fs)("up","md"),A=(0,I.Fs)("up","xs"),V=function(e){if(e){var n=document.getElementById(e);n&&n.scrollIntoView({behavior:"smooth"})}};return(0,r.jsxs)(N,{container:!0,spacing:T?2:0,isDesktop:T,reversed:y,children:["unico"===O&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sx:(0,u.Z)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end"},_.breakpoints.up("sm"),{display:"none"}),children:(0,r.jsx)(F,{children:(0,r.jsx)(Z.Z,{sx:{position:"relative",zIndex:10},children:(0,r.jsx)(l.Ee,{alt:"carousel",src:(0,D.yw)(null===g||void 0===g||null===(n=g.data)||void 0===n||null===(i=n.attributes)||void 0===i?void 0:i.url)})})})}),(0,r.jsxs)(f.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",justifyContent:"center",flexDirection:"column"},children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:y?"column":"column-reverse"},children:[(0,r.jsx)(o.Z,{variant:"h2",color:"secondary",children:v}),(0,r.jsx)(l.UG,{content:j,customSx:{color:"#4B4B4B",marginTop:T?8:2,marginBottom:T?8:2},customSxTypography:{variant:"body1",fontWeight:"bold"}}),(0,r.jsx)(l.UG,{content:m})]}),C&&(0,r.jsx)(l.UG,{content:C,customSx:{textAlign:"center",color:_.palette.secondary.main,margin:T?4:1}}),(0,r.jsx)(a.Z,{direction:"row",justifyContent:y?"center":"flex-start",children:(0,r.jsx)(Z.Z,{children:(0,r.jsx)(E.Z,{variant:"contained",color:"secondary",sx:{borderRadius:8,m:{xs:2,md:4},textTransform:"none !important"},onClick:function(){return V(S)},children:(0,r.jsx)(o.Z,{variant:"h4",sx:{px:3,textTransform:"none !important"},children:b})})})})]}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:6,sx:(0,u.Z)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end"},_.breakpoints.down("sm"),{display:"none"}),children:(0,r.jsx)(F,{children:(0,r.jsx)(Z.Z,{sx:{position:"relative",zIndex:10},children:(0,r.jsx)(l.Ee,{alt:"carousel",src:(0,D.yw)(null===g||void 0===g||null===(t=g.data)||void 0===t||null===(s=t.attributes)||void 0===s?void 0:s.url),sx:{maxWidth:T?"700px":A?"500px":"700px",margin:"auto"},width:700,height:600,layout:"responsive",objectFit:"fill",priority:!0})})})})]}),"agrupado"===O&&(0,r.jsxs)(f.ZP,{item:!0,xs:12,sx:(0,u.Z)({display:"flex",flexDirection:"column",alignItems:"center"},_.breakpoints.down("sm"),{padding:"0 0.5em"}),children:[(0,r.jsx)(o.Z,{variant:T?"h2":"h4",color:"secondary",textAlign:"center",width:{xs:"100%",md:"65%"},children:v}),(0,r.jsx)(l.UG,{content:j,customSx:{color:"#4B4B4B",margin:T?2:1,"& h4":{fontSize:T?"1.5em":"1em"}},customSxTypography:{variant:"body1"}}),(0,r.jsx)(M.Tf,{sxContainer:(0,u.Z)({padding:"0.2em !important"},_.breakpoints.up("md"),{minWidth:"650px",padding:"1em !important"}),children:(0,r.jsxs)(f.ZP,{container:!0,spacing:T?2:0,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:2,sx:(0,u.Z)({display:"flex",justifyContent:"center",alignItems:T?"flex-end":"center"},_.breakpoints.down("sm"),{display:"none"}),children:(0,r.jsx)(l.Ee,{alt:"carousel",src:(0,D.yw)(null===g||void 0===g||null===(c=g.data)||void 0===c||null===(d=c.attributes)||void 0===d?void 0:d.url),sx:{maxWidth:T?80:36,paddingBottom:T?5:0}})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:10,children:(0,r.jsx)(l.UG,{content:m,customSx:(p={margin:5,color:_.palette.secondary.main},(0,u.Z)(p,_.breakpoints.down("sm"),{"& h4":{textAlign:"center"}}),(0,u.Z)(p,"& p",(0,u.Z)({marginBottom:_.spacing(1)},_.breakpoints.down("sm"),{fontSize:"0.80em"})),p)})})]})}),(0,r.jsx)(Z.Z,{sx:(0,u.Z)({display:"grid",gridTemplateColumns:"repeat(2, 1fr)",my:1},_.breakpoints.up("xl"),{display:"none"}),children:R.map((function(e,n){var i,t;return(0,r.jsxs)(a.Z,{alignItems:"center",justifyContent:"center",sx:{width:P?"100%":"70%",margin:"0 auto"},children:[(0,r.jsx)(l.Ee,{alt:"carousel",src:(0,D.yw)(null===(i=null===e||void 0===e?void 0:e.attributes.icono.data)||void 0===i||null===(t=i.attributes)||void 0===t?void 0:t.url),sx:{maxWidth:T?64:28,paddingBottom:P?5:2.5}}),(0,r.jsx)(l.UG,{content:null===e||void 0===e?void 0:e.attributes.descripcion,customSx:{color:_.palette.secondary.main,textAlign:"center","& p":{fontSize:"0.90em"}}})]},"".concat(v,"_").concat(n,"_subelement"))}))}),(0,r.jsx)(a.Z,{direction:"row",spacing:{xs:1,md:5},alignItems:"center",justifyContent:"space-between",sx:(0,u.Z)({my:3},_.breakpoints.down("xl"),{display:"none"}),children:R.map((function(e,n){var i,t;return(0,r.jsxs)(a.Z,{alignItems:"center",justifyContent:"center",children:[(0,r.jsx)(l.Ee,{alt:"carousel",src:(0,D.yw)(null===(i=null===e||void 0===e?void 0:e.attributes.icono.data)||void 0===i||null===(t=i.attributes)||void 0===t?void 0:t.url),sx:{maxWidth:T?40:32,paddingBottom:T?2:.5}}),(0,r.jsx)(l.UG,{content:null===e||void 0===e?void 0:e.attributes.descripcion,customSx:{color:_.palette.secondary.main,textAlign:"center"}})]},"".concat(v,"_").concat(n,"_subelement"))}))}),(0,r.jsx)(a.Z,{justifyContent:"center",alignItems:"center",children:(0,r.jsx)(E.Z,{variant:"contained",color:"secondary",sx:{borderRadius:8,my:P?0:2,textTransform:"none !important"},onClick:function(){return V(S)},children:(0,r.jsx)(o.Z,{variant:"h4",sx:{px:3,textTransform:"none !important"},children:b})})})]})]})}V.propTypes={featuredData:C().array.isRequired},q.propTypes={featuredData:C().shape({attributes:C().shape({titulo:C().string,descripcion:C().oneOfType([C().string,C().object]),subtitulo:C().oneOfType([C().string,C().object]),resumen:C().oneOfType([C().string,C().object]),es_reverso:C().bool,orden:C().number,botones:C().bool,imagen:C().object,tipo_elemento:C().string.isRequired,texto_boton:C().string,subElements:C().array})})};var L=(0,m.ZP)(S.m.div)((function(e){var n,i=e.theme;return n={position:"relative",minHeight:"95vh"},(0,u.Z)(n,i.breakpoints.up("md"),{width:"100%",minHeight:"100vh",display:"flex",alignItems:"center"}),(0,u.Z)(n,i.breakpoints.up("xl"),{minHeight:"95vh"}),n})),U=(0,m.ZP)((function(e){return(0,r.jsx)(Z.Z,(0,p.Z)({},e))}))((function(e){var n,i=e.theme;return n={zIndex:10,position:"relative",paddingTop:i.spacing(5),width:"100%",height:"100%"},(0,u.Z)(n,i.breakpoints.up("md"),{paddingTop:i.spacing(5)}),(0,u.Z)(n,i.breakpoints.up("xl"),{paddingTop:i.spacing(5)}),n})),k=(0,m.ZP)(S.m.img)({zIndex:9,width:"100%",height:"100%",objectFit:"cover",position:"absolute"});function G(e){var n=e.dataCarousel;return(0,r.jsxs)(L,{children:[(0,r.jsx)(k,{alt:"overlay",src:"/background/fondo_carousel.webp"}),(0,r.jsx)(U,{children:(0,r.jsx)(Z.Z,{sx:{width:"100%"},children:(0,r.jsx)("div",{children:(0,r.jsx)(V,{featuredData:n})})})})]})}(0,m.ZP)(S.m.div)((function(e){var n=e.theme;return(0,u.Z)({padding:n.spacing(8,0),backgroundColor:n.palette.background.neutral},n.breakpoints.up("md"),{padding:n.spacing(10,0)})}));(0,m.ZP)("div")((function(e){var n=e.theme;return(0,u.Z)({padding:n.spacing(8,0)},n.breakpoints.up("md"),{padding:n.spacing(15,0)})}));var K=i(99534),B=i(32205),z=i(15714),W=i(79136),Q=i(40044),Y=i(11163),H=i(45082),J=i(65604),X=i(88477),$=(0,m.ZP)(Z.Z)((function(e){return{backgroundColor:e.theme.palette.common.white,position:"relative"}})),ee=(0,m.ZP)(W.Z)((function(){return{"& .MuiTabs-indicator":{height:8}}})),ne=(0,m.ZP)(t.Z)((function(){return{zIndex:10,position:"relative",width:"100%"}})),ie=(0,m.ZP)("img")({zIndex:9,width:"100%",height:"auto",objectFit:"cover",position:"absolute"}),re=["INDIVIDUAL","COLECTIVO"],te=function(e){var n,i=e.dataAreas,t=(0,Y.useRouter)(),s=(0,I.Fs)("up","md"),c=(0,P.useState)(!1),d=c[0],u=c[1],p=(0,P.useState)(null===(n=i[0])||void 0===n?void 0:n.attributes.slug),h=p[0],_=p[1],x=(0,P.useState)("INDIVIDUAL"),m=x[0],v=x[1],g=function(){u(!d)};(0,(0,I.Oc)().useGetUrlPortales)("get_constant_value","URL_PORTALES").data;return(0,P.useEffect)((function(){v("INDIVIDUAL")}),[h]),(0,P.useEffect)((function(){if(t.query.budget){var e=document.getElementById("budget_scroll");e&&e.scrollIntoView({behavior:"smooth"})}}),[t]),(0,r.jsxs)($,{id:"budget_scroll",children:[(0,r.jsx)(ie,{alt:"overlay",src:"/background/lineas.webp"}),(0,r.jsxs)(ne,{maxWidth:"xl",sx:{py:{xs:6,md:10}},children:[(0,r.jsx)(o.Z,{variant:"h2",textAlign:"center",color:"secondary.main",sx:{py:{xs:1,md:5}},children:"Cotiza f\xe1cil y r\xe1pido"}),(0,r.jsxs)(f.ZP,{container:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"75vh",flexDirection:{xs:"column-reverse",md:"row"}},children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(a.Z,{justifyContent:"center",alignItems:"center",my:5,px:{xs:0,md:2},children:[(0,r.jsx)(ee,{value:h,onChange:function(e,n){_(n)},"aria-label":"budget tabs",variant:"scrollable",scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{width:{xs:"100%",md:"80%"},mb:2},textColor:"primary",indicatorColor:"primary",children:i.map((function(e,n){return(0,r.jsx)(Q.Z,{label:null===e||void 0===e?void 0:e.attributes.titulo,value:null===e||void 0===e?void 0:e.attributes.slug,sx:{px:.5}},"budget_tab_".concat(n+1))}))}),i.map((function(e,n){return(0,r.jsxs)(ae,{value:h,index:null===e||void 0===e?void 0:e.attributes.slug,children:["personas"===h&&(0,r.jsx)(O.Tf,{sxContainer:{width:"100%",minHeight:"420px"},children:(0,r.jsxs)(Z.Z,{sx:{px:{xs:0,md:3},py:{xs:0,md:6},minHeight:"380px"},children:[(0,r.jsx)(a.Z,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:2,md:5},children:re.map((function(e,n){return(0,r.jsx)(o.Z,{variant:"inherit",color:m===e?"secondary":"#4B4B4B",onClick:function(){return v(e)},sx:{fontWeight:"bold","&:hover":{cursor:"pointer",color:"secondary.main"}},children:e},"type_sub_area_".concat(n+1))}))}),(0,r.jsx)(R.Z,{budgetPublic:!0,type:m,handleModal:g})]})}),"automoviles"===h&&(0,r.jsx)(O.Tf,{sxContainer:{width:"100%",minHeight:"420px"},children:(0,r.jsxs)(Z.Z,{sx:{px:{xs:0,md:3},py:{xs:0,md:6},minHeight:"380px"},children:[(0,r.jsx)(a.Z,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:2,md:5}}),(0,r.jsx)(J.Z,{budgetPublic:!0})]})}),"patrimoniales"===h&&(0,r.jsx)(O.Tf,{sxContainer:{width:"100%",minHeight:"420px"},children:(0,r.jsxs)(Z.Z,{sx:{px:{xs:0,md:3},py:{xs:0,md:6},minHeight:"380px"},children:[(0,r.jsx)(a.Z,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:2,md:5}}),(0,r.jsx)(z.Z,{type:m,handleModal:g})]})}),"fianzas"===h&&(0,r.jsx)(O.Tf,{sxContainer:{width:"100%",minHeight:"420px"},children:(0,r.jsxs)(Z.Z,{sx:{px:{xs:0,md:3},py:{xs:0,md:6},minHeight:"380px"},children:[(0,r.jsx)(a.Z,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:2,md:5}}),(0,r.jsx)(B.Z,{type:m,handleModal:g})]})}),"viajes"===h&&(0,r.jsx)(O.Tf,{sxContainer:{width:"100%",minHeight:"420px"},children:(0,r.jsxs)(Z.Z,{sx:{px:{xs:0,md:3},py:{xs:0,md:6},minHeight:"380px"},children:[(0,r.jsx)(a.Z,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:2,md:5}}),(0,r.jsx)(X.Z,{budgetPublic:!0})]})})]},"budget_tab_panel_".concat(n+1))}))]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(l.Ee,{alt:"budget",src:function(e){var n,r,t,o,a=i.find((function(n){return(null===n||void 0===n?void 0:n.attributes.slug)===e}));return(0,D.yw)("INDIVIDUAL"===m?null===a||void 0===a?void 0:a.attributes.imagen.data.attributes.url:null!==(o=null===(n=null===a||void 0===a?void 0:a.attributes.imagen_alterna)||void 0===n||null===(r=n.data)||void 0===r||null===(t=r.attributes)||void 0===t?void 0:t.url)&&void 0!==o?o:null===a||void 0===a?void 0:a.attributes.imagen.data.attributes.url)}(h),sx:{maxWidth:s?"550px":"280px"}})})]})]}),(0,r.jsx)(H.Z,{isOpen:d,handleModal:g})]})},oe=te;te.propTypes={dataAreas:C().array.isRequired};var ae=function(e){var n=e.children,i=e.value,t=e.index,o=(0,K.Z)(e,["children","value","index"]);return(0,r.jsx)("div",(0,h.Z)((0,p.Z)({role:"tabpanel",hidden:i!==t,id:"simple-tabpanel-".concat(t),"aria-labelledby":"simple-tab-".concat(t),style:{width:"75%"}},o),{children:i===t&&(0,r.jsx)(Z.Z,{sx:{p:{xs:0,md:3}},children:n})}))};ae.propTypes={children:C().node,index:C().string.isRequired,value:C().string.isRequired};var se=i(89609);(0,m.ZP)(S.m.div)((function(e){var n=e.theme;return(0,u.Z)({position:"relative",backgroundColor:n.palette.secondary.main,minHeight:"85vh"},n.breakpoints.up("md"),{width:"100%",height:"85vh",display:"flex",alignItems:"center"})})),(0,m.ZP)((function(e){return(0,r.jsx)(a.Z,(0,p.Z)({spacing:2},e))}))((function(e){var n=e.theme;return(0,u.Z)({zIndex:10,margin:"auto",position:"relative",paddingTop:n.spacing(10),paddingBottom:n.spacing(2),width:"100%"},n.breakpoints.up("md"),{paddingTop:n.spacing(10),paddingBottom:n.spacing(10)})})),(0,m.ZP)(S.m.img)({zIndex:9,width:"100%",height:"100%",objectFit:"cover",position:"absolute"});C().object.isRequired,C().array.isRequired,C().string.isRequired;var le=i(87685),ce=(0,m.ZP)(S.m.div)((function(e){var n,i=e.theme;return n={position:"relative",minHeight:"95vh"},(0,u.Z)(n,i.breakpoints.up("md"),{width:"100%",minHeight:"100vh",display:"flex",alignItems:"center"}),(0,u.Z)(n,i.breakpoints.up("xl"),{minHeight:"95vh"}),n})),de=(0,m.ZP)((function(e){return(0,r.jsx)(se.Z,(0,p.Z)({},e))}))((function(e){var n,i=e.theme;return n={zIndex:10,position:"relative",paddingTop:i.spacing(15),width:"100%",height:"100%"},(0,u.Z)(n,i.breakpoints.up("md"),{paddingTop:i.spacing(15)}),(0,u.Z)(n,i.breakpoints.up("xl"),{paddingTop:i.spacing(15)}),n})),ue=(0,m.ZP)(S.m.img)({zIndex:9,width:"100%",height:"auto",objectFit:"cover",position:"absolute"});function pe(e){var n=e.aboutData.attributes,i=n.titulo,s=n.subtitulo,c=n.logo,d=n.descripcion,p=e.allAreas,h=(0,I.Fs)("up","md"),_=(0,le.u)();return(0,r.jsxs)(ce,{children:[(0,r.jsx)(ue,{alt:"overlay",src:"/background/lineas.webp"}),(0,r.jsx)(de,{children:(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(o.Z,{variant:"h1",color:"secondary",sx:{marginBottom:h?6:3},children:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:4,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(se.Z,{sx:{width:{xs:"300px",md:"400px",lg:"450px"}},children:(0,r.jsx)(l.Ee,{alt:i,src:"".concat("https://la-internacional.com/gestor-contenidos/graphql".replace("/graphql","")).concat(c.data.attributes.url)})})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,lg:5,sx:{marginBottom:2},children:(0,r.jsx)(l.UG,{content:d,customSx:{textAlign:"justify","& p":{marginBottom:h?"40px":"20px"},color:_.palette.secondary.main}})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,sx:{my:2},children:(0,r.jsx)(se.Z,{sx:(0,u.Z)({display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row"},_.breakpoints.down("lg"),{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"}),children:p.map((function(e,n){return(0,r.jsxs)(a.Z,{spacing:4,justifyContent:"center",alignItems:"center",children:[(0,r.jsx)(l.Ee,{alt:i,src:"".concat("https://la-internacional.com/gestor-contenidos/graphql".replace("/graphql","")).concat(e.attributes.icono.data.attributes.url),sx:(0,u.Z)({maxWidth:"140px"},_.breakpoints.down("lg"),{maxWidth:"100px"})}),(0,r.jsx)(o.Z,{variant:"h5",color:"secondary",textAlign:"center",children:e.attributes.titulo})]},"index_area_".concat(n+1))}))})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,sx:{display:"flex",justifyContent:"center",alignItems:"center",my:5},children:(0,r.jsx)(o.Z,{variant:"h2",color:"secondary",textAlign:"center",children:s})})]})})})]})}pe.propTypes={aboutData:C().object.isRequired,allAreas:C().array.isRequired};var he=i(55102);function _e(e){var n=e.valuesData,i=(0,he.Z)("down","md"),s=(0,he.Z)("up","lg"),c=(0,w.Z)();return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsx)(Z.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",py:6,px:i?3:6},children:n.map((function(e,n){return(0,r.jsx)(f.ZP,{container:!0,sx:{display:"flex",flexDirection:"row",mb:6},children:(0,r.jsx)(f.ZP,{item:!0,xs:12,md:10,lg:11,children:(0,r.jsx)(Z.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:4,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(l.Ee,{alt:e.attributes.titulo,src:"".concat("https://la-internacional.com/gestor-contenidos/graphql".replace("/graphql","")).concat(e.attributes.icono.data.attributes.url),sx:{height:{xs:120,md:160},width:{xs:120,md:160}}})}),(0,r.jsxs)(f.ZP,{item:!0,xs:12,sm:8,children:[(0,r.jsx)(a.Z,{direction:"row",alignItems:"center",spacing:3,mb:2,mt:1,children:(0,r.jsx)(o.Z,{variant:i?"h3":s?"h2":"h3",color:"secondary.main",children:e.attributes.titulo})}),(0,r.jsx)(l.UG,{content:e.attributes.descripcion,customSx:{color:c.palette.text.disabled,textAlign:"justify",mb:2,lineHeight:i?1.5:1.65}})]})]})})})},"item_item_".concat(n))}))})})}_e.propTypes={valuesData:C().array.isRequired};var xe=i(29815),me=(i(15054),i(41664)),ve=i.n(me);function fe(e){var n=e.project,i=(n.slug,n.frontmatter),t=i.title,s=i.coverImg,c=i.category;return(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Ee,{src:s,alt:t,ratio:"1/1",sx:{borderRadius:2}}),(0,r.jsxs)(a.Z,{spacing:1,sx:{p:2.5},children:[(0,r.jsx)(o.Z,{variant:"overline",sx:{color:"text.disabled"},children:c}),(0,r.jsx)(ve(),{passHref:!0,href:"/servicios/post-01",children:(0,r.jsx)(l.b3,{variant:"h5",line:1,asLink:!0,children:t})})]})]})}fe.propTypes={project:C().object.isRequired},C().array.isRequired;i(55267),(0,m.ZP)("div")((function(e){return{position:"relative",padding:e.theme.spacing(20,0)}}));C().shape({frontmatter:C().shape({createdAt:C().string,duration:C().string,heroImg:C().string,shareLinks:C().objectOf(C().string),title:C().string})});var ge=i(24385),je=i(64666),ye=i(31425),be=i(8614),Ce=i(45098),Ze=i(10030),Oe=(0,Ce.Z)("div")({padding:"0px",height:"23rem",display:"flex"}),Re=(0,Ce.Z)("img")({width:"100%",height:"100%",objectFit:"fill"}),Se=(0,Ce.Z)(je.Z)({"& .MuiPaper-root":{width:"100%",height:"auto"}}),Ee=function(){var e=(0,P.useState)(!1),n=e[0],i=e[1],t=(0,P.useState)(null),o=t[0],a=t[1],s=(0,Y.useRouter)(),l=(0,be.Z)(),c=l.useGetUpdateData,d=l.useGetNeedUpdate,u=c({p_profile_id:(0,Ze.Ai)().P_PROFILE_ID}),p=u.data,h=u.isSuccess,_=d({p_portal_user_id:(0,Ze.Ai)().P_PORTAL_USER_ID}),x=_.data,m=_.refetch,v=_.isSuccess;(0,P.useEffect)((function(){h&&(a(p),m())}),[h]),(0,P.useEffect)((function(){null===sessionStorage.getItem("modal")&&sessionStorage.setItem("modal","true"),v&&"ENABLED"===(null===o||void 0===o?void 0:o.result)&&"N"===x.p_status&&"true"===sessionStorage.getItem("modal")&&i(!0)}),[v,o]);return(0,r.jsxs)(Se,{open:n,children:[(0,r.jsx)(Oe,{children:(0,r.jsx)(Re,{alt:"Actualizar Datos",src:"/background/actualiza_tu_datos.jpg"})}),(0,r.jsx)("div",{}),(0,r.jsx)(ye.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(E.Z,{color:"primary",variant:"contained",sx:{color:"secondary.main"},onClick:function(){i(!1),s.push("/portal/settings?update=true")},children:"Actualizar Datos"})})]})},Pe=i(40571),Te=i(3367),Ie=i(62327),De=i(88767),we=i(18414),Me=i(99952);function Ae(){var e=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(we.Z.getDashboardToJson(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=(0,d.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){switch(i.label){case 0:return n=function(e){var n,i=e.dashboard_code;if(["emergency_verification_clinic","emergency_verification_employee","refund_health_claim_employee","refund_health_claim_broker","letter_guarantee_request_employee","letter_guarantee_request_broker","letter_guarantee_activation_clinic","letter_guarantee_request_insured","refund_health_claim_insured"].includes(i)){var r=e.dashboard_id,t=e.service_type,o=e.p_client_code,a=void 0===o?"":o;n={p_identification_type:e["p_identification_type_".concat(r)],p_identification_number:e["p_identification_number_".concat(r)],p_client_code:a,p_service_type:t}}switch(e.dashboard_code){case"emergency_verification_clinic":return Me.Z.verifyInsurability(n);case"refund_health_claim_broker":case"refund_health_claim_employee":case"emergency_verification_employee":case"letter_guarantee_request_employee":case"letter_guarantee_request_broker":return Me.Z.verifyInsurabilityAsBroker(n);case"letter_guarantee_activation_clinic":return Me.Z.getServicesByPerson(n);case"refund_health_claim_insured":case"letter_guarantee_request_insured":return Me.Z.getClientFamilyGroupInfo(n);default:return null}}(e),[4,Ie.Z.get(n)];case 1:return[2,i.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}();return{useGetDashboardToJson:function(n){return(0,De.useQuery)(["dashboards_to_json",n],(function(){return e(n)}))},useGetValidationDashboard:function(e){return(0,De.useQuery)(["validation_dashboard",e],(function(){return n(e)}),{enabled:null!==e&&null!==(null===e||void 0===e?void 0:e.dashboard_code)})},getRoute:function(e,n){switch(e){case"emergency_verification_clinic":case"emergency_verification_employee":return{pathname:"/portal/siniestro_salud/verificacion_emergencia/",query:{p_verification_id:n.verificationId}};case"refund_health_claim_employee":case"refund_health_claim_broker":case"letter_guarantee_request_employee":case"letter_guarantee_request_broker":return{pathname:"/portal/siniestro_salud/solicitud_servicio/",query:{p_verification_id:n.verificationId}};case"letter_guarantee_activation_clinic":return{pathname:"/portal/siniestro_salud/verificacion_carta/",query:{p_preadmission_id:n.IDEPREADMIN,p_complement_id:n.NUMLIQUID}};case"refund_health_claim_insured":case"letter_guarantee_request_insured":return{pathname:"/portal/siniestro_salud/solicitud_servicio_asegurado/",query:{p_service_type:n.serviceType,p_verification_id:n.verificationId}};case"report_car_accidents":return{pathname:"/portal/carAccidents/",query:{identificationNumber:n.identificationNumber,identificationType:n.identificationType}}}}}}var Ne=i(39043),Fe=i(86501);function Ve(e){var n=e.data,i=e.handleClick;return(0,r.jsx)(O.wY,{data:null!==n&&void 0!==n?n:[],onRowClick:function(e){return i(e.original)},columns:[{header:"Nro. Carta",accessorKey:"NRO_LIQUIDACION"},{header:"Monto",accessorKey:"MTOAMPARADO"},{header:"Moneda",accessorKey:"CODMONEDAPOLIZA"},{header:"Tratamiento",accessorKey:"DESCTRATA"}],options:{sorting:!1,search:!1,paging:!1,toolbar:!1}})}function qe(e){var n=e.isLoading,i=e.data,t=e.handleClick;return(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(l.a_,{disableBg:!0}),!n&&(0,r.jsx)(O.wY,{data:i||[],onRowClick:function(e){return t(e.original)},columns:[{header:"Asegurado",accessorKey:"nameAndLastName",cell:function(e){var n,i,t,a;return(0,r.jsxs)(o.Z,{variant:"body2",textAlign:"center",children:[e.getValue()," ",(null===e||void 0===e||null===(n=e.row)||void 0===n||null===(i=n.original)||void 0===i?void 0:i.relationship)?"(".concat(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(a=t.original)||void 0===a?void 0:a.relationship,")"):""]})}}],options:{sorting:!1,search:!1,paging:!1,toolbar:!1}})]})}qe.propTypes={isLoading:C().bool.isRequired,data:C().arrayOf(C().object),handleClick:C().func.isRequired};var Le=i(3584),Ue=i(16790),ke=i(66242),Ge=i(41796);Be.propTypes={children:C().node,title:C().string.isRequired,icon:C().string,backColor:C().string,handleButton:C().func.isRequired};var Ke=(0,m.ZP)(ke.Z,{shouldForwardProp:function(e){return"backColor"!==e}})((function(e){var n=e.backColor;return{boxShadow:"0 16px 24px 2px rgba(0, 0, 0, 0.14), 0 6px 30px 5px rgba(0, 0, 0, 0.12), 0 8px 40px -5px rgba(0, 0, 0, 0.2)",minHeight:"205px",backgroundColor:(0,Ge._j)(n,.38),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white",transition:"all 0.25s ease-in-out",position:"relative","&:hover":{backgroundColor:(0,Ge._j)(n,.45),cursor:"pointer"}}}));function Be(e){var n,i=e.title,t=e.backColor,a=e.icon,s=e.handleButton,c=(0,le.u)();return(0,r.jsxs)(Ke,{backColor:t,onClick:s,children:[(0,r.jsx)(o.Z,{variant:"h6",sx:{paddingRight:"4vw"},children:i}),(0,r.jsx)(l.Ir,{icon:a,sx:(n={position:"absolute",opacity:.5,left:"35%",bottom:"-5%",width:"120px",height:"120px",color:(0,Ge._j)(t,.7)},(0,u.Z)(n,c.breakpoints.up("sm"),{left:"15vw",bottom:"-5%"}),(0,u.Z)(n,c.breakpoints.up("lg"),{height:"14vh",width:"6.5vw",left:"10.5vw",top:"22%"}),n)})]})}function ze(e){var n=e.action,i=e.color,t=e.dashboard_id,o=e.data_form_type,s=e.icon,c=e.iconaction,d=e.title,_=e.cardIndex,m=e.handleButton,v=e.dashboard_code,f=e.posturl,g=(0,De.useQueryClient)(),j=(0,x.cI)({mode:"onSubmit"}),y=j.handleSubmit,b=j.formState.isSubmitting;return(0,r.jsxs)(r.Fragment,{children:["drilldown"===f&&(0,r.jsx)(Be,{title:d,icon:s,backColor:i,handleButton:function(){return m(e)}}),"drilldown"!==f&&(0,r.jsx)(l.RV,{methods:j,onSubmit:y((function(n){g.invalidateQueries("validation_dashboard"),m((0,h.Z)((0,p.Z)({},e,n,["notify_claim","notify_claim_broker"].includes(v)&&(0,u.Z)({},"p_date_".concat(t),(0,Ue.Z)(n["p_date_".concat(t)],"dd/MM/yyyy"))),{cardIndex:_}))})),children:(0,r.jsx)(O.sb,{title:d,icon:s,headerColor:i,iconButton:c,actionTitle:n,loading:b,body:(0,r.jsxs)(r.Fragment,{children:["DATE_FORM"===o&&(0,r.jsx)(a.Z,{my:2,children:(0,r.jsx)(Le.X5,{label:"Fecha de ocurrencia",name:"p_date_".concat(t),disableFuture:!0})}),"identification_form"===o&&(0,r.jsx)(a.Z,{my:2,spacing:2,children:(0,r.jsx)(Le.c9,{index:t,arrayValues:D.r5,required:!0})})]}),minHeightWorkflow:!0})})]})}ze.propTypes={action:C().string.isRequired,color:C().string.isRequired,icon:C().string,title:C().string.isRequired,iconButton:C().string,data_form_type:C().string,iconaction:C().string.isRequired,dashboard_id:C().number.isRequired,cardIndex:C().number.isRequired,handleButton:C().func.isRequired,dashboard_code:C().string.isRequired,posturl:C().string.isRequired};var We=(0,m.ZP)(Z.Z)((function(){return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",p:4,boxShadow:24,backgroundColor:"background.paper"}})),Qe=["refund_health_claim_employee","refund_health_claim_broker","emergency_verification_employee","emergency_verification_clinic","letter_guarantee_request_employee","letter_guarantee_request_broker"],Ye=["letter_guarantee_activation_clinic"],He=["refund_health_claim_insured","letter_guarantee_request_insured"];function Je(){var e,n,i,t=(0,Y.useRouter)(),o=(0,P.useState)(null),a=o[0],s=o[1],c=(0,P.useState)([null]),u=c[0],x=c[1],m=(0,P.useState)(!1),v=m[0],g=m[1],j=(0,P.useState)(null),y=j[0],b=j[1],C=(0,Ze.Ai)(),R=Ae(),S=R.useGetDashboardToJson,T=R.useGetValidationDashboard,D=R.getRoute,w=(0,I.WD)().useGetPoliciesBySinisterAuto,M=S({P_MASTER_DASHBOARD_ID:u[u.length-1]}),A=M.data,N=M.isLoading,F=(0,(0,I.VD)().useVerifyInsurabilityAsInsured)(y).data,V=w().mutate,q=T(a),L=q.data,U=q.isLoading,k=function(){g(!v)},G=function(){var e=(0,d.Z)((function(e){var n,i;return(0,_.__generator)(this,(function(r){return void 0!==e?((n=(0,xe.Z)(u)).push(e.dashboard_id),x(n)):((i=(0,xe.Z)(u)).pop(),x(i)),[2]}))}));return function(n){return e.apply(this,arguments)}}(),K=function(e){"drilldown"===e.posturl?G(e):s(e)},B=function(){var e,n;if(L)if("letter_guarantee_activation_clinic"===a.dashboard_code)0===(null===L||void 0===L||null===(e=L.result)||void 0===e?void 0:e.length)?Fe.ZP.error("La persona no posee Carta Aval activa"):(null===L||void 0===L||null===(n=L.result)||void 0===n?void 0:n.length)>1?k():z(a.dashboard_code,L.result[0]);else if(He.includes(a.dashboard_code)){var i,r;"clientWithoutFamilyGroup"===(null===L||void 0===L||null===(i=L.result)||void 0===i?void 0:i.resultType)?b({p_service_type:a.service_type,p_client_code:C.p_client_code,p_client_code_request:""}):"clientWithFamilyGroup"===(null===L||void 0===L||null===(r=L.result)||void 0===r?void 0:r.resultType)&&k()}else{var t,o,s,l,c,d;if("oneInsuredPersonFound"===(null===L||void 0===L||null===(t=L.result)||void 0===t?void 0:t.resultType))z(a.dashboard_code,{serviceType:a.service_type,verificationId:null===L||void 0===L||null===(o=L.result)||void 0===o?void 0:o.verificationId,clientCodeRequest:C.p_client_code===(null===F||void 0===F||null===(s=F.result)||void 0===s||null===(l=s.clientData)||void 0===l?void 0:l.clientCode)?"":null===F||void 0===F||null===(c=F.result)||void 0===c||null===(d=c.clientData)||void 0===d?void 0:d.clientCode});else k()}},z=function(e,n){t.push(D(e,n))};return(0,P.useEffect)((function(){var e,n,i,r,t;F&&z(null===a||void 0===a?void 0:a.dashboard_code,{serviceType:null===a||void 0===a?void 0:a.service_type,verificationId:null===F||void 0===F||null===(e=F.result)||void 0===e?void 0:e.verificationId,clientCodeRequest:C.p_client_code===(null===F||void 0===F||null===(n=F.result)||void 0===n||null===(i=n.clientData)||void 0===i?void 0:i.clientCode)?"":null===F||void 0===F||null===(r=F.result)||void 0===r||null===(t=r.clientData)||void 0===t?void 0:t.clientCode})}),[F]),(0,P.useEffect)((function(){if(a&&void 0===F&&!y&&["emergency_verification_clinic","emergency_verification_employee","refund_health_claim_employee","refund_health_claim_broker","letter_guarantee_request_employee","letter_guarantee_request_broker","letter_guarantee_activation_clinic"].includes(a.dashboard_code))B();else if(a&&null!==F&&!y&&He.includes(a.dashboard_code))B();else if(a&&["vaucher_viaje_salud_coorporativo","vaucher_viaje_salud_asegurado","vaucher_viaje_salud_intermediario","report_car_accidents"].includes(a.dashboard_code))try{if(!a.posturl)return void Fe.ZP.error("La ruta de redirecci\xf3n no est\xe1 configurada");if("report_car_accidents"===a.dashboard_code){var e={p_identification_type:a["p_identification_type_".concat(a.dashboard_id)],p_identification_number:a["p_identification_number_".concat(a.dashboard_id)],check_digit:"0"};V(e,{onSuccess:function(e){0!==e.polizas_cur.length?(sessionStorage.setItem("P_POLIZA_AUTO",JSON.stringify(e.polizas_cur)),z(a.dashboard_code,{identificationNumber:a["p_identification_number_".concat(a.dashboard_id)],identificationType:a["p_identification_type_".concat(a.dashboard_id)]})):Fe.ZP.error("El asegurado no tiene p\xf3liza o tiene recibos pendientes, por favor revisar")},onError:function(e){Fe.ZP.error("Ocurri\xf3 un error al intentar acceder al servicio: ".concat(e.message))}})}else t.push(a.posturl)}catch(n){Fe.ZP.error("Ocurri\xf3 un error al intentar acceder al servicio")}}),[L,a,F]),(0,r.jsxs)(Z.Z,{children:[U&&(0,r.jsx)(l.a_,{noColor:!0}),N&&(0,r.jsx)(l.a_,{disableBg:!0}),!N&&(0,r.jsx)(f.ZP,{container:!0,spacing:3,mb:3,children:null===A||void 0===A?void 0:A.result.map((function(e,n){return(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:6,lg:3,children:(0,r.jsx)(ze,(0,h.Z)((0,p.Z)({},e),{cardIndex:n,handleButton:K}))},"card_dashboard_insured_".concat(n))}))}),null!==u[u.length-1]&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f.ZP,{container:!0,justify:"flex-start",alignItems:"center",mb:2,children:(0,r.jsxs)(E.Z,{color:"secondary",onClick:function(){return G()},variant:"contained",children:[(0,r.jsx)(l.Ir,{icon:"ant-design:backward-filled",sx:{mx:1}}),"Regresar"]})})}),(0,r.jsx)(Ne.Z,{open:v,onClose:k,children:(0,r.jsxs)(We,{children:[Qe.includes(null===a||void 0===a?void 0:a.dashboard_code)&&(0,r.jsx)(O.no,{title:"Seleccione el asegurado que requiere el servicio",headerColor:"blue",icon:"ic:outline-assignment",children:(0,r.jsx)(qe,{data:null===L||void 0===L||null===(e=L.result)||void 0===e?void 0:e.clients,handleClick:function(e){g(!v),s((0,h.Z)((0,p.Z)({},a),{p_client_code:e.clientCode}))},isLoading:U})}),Ye.includes(null===a||void 0===a?void 0:a.dashboard_code)&&(0,r.jsx)(O.no,{title:"Seleccione la carta aval del Asegurado",headerColor:"blue",icon:"ic:outline-assignment",children:(0,r.jsx)(Ve,{data:null===L||void 0===L?void 0:L.result,handleClick:function(e){g(!v);var n=e.IDEPREADMIN,i=e.NUMLIQUID;z(a.dashboard_code,{IDEPREADMIN:n,NUMLIQUID:i})}})}),He.includes(null===a||void 0===a?void 0:a.dashboard_code)&&L&&(0,r.jsx)(O.no,{title:"Seleccione el asegurado que requiere el servicio",headerColor:"blue",icon:"ic:outline-assignment",children:(0,r.jsx)(qe,{data:[{nameAndLastName:"".concat(null===C||void 0===C||null===(n=C.FIRST_NAME)||void 0===n?void 0:n.toUpperCase()," ").concat(null===C||void 0===C||null===(i=C.LAST_NAME)||void 0===i?void 0:i.toUpperCase()," (TITULAR)"),clientCode:null===C||void 0===C?void 0:C.p_client_code}].concat((0,xe.Z)(L.result.familyGroup)),handleClick:function(e){g(!v),b({p_service_type:a.service_type,p_client_code:null===C||void 0===C?void 0:C.p_client_code,p_client_code_request:(null===C||void 0===C?void 0:C.p_client_code)===e.clientCode?"":e.clientCode})},isLoading:U})})]})})]})}function Xe(){(0,Y.useRouter)();var e,n=(0,(0,I.l)().useGetActiveServices)(),i=n.data,t=n.isLoading,o=[{header:"Servicio",accessorKey:"TOOLTIP",cell:function(e){var n,i,t,o;return(0,r.jsx)(O.b8,{textTooltip:e.getValue()||"Sin area definida",icon:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original.ICON)?null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.ICON:"healthicons:no-outline",sx:{backgroundColor:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original.COLOR)?null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original.COLOR:"#DFE3E8"}})}},{header:"Detalle",accessorKey:"DETAIL"},{header:"Proceso",accessorKey:"STAGE_NAME"},{header:"Fecha",accessorKey:"STAGE_DATE"},{header:"Estatus",accessorKey:"STATUS_FOR_COLORS",cell:function(e){return(0,r.jsx)(l.__,{color:D.Bh[e.getValue()].color,children:e.getValue()})}}];return"corporate"===(0,Ze.Ai)().PROFILE_CODE&&o.push({header:"Estatus Tarea",accessorKey:"TIME_STATUS_TASK",cell:function(e){var n;return(0,r.jsx)(l.__,{color:null===(n=D.B5[e.getValue()])||void 0===n?void 0:n.color,children:e.getValue()})}},{header:"Estatus Caso",accessorKey:"TIME_STATUS_WORKFLOW",cell:function(e){var n;return(0,r.jsx)(l.__,{color:null===(n=D.B5[e.getValue()])||void 0===n?void 0:n.color,children:e.getValue()})}}),(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(l.a_,{disableBg:!0}),!t&&(0,r.jsx)(O.wY,{data:null!==(e=null===i||void 0===i?void 0:i.result)&&void 0!==e?e:[],onRowClick:function(e){return function(e){window.open("/portal/workflow/service/?workflow_id=".concat(e.WORKFLOW_ID),"_blank")}(e.original)},columns:o})]})}function $e(){var e=(0,Pe.Z)().themeStretch;return(0,r.jsxs)(t.Z,{maxWidth:!e&&"xl",children:[(0,r.jsx)(Ee,{}),(0,r.jsxs)(f.ZP,{container:!0,spacing:3,mb:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(Je,{})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(O.no,{title:"P\xf3lizas",icon:"akar-icons:file",children:(0,r.jsx)(Te.su,{})})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(O.no,{title:"Solicitudes en tr\xe1nsito",icon:"fa:inbox",children:(0,r.jsx)(Xe,{})})})]})]})}function en(){var e=(0,I.rV)().themeStretch;return(0,r.jsx)(t.Z,{maxWidth:!e&&"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,mb:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(Je,{})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(O.no,{title:"Solicitudes en tr\xe1nsito",icon:"akar-icons:file",children:(0,r.jsx)(Xe,{})})})]})})}function nn(){var e=(0,I.rV)().themeStretch;return(0,r.jsx)(t.Z,{maxWidth:!e&&"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,mb:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(Je,{})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(O.no,{title:"Solicitudes en tr\xe1nsito",icon:"fa:inbox",children:(0,r.jsx)(Xe,{})})})]})})}function rn(){var e,n=(0,Y.useRouter)(),i=(0,(0,I.VD)().useGetRecentsVerifications)({p_service_type:"02",p_status:"PENDING",p_query_date:"01/09/2022"}),t=i.data,o=i.isLoading;return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsx)(O.wY,{data:null!==(e=null===t||void 0===t?void 0:t.result)&&void 0!==e?e:[],onRowClick:function(e){return function(e){n.push("/portal/siniestro_salud/solicitud_ingreso/?p_verification_id=".concat(e.VERIFICATION_ID))}(e.original)},columns:[{header:"Asegurado",accessorKey:"CLIENT_NAME"},{header:"Fecha",accessorKey:"VERIFICATION_DATE"}],options:{search:!1}})]})}function tn(){var e=(0,I.rV)().themeStretch;return(0,r.jsx)(t.Z,{maxWidth:!e&&"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,mb:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(Je,{})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,children:(0,r.jsx)(O.no,{title:"Emergencia - Pendientes por Solicitud de Ingreso",icon:"ic:sharp-local-hospital",children:(0,r.jsx)(rn,{})})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:8,lg:8,children:(0,r.jsx)(O.no,{title:"Solicitudes en tr\xe1nsito",icon:"fa:inbox",children:(0,r.jsx)(Xe,{})})})]})})}function on(){var e=(0,I.rV)().themeStretch;return(0,r.jsx)(t.Z,{maxWidth:!e&&"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,mb:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,r.jsx)(Je,{})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:8,lg:12,children:(0,r.jsx)(O.no,{title:"Solicitudes en tr\xe1nsito",icon:"fa:inbox",children:(0,r.jsx)(Xe,{})})})]})})}var an=i(49975),sn=i(78462),ln=i(97212),cn=i(98619),dn=i(48885),un=i(59334),pn=i(67720),hn=[{title:"Imagen de perfil",icon:"bxs:camera",type:"image"},{title:"Datos generales",icon:"akar-icons:file",type:"general"}];function _n(){var e,n,i=(0,Y.useRouter)(),o=(0,(0,be.Z)().useGetUserDetail)(),a=o.data,s=o.isLoading,c=(0,P.useState)("image"),d=c[0],u=c[1];(0,P.useEffect)((function(){"true"===i.query.update&&u("general")}),[i.query.update]);return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:4,children:(0,r.jsxs)(O.no,{icon:"bi:person",headerColor:"blue",title:"".concat((null===(e=null===a||void 0===a?void 0:a.p_cur_data[0])||void 0===e?void 0:e.NOMTER)||""," ").concat((null===(n=null===a||void 0===a?void 0:a.p_cur_data[0])||void 0===n?void 0:n.APETER1)||""),children:[(0,r.jsx)(sn.Z,{component:"nav","aria-label":"mailbox folders",children:hn.map((function(e,n){return(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(ln.ZP,{children:(0,r.jsxs)(cn.Z,{onClick:function(){return n=e.type.toLowerCase(),void u(n);var n},children:[(0,r.jsx)(dn.Z,{children:(0,r.jsx)(l.Ir,{icon:e.icon})}),(0,r.jsx)(un.Z,{primary:e.title})]})}),(0,r.jsx)(pn.Z,{})]},"list_".concat(n,"_a"))}))}),(0,r.jsx)(E.Z,{onClick:function(){i.back()},variant:"contained",fullWidth:!0,children:"Regresar"})]})}),(0,r.jsxs)(f.ZP,{item:!0,xs:12,md:8,children:["image"===d&&(0,r.jsx)(O.no,{title:"Imagen de perfil",icon:"bxs:camera",children:(0,r.jsx)(O.s_,{})}),"general"===d&&(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)(l.a_,{disableBg:!0}),!s&&(0,r.jsx)(Te.jp,{customer:null===a||void 0===a?void 0:a.p_cur_data[0],updeteable:"Y"===(null===a||void 0===a?void 0:a.p_updeteable)})]})]})]})})}var xn=i(47073);function mn(e){var n,i,t,o,s,c,d,u=e.publicPayment,p=(0,Y.useRouter)(),h=(0,xn.Z)(),_=h.useGetPaymentCurrency,x=h.useGetPaymentOptions,m=h.useGetClientInvoice,v=h.useGetPaymentPolicyMenu,f=h.useGetInsurancePolicyInvoice,g=(0,P.useState)(""),j=g[0],y=g[1],b=(0,P.useState)(""),C=b[0],Z=b[1],R=(0,P.useState)([]),S=R[0],T=R[1],I=(0,P.useState)(!1),D=I[0],w=I[1],M=function(){return u?!!(null===p||void 0===p?void 0:p.query.p_identification_type):!(null===p||void 0===p?void 0:p.query.policy_data)},A=_(M(),{p_identification_type:null===p||void 0===p||null===(n=p.query)||void 0===n?void 0:n.p_identification_type,p_identification_number:null===p||void 0===p||null===(i=p.query)||void 0===i?void 0:i.p_identification_number}),N=A.data,F=A.isLoading,V=A.error,q=x({p_currency_company:j,p_identification_type:null===p||void 0===p||null===(t=p.query)||void 0===t?void 0:t.p_identification_type,p_identification_number:null===p||void 0===p||null===(o=p.query)||void 0===o?void 0:o.p_identification_number}),L=q.data,U=q.isLoading,k=q.refetch,G=m(M(),{p_currency_company:j,p_payment_type:C,p_identification_type:null===p||void 0===p||null===(s=p.query)||void 0===s?void 0:s.p_identification_type,p_identification_number:null===p||void 0===p||null===(c=p.query)||void 0===c?void 0:c.p_identification_number}),K=G.data,B=G.isLoading,z=v(!!(null===p||void 0===p?void 0:p.query.policy_data),(null===p||void 0===p?void 0:p.query.policy_data)?JSON.parse(null===p||void 0===p?void 0:p.query.policy_data):{}),W=z.data,Q=z.isLoading,H=f(!!(null===p||void 0===p?void 0:p.query.policy_data),(null===p||void 0===p?void 0:p.query.policy_data)?JSON.parse(null===p||void 0===p?void 0:p.query.policy_data):{}),J=H.data,X=H.isLoading,$=function(){if(1===(null===W||void 0===W?void 0:W.result.length)||1===(null===L||void 0===L?void 0:L.result.length))w(!1),y(""),Z(""),p.back();else if(C)Z(""),w(!1),(null===p||void 0===p?void 0:p.query.policy_data)&&1===(null===W||void 0===W?void 0:W.result.length)&&p.back();else if(j){var e;y(""),w(!1),((null===p||void 0===p||null===(e=p.query)||void 0===e?void 0:e.p_identification_type)||1===(null===N||void 0===N?void 0:N.result.length)||(null===p||void 0===p?void 0:p.query.policy_data))&&p.back()}else p.back()};(0,P.useEffect)((function(){w(!1),N&&1===(null===N||void 0===N?void 0:N.result.length)&&y(N.result[0].CURRENCY)}),[N]),(0,P.useEffect)((function(){L&&1===(null===L||void 0===L?void 0:L.result.length)&&Z(L.result[0].payment_type)}),[L]),(0,P.useEffect)((function(){W&&1===(null===W||void 0===W?void 0:W.result.length)&&Z(W.result[0].payment_type)}),[W]),(0,P.useEffect)((function(){J&&y(null===J||void 0===J?void 0:J.p_cur_payment_options[0].DEFAULT_CURRENCY_COMPANY)}),[J]),(0,P.useEffect)((function(){(J||K)&&C&&w(!0)}),[J,K,C]),(0,P.useEffect)((function(){V&&p.back()}),[V]);return(0,P.useEffect)((function(){j&&k()}),[j]),(0,r.jsxs)(r.Fragment,{children:[F||U||B||Q||X?(0,r.jsx)(l.a_,{disableBg:!0}):null,!F&&!U&&!B&&!Q&&!X&&(0,r.jsxs)(O.no,{title:"Pagar",headerColor:"blue",icon:"akar-icons:file",children:[!j&&u&&!(null===p||void 0===p?void 0:p.query.p_identification_type)&&(0,r.jsx)(On,{publicPayment:!0}),(null===N||void 0===N||null===(d=N.result)||void 0===d?void 0:d.length)>1&&(0,r.jsx)(fn,{currencies:null===N||void 0===N?void 0:N.result,handleUpdateCurrency:function(e){w(!1),y(e)}}),j&&!C&&function(){var e,n;return(null===L||void 0===L||null===(e=L.result)||void 0===e?void 0:e.length)>1||(null===W||void 0===W||null===(n=W.result)||void 0===n?void 0:n.length)>1}()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(gn,{optionsMenu:(null===p||void 0===p?void 0:p.query.policy_data)?null===W||void 0===W?void 0:W.result:null===L||void 0===L?void 0:L.result,handleUpdatePaymentOption:Z}),(0,r.jsx)(a.Z,{my:2,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(E.Z,{color:"primary",onClick:$,variant:"contained",children:"Regresar"})})]}),D&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(bn,{invoices:(null===p||void 0===p?void 0:p.query.policy_data)?null===J||void 0===J?void 0:J.p_cur_data_invoice:null===K||void 0===K?void 0:K.p_cur_data_invoice,currency:j,setCurrency:y,handlePayment:function(e){try{T(e)}catch(n){Fe.Am.error(n)}},invoicesToPay:S,paymentOptions:(null===p||void 0===p?void 0:p.query.policy_data)?null===J||void 0===J?void 0:J.p_cur_payment_options:null===K||void 0===K?void 0:K.p_cur_payment_options,paymentMethods:(null===p||void 0===p?void 0:p.query.policy_data)?null===J||void 0===J?void 0:J.p_cur_payment_methods:null===K||void 0===K?void 0:K.p_cur_payment_methods,handleReturn:$,publicPayment:u})})]})]})}mn.propTypes={publicPayment:C().bool};var vn=i(46901);function fn(e){var n=e.currencies,i=e.handleUpdateCurrency,o=((0,Y.useRouter)(),function(e){i(e.CURRENCY)});return(0,r.jsxs)(t.Z,{maxWidth:"md",children:[(0,r.jsx)(vn.Z,{severity:"info",icon:!1,variant:"filled",children:"Seleccione la moneda de su producto:"}),(0,r.jsx)(sn.Z,{children:n&&n.map((function(e){return(0,r.jsx)(O.gF,{element:e,primaryText:e.DESCRIPTION,onListItemClick:o,children:(0,r.jsx)(l.Ir,{icon:"ic:outline-payments"})},"".concat(e.CURRENCY,"_a"))}))}),(0,r.jsx)(a.Z,{justifyContent:"center",alignItems:"center"})]})}function gn(e){var n=e.handleUpdatePaymentOption,i=e.optionsMenu;return(0,r.jsxs)(t.Z,{maxWidth:"md",children:[(0,r.jsx)(vn.Z,{severity:"info",icon:!1,variant:"filled",children:"Seleccione el tipo de producto a pagar:"}),(0,r.jsx)(a.Z,{spacing:2,direction:"row",mt:2,justifyContent:"center",alignItems:"center",children:i&&i.map((function(e){return(0,r.jsxs)(E.Z,{variant:"text",color:"primary",size:"large",onClick:function(){return n(e.payment_type)},children:[(0,r.jsx)(l.Ir,{icon:e.icon_name,sx:{mx:1}}),e.option_label]},e.payment_type)}))})]})}fn.propTypes={currencies:C().array.isRequired,handleUpdateCurrency:C().func.isRequired},gn.propTypes={optionsMenu:C().array.isRequired,handleUpdatePaymentOption:C().func.isRequired};var jn=i(20792),yn=function(e){return{width:"20px",height:"20px",color:"".concat(e)}};function bn(e){var n=(0,Y.useRouter)(),i=e.invoices,t=e.currency,o=e.setCurrency,s=e.handlePayment,c=e.invoicesToPay,d=e.paymentOptions,u=e.paymentMethods,_=e.handleReturn,x=e.publicPayment,m=(0,P.useState)(0),v=m[0],g=m[1],j=(0,P.useState)(!1),y=j[0],b=j[1],C=(0,P.useState)(!0),Z=C[0],R=C[1],S=(0,P.useState)(null),T=S[0],w=S[1],M=(0,P.useState)(0),A=M[0],N=M[1],F=(0,P.useState)(v),V=F[0],q=F[1],L=(0,P.useState)(t),U=L[0],k=L[1],G=(0,(0,xn.Z)().useDeleteMerchantOperation)().mutate,K=(0,(0,I.Oc)().useGetUrlPortales)("get_constant_value","MONTO_MAX_PASARELA").data;(0,P.useEffect)((function(){K&&N(K.result)}),[K]);var B=null===c||void 0===c?void 0:c.every((function(e){return"S"===e.INDMULTIPAGO}));return(0,P.useEffect)((function(){k(t)}),[t]),(0,r.jsxs)(r.Fragment,{children:[!y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.wY,{options:{sorting:!0,selection:!0},columns:[{header:"",accessorKey:"VALIDAFACT",id:"header",cell:function(e){var n=e.row.original.STS_MONEY_WAY;return null===e.getValue()&&"SND"===n?(0,r.jsx)(l.Ir,{icon:"svg-spinners:clock",sx:yn("red")}):null===e.getValue()?(0,r.jsx)(l.Ir,{icon:"ic:outline-check",sx:yn("green")}):(0,r.jsx)(l.Ir,{icon:"ic:outline-close",sx:yn("red")})}},{header:"Descripci\xf3n",accessorKey:"DESCRIPCION"},{header:"Estatus de Factura",accessorKey:"STS_MONEY_WAY",cell:function(e){return"SND"===e.getValue()?(0,r.jsx)("p",{children:"Factura en Proceso de Cobro"}):null===e.row.original.VALIDAFACT&&"SND"!==e.row.original.STS_MONEY_WAY?(0,r.jsx)("p",{children:"Facturas Pendientes por Pagar"}):(0,r.jsx)("p",{children:e.row.original.VALIDAFACT})}},{header:"N\xfamero de factura",accessorKey:"NUMFACT"},{header:"Monto",accessorKey:"MTOFACTMONEDA",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.MTOFACTMONEDA)},cell:function(e){return(0,D.eO)(e.getValue(),t)}}],data:i,onSelectionChange:function(e){for(var n=function(e){var n=o[e];n.SELECTED&&(o.filter((function(e){return e.NUMFACT<n.NUMFACT&&e.IDEPOL===n.IDEPOL&&e.NUMCERT===n.NUMCERT&&null===e.VALIDAFACT})).every((function(e){return e.SELECTED}))||(t=!1,r.forEach((function(e){e.original.NUMFACT===n.NUMFACT&&e.toggleSelected(!1)})),Fe.Am.error("Debe seleccionar las facturas en orden descendente")))},r=e.getSelectedRowModel().flatRows,t=!0,o=i.map((function(e){var n=r.some((function(n){return n.original.NUMFACT===e.NUMFACT}));return(0,h.Z)((0,p.Z)({},e),{SELECTED:n})})),a=0;a<o.length;a++)n(a);if(t){var l=o.filter((function(e){return e.SELECTED})).map((function(e){return e})),c=l.reduce((function(e,n){return e+n.MTOFACTMONEDA}),0);q(c),g(c),s(l)}}}),(0,r.jsx)(Cn.Z,{total:v,currency:t})]}),y&&(0,r.jsxs)(f.ZP,{container:!0,spacing:2.5,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(O.no,{title:"Total a Pagar",icon:"ph:money-bold",children:(0,r.jsx)(jn.Z,{mount:(0,D.dN)(B?V:v),currency:(0,D.z5)(B?U:t)})})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:8,children:(0,r.jsx)(Zn.Z,{paymentOptions:d,paymentMethods:u,invoicesToPay:c,amount:v,setTotal:g,currency:t,setCurrency:o,onResult:function(e){var i=x?"/pago_resultado/?income_ratio_number=".concat(e.income_ratio_number,"&report_hash=").concat(e.report_id):"/portal/pay/pay_result/?income_ratio_number=".concat(e.income_ratio_number,"&report_hash=").concat(e.report_id);n.push(i)},handleShowReturnButton:R,showReturnButton:Z,handleOperationNumber:w,operationNumber:T,multiPaymentTotal:V,setMultiPaymentTotal:q,setMultiPaymentCurrency:k,multiPaymentCurrency:U,filterMultiPayment:B})})]}),(0,r.jsxs)(a.Z,{direction:"row",my:2,justifyContent:"center",alignItems:"center",spacing:2,children:[(0,r.jsxs)(E.Z,{variant:"contained",onClick:function(){y?(G({p_operation_number:T}),w(null),g(0),q(0),k(t),s([]),b(!1)):_()},children:[(0,r.jsx)(l.Ir,{icon:"ant-design:backward-filled",sx:{mx:1}}),"Regresar"]}),!y&&(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){v>A&&"DL3"===t?Fe.Am.error("El monto total supera el monto permitido para procesar esta transacci\xf3n por favor comunicarse con la internacional de seguros al siguiente n\xfamero +58 (212) 211-4517."):0===c.length?Fe.Am.error("Debe seleccionar al menos una factura"):b(!0)},children:["Siguiente",(0,r.jsx)(l.Ir,{icon:"ant-design:forward-filled",sx:{mx:1}})]})]})]})}bn.propTypes={invoices:C().array.isRequired,currency:C().string.isRequired,handlePayment:C().func,invoicesToPay:C().array,paymentOptions:C().array,paymentMethods:C().array,handleReturn:C().func,publicPayment:C().bool,setCurrency:C().func.isRequired};var Cn=i(24284),Zn=i(47865);function On(e){var n=e.publicPayment,i=(e.providerHeader,(0,Y.useRouter)()),s=(0,x.cI)(),c=s.handleSubmit,d=(s.formState.isSubmitting,function(e){i.asPath.includes("/cotiza_cot")?i.push({pathname:"/cotiza_cot/pagos/",query:{p_identification_type:e.p_identification_type_0,p_identification_number:e.p_identification_number_0}}):i.push({pathname:n?"/pagos":"/portal/pay",query:{p_identification_type:e.p_identification_type_0,p_identification_number:e.p_identification_number_0}})});return(0,r.jsx)(t.Z,{children:n?(0,r.jsxs)(l.RV,{methods:s,onSubmit:c(d),children:[(0,r.jsx)(o.Z,{variant:"h5",textAlign:"center",children:"Identificaci\xf3n del cliente"}),(0,r.jsx)(t.Z,{maxWidth:"sm",children:(0,r.jsx)(a.Z,{spacing:2,my:2,children:(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!0})})}),(0,r.jsx)(a.Z,{justifyContent:"center",alignItems:"center",children:(0,r.jsxs)(E.Z,{type:"submit",variant:"contained",color:"secondary",children:["Siguiente",(0,r.jsx)(l.Ir,{icon:"eva:arrow-ios-forward-fill",sx:{ml:1}})]})})]}):(0,r.jsx)(O.no,{title:"Pagar",headerColor:"blue",children:(0,r.jsxs)(l.RV,{methods:s,onSubmit:c(d),children:[(0,r.jsx)(o.Z,{variant:"h5",textAlign:"center",children:"Identificaci\xf3n del cliente"}),(0,r.jsx)(t.Z,{maxWidth:"sm",children:(0,r.jsx)(a.Z,{spacing:2,my:2,children:(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!0})})}),(0,r.jsx)(a.Z,{justifyContent:"center",alignItems:"center",children:(0,r.jsxs)(E.Z,{type:"submit",variant:"contained",color:"secondary",children:["Siguiente",(0,r.jsx)(l.Ir,{icon:"eva:arrow-ios-forward-fill",sx:{ml:1}})]})})]})})})}function Rn(){var e=(0,P.useState)({p_range:"4"}),n=e[0],i=e[1];return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:3,children:(0,r.jsx)(Dn,{handleFilters:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:9,children:(0,r.jsx)(Nn,{selectedFilters:n})})]})})}var Sn=i(828),En=i(7069),Pn=[{label:"Periodo",value:"1"},{label:"Rango de Fechas",value:"2"}],Tn="dd/MM/yyyy",In=new Date;function Dn(e){var n=e.handleFilters,i=(0,(0,xn.Z)().useGetDateRange)().data,t=(0,x.cI)({defaultValues:{p_type_search:"1",p_range:"4"}}),o=t.handleSubmit,s=t.watch,c=t.clearErrors,d=t.setError,u=t.setValue,p=t.formState,h=p.isSubmitting,_=p.errors,m=(0,Sn.Z)(s(["p_start_date","p_end_date","p_type_search"]),3),f=m[0],g=m[1],j=m[2];return(0,P.useEffect)((function(){u("p_range","4"),u("p_start_date",""),u("p_end_date","")}),[j]),(0,P.useEffect)((function(){_.p_start_date&&c("p_start_date"),_.p_end_date&&c("p_end_date")}),[f,g]),(0,r.jsx)(l.NM,{children:(0,r.jsx)(S.m.div,{variants:(0,l.BL)().in,children:(0,r.jsx)(O.no,{title:"Per\xedodo a consultar",icon:"ant-design:file-search-outlined",headerColor:"blue",children:(0,r.jsxs)(l.RV,{methods:t,onSubmit:o((function(e){if("1"===e.p_type_search)n({p_range:e.p_range});else if(""===(r=e).p_start_date||""===r.p_end_date||function(e){return e.p_start_date>e.p_end_date||e.p_end_date<e.p_start_date}(e)){var i=""===e.p_start_date?"p_start_date":"p_end_date";d(i,{type:"manual",message:"Indique el per\xedodo o seleccione un rango valido de b\xfasqueda"})}else n({p_start_date:(0,Ue.Z)(e.p_start_date,Tn),p_end_date:(0,Ue.Z)(e.p_end_date,Tn)});var r})),children:[(0,r.jsx)(Le.K3,{arrayOptions:Pn,name:"p_type_search"}),(0,r.jsxs)(Z.Z,{my:2,children:["1"===s("p_type_search")&&(null===i||void 0===i?void 0:i.result)&&(0,r.jsx)(Le.dk,{name:"p_range",arrayValues:(null===i||void 0===i?void 0:i.result)||[],label:"Per\xedodo"}),"2"===s("p_type_search")&&(0,r.jsxs)(a.Z,{spacing:2,children:[(0,r.jsx)(Le.X5,{label:"Fecha desde",name:"p_start_date",maxDate:(0,En.Z)(In,1),disableFuture:!0}),(0,r.jsx)(Le.X5,{label:"Fecha hasta",name:"p_end_date",disableFuture:!0})]})]}),(0,r.jsxs)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:h,children:[" ","Buscar"]})]})})})})}Dn.propTypes={handleFilters:C().func.isRequired};var wn=i(34386),Mn=i(93946),An=i(51790);function Nn(e){var n=e.selectedFilters,i=(0,(0,xn.Z)().useGetPayment)(n),t=i.data,a=i.isLoading,s=(0,(0,An.Z)().useGenerateReport)().mutate;return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(l.a_,{disableBg:!0}),!a&&(0,r.jsx)(l.NM,{children:(0,r.jsx)(S.m.div,{variants:(0,l.BL)().in,children:(0,r.jsx)(O.no,{title:function(){if(null===n||void 0===n?void 0:n.p_range)switch(null===n||void 0===n?void 0:n.p_range){case"1":return"Listado correspondiente al d\xeda de hoy";case"2":return"Hist\xf3rico correspondiente a la \xfaltima semana";case"3":return"Hist\xf3rico correspondiente al \xfaltimo mes";case"4":return"Hist\xf3rico correspondiente a los \xfaltimos 3 meses";default:return"Hist\xf3rico de pagos"}else if(null===n||void 0===n?void 0:n.p_start_date)return" Hist\xf3rico de Pagos del  "+(null===n||void 0===n?void 0:n.p_start_date)+" al "+(null===n||void 0===n?void 0:n.p_end_date)}(),icon:"ant-design:file-search-outlined",headerColor:"purple",children:(0,r.jsx)(O.wY,{data:(null===t||void 0===t?void 0:t.result)||[],detailPanel:function(e){var n,i,t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Z,{variant:"body2",children:[" ",(0,r.jsx)("strong",{children:" P\xd3LIZA(S):"})," ",null===e||void 0===e||null===(n=e.original)||void 0===n?void 0:n.DATOS]}),(0,r.jsxs)(o.Z,{variant:"body2",children:[(0,r.jsx)("strong",{children:"FACTURA(S):"})," ",null===e||void 0===e||null===(i=e.original)||void 0===i?void 0:i.FACTURA]}),(0,r.jsxs)(o.Z,{variant:"body2",children:[(0,r.jsx)("strong",{children:"FECHA DEL PAGO:"})," ",null===e||void 0===e||null===(t=e.original)||void 0===t?void 0:t.FECHAPAGO]})]})},columns:[{header:"N\xfam. Operaci\xf3n",accessorKey:"NUMOPER"},{header:"N\xfam. Referencia",accessorKey:"NUMREF"},{header:"Tipo de Pago",accessorKey:"TIPO"},{header:"Total",accessorKey:"TOTAL",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.TOTAL)},cell:function(e){var n,i;return(0,D.eO)(e.getValue(),"".concat(null===e||void 0===e||null===(n=e.row)||void 0===n||null===(i=n.original)||void 0===i?void 0:i.CODMONEDA))}},{header:"Documento",accessorKey:"DOCUMENTO",align:"center",cell:function(e){return(0,r.jsx)(wn.Z,{title:"Ver documento",placement:"right-start",arrow:!0,children:(0,r.jsx)(Mn.Z,{"aria-label":"Documentos",color:"secondary",onClick:function(){var n;return function(e){var n={p_report_id:e.REPORT_ID,p_json_parameters:JSON.stringify({p_numreling:e.NUMRELING})};s(n,{onSuccess:function(e){var n=e.result;window.open("/reporte?reportDocRunId=".concat(n),"_blank")},onError:function(e){Fe.ZP.error((0,D.J4)(e.response.data))}})}(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original)},children:(0,r.jsx)(l.Ir,{icon:"carbon:generate-pdf",width:24,height:24})})})}},{header:"Estatus",accessorKey:"STATUS",cell:function(e){return(0,r.jsx)(l.__,{color:D._2[e.getValue()].color,children:e.getValue()})}}]})})})})]})}Nn.propTypes={selectedFilters:C().shape({p_range:C().string,p_start_date:C().string,p_end_date:C().string})};C().func.isRequired,C().array;(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return(0,u.Z)({padding:n.spacing(8,0)},n.breakpoints.up("md"),{padding:n.spacing(10,0)})}));function Fn(e){var n=e.handleParams,i=(0,De.useQueryClient)(),t=(0,x.cI)({mode:"onSubmit",defaultValues:{p_identification_type_0:"",p_identification_number_0:"",p_name:""}}),o=t.handleSubmit,s=t.formState.isSubmitting,c=function(){var e=(0,d.Z)((function(e){var r;return(0,_.__generator)(this,(function(t){return i.invalidateQueries("get_aseguradoVisitas"),r={p_identification_type:e.p_identification_type_0,p_identification_number:e.p_identification_number_0,p_name:""},n(r),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(O.no,{title:"Asegurado",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(l.RV,{methods:t,onSubmit:o(c),children:(0,r.jsxs)(a.Z,{spacing:2.5,children:[(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!1}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:s,children:"Buscar"})]})})})}function Vn(){var e=(0,P.useState)({}),n=e[0],i=e[1];return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(Fn,{handleParams:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(Un,{params:n})})]})})}Fn.propTypes={handleParams:C().func.isRequired};var qn=i(68540),Ln=i(73310);function Un(e){var n,i=e.params,t=(0,(0,Ln.Z)().useGetAseguradoVisitas)(i),o=t.data,a=t.isLoading,s=(0,(0,Ln.Z)().useGetPosibleAsegurado)(i).data;console.log(null===s||void 0===s?void 0:s.p_cursor.length),console.log(null===o||void 0===o?void 0:o.p_cursor);var c=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(l.a_,{disableBg:!0}),!a&&(0,r.jsx)(ke.Z,{raise:"true",children:(null===o||void 0===o||null===(n=o.p_cursor)||void 0===n?void 0:n.length)>0?(0,r.jsx)(O.wY,{data:(null===o||void 0===o?void 0:o.p_cursor)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){var n,i,t,o,a,s;return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original.ICONO_PROD)?null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.ICONO_PROD:"healthicons:no-outline",sx:{backgroundColor:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original.COLOR_PROD)?null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original.COLOR_PROD:"#DFE3E8","&:hover":{backgroundColor:(0,Ge._j)((null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original.COLOR_PROD)?null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.original.COLOR_PROD:"#DFE3E8",.45)}}})}},{header:"N\xb0 P\xf3liza",accessorKey:"NUMEROPOL"},{header:"Titular",accessorKey:"TITULAR"},{header:"Contratante",accessorKey:"CONTRATANTE"},{header:"Cod Intermediario",accessorKey:"ASESOR"}],onRowClick:function(e){c.push({pathname:"/portal/visita/aseguradoRegistro",query:{codcli:e.original.CODCLI,idepol:e.original.IDEPOL,numcert:e.original.NUMCERT,codinter:e.original.CODINTER,nominter:e.original.NOMINTER,numpol:e.original.NUMPOL,codofiemi:e.original.CODOFIEMI,producto:e.original.CODPROD,type:"registro"}})}}):(0,r.jsx)(O.wY,{data:(null===s||void 0===s?void 0:s.p_cursor)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:"akar-icons:person"})}},{header:"Nuevo Registro",accessorKey:"REGISTRO"},{header:"Identificaci\xf3n",accessorKey:"POSASEG"}],onRowClick:function(e){c.push({pathname:"/portal/visita/posAseg/aseguradoPosible",query:{tipoid:e.original.IDENT,numid:e.original.NUMIDE,div:e.original.DIV,nombre:e.original.NOMBRE,type:"registro_nuevo"}})}})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){c.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}Un.propTypes={params:C().object.isRequired};var kn=i(48922),Gn=i(23189);function Kn(){return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsx)(f.ZP,{container:!0,spacing:1,children:(0,r.jsx)(f.ZP,{item:!0,xs:100,md:50,children:(0,r.jsx)(kn.Z,{title:"Visitantes",icon:"bi:person",headerColor:"blue",children:(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsxs)(Z.Z,{sx:{display:"flex"},children:[(0,r.jsx)(ve(),{href:Gn.Z.asegurado,children:(0,r.jsx)(E.Z,{variant:"contained",sx:{borderRadius:8,m:{xs:2,md:2},width:300,height:50},children:"Asegurado"})}),(0,r.jsx)(ve(),{href:Gn.Z.posAseg,children:(0,r.jsx)(E.Z,{variant:"contained",sx:{borderRadius:8,m:{xs:2,md:2},width:300,height:50},children:"Posible Asegurado"})})]}),(0,r.jsxs)(Z.Z,{sx:{display:"flex"},children:[(0,r.jsx)(ve(),{href:Gn.Z.intermediario,children:(0,r.jsx)(E.Z,{variant:"contained",sx:{borderRadius:8,m:{xs:2,md:2},width:300,height:50,textTransform:"none !important"},children:"Intermediario Activo"})}),(0,r.jsx)(ve(),{href:Gn.Z.intermediario,children:(0,r.jsx)(E.Z,{variant:"contained",sx:{borderRadius:8,m:{xs:2,md:2},width:300,height:50,textTransform:"none !important"},children:"Intermediario Nuevo"})})]}),(0,r.jsxs)(Z.Z,{sx:{display:"flex"},children:[(0,r.jsx)(ve(),{href:Gn.Z.externos,children:(0,r.jsx)(E.Z,{variant:"contained",sx:{borderRadius:8,m:{xs:2,md:2},width:300,height:50,textTransform:"none !important"},children:"Proveedor/Mensajero/Peritos Externos"})}),(0,r.jsx)(ve(),{href:Gn.Z.pautados,children:(0,r.jsx)(E.Z,{variant:"contained",sx:{borderRadius:8,m:{xs:2,md:2},width:300,height:50,textTransform:"none !important"},children:"Visitantes/Entrevistas/Funcionarios P\xfablicos"})})]})]})})})})})}i(62023);var Bn=i(94623),zn=i(90428);function Wn(){return(0,r.jsx)(zn.Z,{title:"Detalle Cliente",children:(0,r.jsx)(Yn,{})})}Wn.getLayout=function(e){return(0,r.jsx)(Bn.i,{children:e})};i(65452);var Qn=[{title:"Nuevo Registro",icon:"bi:card-list"},{title:"Polizas",icon:"akar-icons:file"}];function Yn(){var e,n,i=(0,Y.useRouter)(),o=(0,P.useState)(!1),a=o[0],s=o[1],c=(0,(0,I.yj)().useGetVisitaDetail)(a,{p_code_customer:null===i||void 0===i?void 0:i.query.codcli,p_idepol:null===i||void 0===i?void 0:i.query.idepol,p_certificado:null===i||void 0===i?void 0:i.query.numcert,p_codinter:null===i||void 0===i?void 0:i.query.codinter,p_nominter:null===i||void 0===i?void 0:i.query.nominter,p_numpol:null===i||void 0===i?void 0:i.query.numpol,p_codofiemi:null===i||void 0===i?void 0:i.query.codofiemi,p_producto:null===i||void 0===i?void 0:i.query.producto}),d=c.data,u=c.isLoading;return(0,P.useEffect)((function(){i.query&&s(!0)}),[i.isReady,i.query]),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(O.no,{icon:"bi:person",headerColor:"blue",title:"".concat((null===d||void 0===d?void 0:d.p_cursor[0].NOMTER)||""," ").concat((null===d||void 0===d?void 0:d.p_cursor[0].APETER1)||""),children:[(0,r.jsx)(sn.Z,{component:"nav","aria-label":"mailbox folders",children:Qn.map((function(e,n){return(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(ln.ZP,{children:(0,r.jsxs)(cn.Z,{onClick:function(){return n=e.title.toLowerCase(),console.log(n),void("nuevo registro"===n?i.push({pathname:"/portal/visita/modulo_visitas"}):"polizas"===n&&i.push({pathname:"/portal/customer",query:{codcli:null===i||void 0===i?void 0:i.query.codcli,type:n}}));var n},children:[(0,r.jsx)(dn.Z,{children:(0,r.jsx)(l.Ir,{icon:e.icon})}),(0,r.jsx)(un.Z,{primary:e.title})]})}),(0,r.jsx)(pn.Z,{})]},"list_".concat(n,"_a"))}))}),(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,r.jsx)(E.Z,{onClick:function(){i.back()},variant:"contained",fullWidth:!0,children:"Regresar"}),(0,r.jsx)(pn.Z,{}),(0,r.jsx)(E.Z,{onClick:function(){i.push({pathname:"/portal/visita/modulo_visitas"})},variant:"contained",fullWidth:!0,children:"Regresar - Menu"})]})]})}),(0,r.jsxs)(f.ZP,{item:!0,xs:12,md:8,children:["registro"===(null===i||void 0===i||null===(e=i.query)||void 0===e?void 0:e.type)&&(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(l.a_,{disableBg:!0}),!u&&(null===d||void 0===d?void 0:d.p_cursor[0])&&(0,r.jsx)(Jn,{customer:null===d||void 0===d?void 0:d.p_cursor[0],updeteable:!0})]}),"polizas"===(null===i||void 0===i||null===(n=i.query)||void 0===n?void 0:n.type)&&(0,r.jsx)(O.no,{title:"P\xf3lizas",icon:"bi:card-list",iconColor:"primary",children:(0,r.jsx)(Te.su,{codCli:null===i||void 0===i?void 0:i.query.codcli})})]})]})})}Jn.propTypes={customer:C().object.isRequired,updeteable:C().bool};var Hn=(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,u.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));function Jn(e){var n=e.customer,i=e.updeteable,t="CUSTOMER",o=n.TIPOID,s=(0,I.n5)().setValuesForm,c=(0,(0,Ln.Z)().useUpdateVisita)(),u=c.mutate,p=c.isLoading,h=(0,(0,Ln.Z)().useGetMotivoTipVisita)({p_motivo:"MOTIVO",p_tipo_visita:n.CODVISITA}).data,m=(0,Y.useRouter)(),f=(0,x.cI)({defaultValues:{p_tipo_visitante_CUSTOMER:"",P_cod_oficina_CUSTOMER:"",p_cod_departamento_CUSTOMER:"",p_intermediario_CUSTOMER:"",p_codintermediario_CUSTOMER:"",p_motivo_visita_CUSTOMER:"",p_identification_type_CUSTOMER:"",p_profession_CUSTOMER:"",p_activity_CUSTOMER:"",p_edocivil_CUSTOMER:"",p_sex_CUSTOMER:"",p_country_id_CUSTOMER:"",p_state_id_CUSTOMER:"",p_city_id_CUSTOMER:"",p_municipality_id_CUSTOMER:"",p_urbanization_id_CUSTOMER:"",p_address_CUSTOMER:"",p_producto_CUSOMER:"",p_num_oficina_CUSTOMER:"",p_num_poliza_CUSTOMER:"",p_certificado_CUSTOMER:"",p_idepol_CUSTOMER:"",p_id_asegurado_CUSTOMER:""}}),g=f.handleSubmit,j=f.formState.isSubmitting,y=f.watch;function b(){return(b=(0,d.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){return y("p_local_phone_CUSTOMER").length<11||y("p_mobile_phone_CUSTOMER").length<11?Fe.ZP.error("Los n\xfameros telef\xf3nicos deben ser de 11 d\xedgitos"):(n={p_index:t,p_json_cliente:JSON.stringify(e)},u(n,{onSuccess:function(){var e=JSON.parse(n.p_json_cliente);m.push({pathname:"/portal/visita/VisitaRectangulo",query:{index:n.p_index,type:"registro_intermediario",Oficina:e.p_cod_oficina_CUSTOMER,Departamento:e.p_cod_departamento_CUSTOMER,Nomasesor:e.p_nomasesor_CUSTOMER}})},onError:function(e){return Fe.ZP.error((0,D.J4)(e.response.data))}})),[2]}))}))).apply(this,arguments)}return(0,P.useEffect)((function(){var e=n.NUMID,i=n.CODCLI;s(n,t,f,o,e,i)}),[]),(0,r.jsxs)(r.Fragment,{children:[p&&(0,r.jsx)(l.a_,{noColor:!0}),(0,r.jsxs)(l.RV,{methods:f,onSubmit:g((function(e){return b.apply(this,arguments)})),children:[(0,r.jsxs)(a.Z,{spacing:3,children:[(0,r.jsx)(O.no,{title:"Motivo de la Visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(Le.NG,{index:t,objForm:f,arrayValues:null===h||void 0===h?void 0:h.p_cursor,required:!0,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Oficina de Atenci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)($n,{index:t,objForm:f,showOficina:!0,showDepartamento:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Datos poliza",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(ni,{objForm:f,showProducto:!0,showPoliza:!0,showOficina:!0,showIdepol:!0,showCert:!0,showCodcli:!0,index:t,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Indentificaci\xf3n del Intermediario",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(Xn.default,{index:t,customerType:t,readonly:!0})})}),(0,r.jsx)(O.no,{title:"Asesor del Intermediario",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(bi,{objForm:f,showTipoVisita:!0,showCodVisita:!0,index:t,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Identificaci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(Le.c9,{index:t,arrayValues:D.IQ,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Tipo visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(ii,{objForm:f,showTipoVisita:!0,showCodVisita:!0,index:t,readOnly:!0})})}),o&&"PERSONAL"===(0,D._t)(o)&&(0,r.jsx)(O.no,{title:"Datos del Asegurado",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(an.Df,{index:t,customerType:t,readonly:!0})})}),y("p_country_id_CUSTOMER")&&(0,r.jsx)(O.no,{title:"Direcci\xf3n",headerColor:"purple",icon:"entypo:location-pin",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(Le.LF,{index:t,objForm:f,showCountry:!0,showUrbanization:!0,showAddressInput:!0,showDetails:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Hn,{children:(0,r.jsx)(an.wo,{index:t,readOnly:!1})})})]}),!0===i&&(0,r.jsx)(a.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:j,children:"Registrar"})})]})]})}var Xn=i(27314);i(22943);function $n(e){var n=e.objForm,i=e.showOficina,t=e.showDepartamento,o=e.index,a=(e.readOnly,e.required),s=(0,Ln.Z)(),l=s.useGetListOficina,c=s.useGetListDepartamento,d=l({p_motivo_oficina:n.watch("p_motivo_visita_".concat(o))}).data,u=c({p_motivo_departamento:n.watch("p_motivo_visita_".concat(o)),p_codvisita:n.watch("p_codvisita_".concat(o))}).data;return n.setValue("p_cod_oficina_".concat(o),null===d||void 0===d?void 0:d.p_cursor[0].VALUE),n.setValue("p_cod_departamento_".concat(o),null===u||void 0===u?void 0:u.p_cursor[0].VALUE),(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(Le.dk,{label:"Oficina",defaultValue:1,name:"p_cod_oficina_".concat(o),arrayValues:null===d||void 0===d?void 0:d.p_cursor,required:a}),t&&(0,r.jsx)(Le.dk,{label:"Departamento",defaultValue:1,name:"p_cod_departamento_".concat(o),arrayValues:null===u||void 0===u?void 0:u.p_cursor,required:a})]})}function ei(){var e=(0,P.useState)({}),n=e[0],i=e[1];return console.log(n),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(Fn,{handleParams:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(Un,{params:n})})]})})}function ni(e){e.objForm;var n=e.showProducto,i=e.showPoliza,t=e.showOficina,o=e.showIdepol,a=e.showCert,s=e.showCodcli,l=e.index,c=e.readonly;e.required;return(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(Le.be,{label:"Producto",name:"p_producto_".concat(l),readOnly:c||!1,disabled:!0,required:!0}),t&&(0,r.jsx)(Le.be,{label:"Oficina Poliza",name:"p_num_oficina_".concat(l),readOnly:c||!1,disabled:!0,required:!0}),i&&(0,r.jsx)(Le.be,{label:"Numero Poliza",name:"p_num_poliza_".concat(l),readonly:c||!1,disabled:!0,required:!0}),a&&(0,r.jsx)(Le.be,{label:"Certificado",name:"p_certificado_".concat(l),readonly:c||!1,disabled:!0,required:!0}),o&&(0,r.jsx)(Le.be,{label:"Idepol",name:"p_idepol_".concat(l),readonly:c||!1,disabled:!0,required:!0}),s&&(0,r.jsx)(Le.be,{label:"C\xf3digo cliente",name:"p_codcli_".concat(l),readonly:c||!1,disabled:!0,required:!0})]})}function ii(e){e.objForm;var n=e.showTipoVisita,i=e.showCodVisita,t=e.index;e.readonly,e.required;return(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(Le.be,{label:"Codigo Visita",name:"p_codvisita_".concat(t),readOnly:!0,disabled:!0,required:!0}),n&&(0,r.jsx)(Le.be,{label:"Tipo Visita",name:"p_nomvisita_".concat(t),readOnly:!0,disabled:!0,required:!0})]})}$n.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readOnly:C().bool,sshowOficina:C().bool,showDepartamento:C().bool},ni.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readonly:C().bool,showProducto:C().bool,showPoliza:C().bool,showOficina:C().bool,showIdepol:C().bool,showCert:C().bool},ii.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readonly:C().bool,showProducto:C().bool,showPoliza:C().bool,showOficina:C().bool,showIdepol:C().bool,showCert:C().bool};i(32677);function ri(){return(0,r.jsx)(zn.Z,{title:"Registro Cliente",children:(0,r.jsx)(oi,{})})}ri.getLayout=function(e){return(0,r.jsx)(Bn.i,{children:e})};var ti=[{title:"Nuevo Registro",icon:"bi:card-list"}];function oi(){var e,n=(0,Y.useRouter)(),i=(0,P.useState)(!1),o=i[0],a=i[1],s=(0,(0,I.yj)().useGetVisitaPosDetail)(o,{p_tipoid:null===n||void 0===n?void 0:n.query.tipoid,p_numid:null===n||void 0===n?void 0:n.query.numid,p_nombre:null===n||void 0===n?void 0:n.query.nombre}),c=s.data,d=s.isLoading;console.log(null===c||void 0===c?void 0:c.p_cursor[0]);return(0,P.useEffect)((function(){n.query&&a(!0)}),[n.isReady,n.query]),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(O.no,{icon:"bi:person",headerColor:"blue",title:"Posible Aegurado",children:[(0,r.jsx)(sn.Z,{component:"nav","aria-label":"mailbox folders",children:ti.map((function(e,i){return(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(ln.ZP,{children:(0,r.jsxs)(cn.Z,{onClick:function(){return i=e.title.toLowerCase(),void n.push({pathname:"/portal/visita/modulo_visitas",query:{codcli:null===n||void 0===n?void 0:n.query.codcli,type:i}});var i},children:[(0,r.jsx)(dn.Z,{children:(0,r.jsx)(l.Ir,{icon:e.icon})}),(0,r.jsx)(un.Z,{primary:e.title})]})}),(0,r.jsx)(pn.Z,{})]},"list_".concat(i,"_a"))}))}),(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,r.jsx)(E.Z,{onClick:function(){n.back()},variant:"contained",fullWidth:!0,children:"Regresar"}),(0,r.jsx)(pn.Z,{}),(0,r.jsx)(E.Z,{onClick:function(){n.push({pathname:"/portal/visita/modulo_visitas"})},variant:"contained",fullWidth:!0,children:"Regresar - Menu"})]})]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:8,children:"registro_nuevo"===(null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.type)&&(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsx)(l.a_,{disableBg:!0}),!d&&(null===c||void 0===c?void 0:c.p_cursor[0])&&(0,r.jsx)(si,{customer:null===c||void 0===c?void 0:c.p_cursor[0],updeteable:!0})]})})]})})}si.propTypes={customer:C().object.isRequired,updeteable:C().bool};var ai=(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,u.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));function si(e){var n=e.customer,i=e.updeteable,t="CUSTOMER",o=(0,I.mB)().setValuesForm,s=(0,(0,Ln.Z)().useUpdateVisita)(),c=s.mutate,u=s.isLoading,p=(0,(0,Ln.Z)().useGetMotivoTipVisita)({p_motivo:"MOTIVO",p_tipo_visita:n.CODVISITA}).data,h=(0,(0,Ln.Z)().useGetRefVisita)({p_codvisita:n.CODVISITA}).data,m=(0,Y.useRouter)(),f=(0,x.cI)({defaultValues:{p_tipo_visitante_CUSTOMER:"",P_cod_oficina_CUSTOMER:"",p_cod_departamento_CUSTOMER:"",p_motivo_visita_CUSTOMER:"",p_identification_type_CUSTOMER:"",p_profession_CUSTOMER:"",p_activity_CUSTOMER:"",p_edocivil_CUSTOMER:"",p_sex_CUSTOMER:"",p_country_id_CUSTOMER:"",p_state_id_CUSTOMER:"",p_city_id_CUSTOMER:"",p_municipality_id_CUSTOMER:"",p_urbanization_id_CUSTOMER:"",p_referencia_CUSTOMER:"",p_producto_CUSOMER:"",p_num_oficina_CUSTOMER:"",p_referncia_CUSTOMER:""}}),g=f.handleSubmit,j=f.formState.isSubmitting,y=f.watch;function b(){return(b=(0,d.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){return y("p_local_phone_CUSTOMER").length<11||y("p_mobile_phone_CUSTOMER").length<11?Fe.ZP.error("Los n\xfameros telef\xf3nicos deben ser de 11 d\xedgitos"):(n={p_index:t,p_json_cliente:JSON.stringify(e)},c(n,{onSuccess:function(){var e=JSON.parse(n.p_json_cliente);m.push({pathname:"/portal/visita/posAseg/VisitaRectanguloRefMot",query:{index:n.p_index,type:"registro",Oficina:e.p_cod_oficina_CUSTOMER,Departamento:e.p_cod_departamento_CUSTOMER,Referencia:e.p_cod_departamento_CUSTOMER}})},onError:function(e){return Fe.ZP.error((0,D.J4)(e.response.data))}})),[2]}))}))).apply(this,arguments)}return(0,P.useEffect)((function(){var e=n.IDENT,i=n.NUMIDE,r=n.CODCLI;o(n,t,f,e,i,r)}),[]),(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(l.a_,{noColor:!0}),(0,r.jsxs)(l.RV,{methods:f,onSubmit:g((function(e){return b.apply(this,arguments)})),children:[(0,r.jsxs)(a.Z,{spacing:3,children:[(0,r.jsx)(O.no,{title:"Referencia",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ai,{children:(0,r.jsx)(Le.fj,{index:t,objForm:f,arrayValues:null===h||void 0===h?void 0:h.p_cursor,required:!0,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Motivo de la Visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ai,{children:(0,r.jsx)(Le.NG,{index:t,objForm:f,arrayValues:null===p||void 0===p?void 0:p.p_cursor,required:!0,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Oficina de Atenci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ai,{children:(0,r.jsx)(li,{index:t,objForm:f,showOficina:!0,showDepartamento:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Identificaci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ai,{children:(0,r.jsx)(Le.c9,{index:t,arrayValues:D.IQ,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Tipo visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ai,{children:(0,r.jsx)(ii,{objForm:f,showTipoVisita:!0,showCodVisita:!0,index:t,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Datos del Asegurado",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ai,{children:(0,r.jsx)(an.Vl,{index:t,customerType:t,readonly:!1})})}),(0,r.jsx)(O.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ai,{children:(0,r.jsx)(an.wo,{index:t,readOnly:!1})})})]}),!0===i&&(0,r.jsx)(a.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:j,children:"Registrar"})})]})]})}function li(e){var n=e.objForm,i=e.showOficina,t=e.showDepartamento,o=e.index,a=(e.readOnly,e.required),s=(0,Ln.Z)(),l=s.useGetListDepartamentoRefMot,c=(0,s.useGetListOficinaRefMot)({p_motivo_oficina:n.watch("p_motivo_visita_".concat(o)),p_referencia:n.watch("p_referencia_".concat(o))}).data,d=l({p_motivo_departamento:n.watch("p_motivo_visita_".concat(o)),p_referencia:n.watch("p_referencia_".concat(o))}).data;return n.setValue("p_cod_oficina_".concat(o),null===c||void 0===c?void 0:c.p_cursor[0].VALUE),n.setValue("p_cod_departamento_".concat(o),null===d||void 0===d?void 0:d.p_cursor[0].VALUE),(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(Le.dk,{label:"Oficina",defaultValue:1,name:"p_cod_oficina_".concat(o),arrayValues:null===c||void 0===c?void 0:c.p_cursor,required:a}),t&&(0,r.jsx)(Le.dk,{label:"Departamento",defaultValue:1,name:"p_cod_departamento_".concat(o),arrayValues:null===d||void 0===d?void 0:d.p_cursor,required:a})]})}function ci(){var e=(0,P.useState)({}),n=e[0],i=e[1];return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(di,{handleParams:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(ui,{params:n})})]})})}function di(e){var n=e.handleParams,i=(0,De.useQueryClient)(),t=(0,x.cI)({mode:"onSubmit",defaultValues:{p_identification_type_0:"",p_identification_number_0:"",p_name:""}}),o=t.handleSubmit,s=t.formState.isSubmitting,c=function(){var e=(0,d.Z)((function(e){var r;return(0,_.__generator)(this,(function(t){return i.invalidateQueries("get_IntermediarioVisitas"),r={p_identification_type:e.p_identification_type_0,p_identification_number:e.p_identification_number_0,p_name:""},n(r),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(O.no,{title:"Intermediario",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(l.RV,{methods:t,onSubmit:o(c),children:(0,r.jsxs)(a.Z,{spacing:2.5,children:[(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!1}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:s,children:"Buscar"})]})})})}function ui(e){var n,i=e.params,t=(0,(0,Ln.Z)().useGetIntermediarioVisitas)(i),o=t.data,a=t.isLoading,s=(0,(0,Ln.Z)().useGetPosibleIntermediario)(i).data;console.log(null===s||void 0===s?void 0:s.p_cursor.length),console.log(null===o||void 0===o?void 0:o.p_cursor);var c=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(l.a_,{disableBg:!0}),!a&&(0,r.jsx)(ke.Z,{raise:"true",children:(null===o||void 0===o||null===(n=o.p_cursor)||void 0===n?void 0:n.length)>0?(0,r.jsx)(O.wY,{data:(null===o||void 0===o?void 0:o.p_cursor)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:"akar-icons:person"})}},{header:"C\xf3digo Intermediario",accessorKey:"CODIGO"},{header:"Identidad",accessorKey:"IDENTIDAD"},{header:"Nombre Intermediario",accessorKey:"NOMBRECOMPLE"},{header:"Estatus Intermediario",accessorKey:"STSINTER"}],onRowClick:function(e){c.push({pathname:"/portal/visita/intermediario/intermediarioRegistro",query:{codigo_inter:e.original.CODIGO,type:"registro_intermediario"}})}}):(0,r.jsx)(O.wY,{data:(null===s||void 0===s?void 0:s.p_cursor)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:"akar-icons:person"})}},{header:"Nuevo Registro",accessorKey:"REGISTRO"},{header:"Identificaci\xf3n del Intermediario",accessorKey:"POSINTER"}],onRowClick:function(e){c.push({pathname:"/portal/visita/posIntermediario/posIntermediarioRegistro",query:{tipoid:e.original.IDENT,numid:e.original.NUMIDE,div:e.original.DIV,nombre:e.original.NOMBRE,type:"registro_nuevo"}})}})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){c.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}function pi(){return(0,r.jsx)(zn.Z,{title:"Detalle Cliente",children:(0,r.jsx)(_i,{})})}li.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readOnly:C().bool,sshowOficina:C().bool,showDepartamento:C().bool},di.propTypes={handleParams:C().func.isRequired},ui.propTypes={params:C().object.isRequired},pi.getLayout=function(e){return(0,r.jsx)(Bn.i,{children:e})};var hi=[{title:"Registro",icon:"bi:card-list"}];function _i(){var e,n=(0,Y.useRouter)(),i=(0,P.useState)(!1),o=i[0],a=i[1],s=(0,(0,I.yj)().useGetIntermediarioVisitaDetail)(o,{p_codigo_inter:null===n||void 0===n?void 0:n.query.codigo_inter}),c=s.data,d=s.isLoading;return(0,P.useEffect)((function(){n.query&&a(!0)}),[n.isReady,n.query]),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(O.no,{icon:"bi:person",headerColor:"blue",title:"".concat((null===c||void 0===c?void 0:c.p_cursor[0].NOMTER)||""," ").concat((null===c||void 0===c?void 0:c.p_cursor[0].APETER)||""),children:[(0,r.jsx)(sn.Z,{component:"nav","aria-label":"mailbox folders",children:hi.map((function(e,i){return(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(ln.ZP,{children:(0,r.jsxs)(cn.Z,{onClick:function(){return i=e.title.toLowerCase(),void n.push({pathname:"/portal/visita/modulo_visitas",query:{codcli:null===n||void 0===n?void 0:n.query.codcli,type:i}});var i},children:[(0,r.jsx)(dn.Z,{children:(0,r.jsx)(l.Ir,{icon:e.icon})}),(0,r.jsx)(un.Z,{primary:e.title})]})}),(0,r.jsx)(pn.Z,{})]},"list_".concat(i,"_a"))}))}),(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,r.jsx)(E.Z,{onClick:function(){n.back()},variant:"contained",fullWidth:!0,children:"Regresar"}),(0,r.jsx)(pn.Z,{}),(0,r.jsx)(E.Z,{onClick:function(){n.push({pathname:"/portal/visita/modulo_visitas"})},variant:"contained",fullWidth:!0,children:"Regresar - Menu"})]})]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:8,children:"registro_intermediario"===(null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.type)&&(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsx)(l.a_,{disableBg:!0}),!d&&(null===c||void 0===c?void 0:c.p_cursor[0])&&(0,r.jsx)(mi,{customer:null===c||void 0===c?void 0:c.p_cursor[0],updeteable:!0})]})})]})})}mi.propTypes={customer:C().object.isRequired,updeteable:C().bool};var xi=(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,u.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));function mi(e){var n=e.customer,i=e.updeteable,t="CUSTOMER",o=n.TIPOID,s=(0,I.n5)().setValuesForm,c=(0,(0,Ln.Z)().useUpdateVisita)(),u=c.mutate,p=c.isLoading,h=(0,(0,Ln.Z)().useGetMotivoTipVisita)({p_motivo:"MOTIVO",p_tipo_visita:n.CODVISITA}).data,m=(0,Y.useRouter)(),f=(0,x.cI)({defaultValues:{p_tipo_visitante_CUSTOMER:"",P_cod_oficina_CUSTOMER:"",p_cod_departamento_CUSTOMER:"",p_intermediario_CUSTOMER:"",p_codintermediario_CUSTOMER:"",p_motivo_visita_CUSTOMER:"",p_identification_type_CUSTOMER:"",p_profession_CUSTOMER:"",p_activity_CUSTOMER:"",p_edocivil_CUSTOMER:"",p_sex_CUSTOMER:"",p_country_id_CUSTOMER:"",p_state_id_CUSTOMER:"",p_city_id_CUSTOMER:"",p_municipality_id_CUSTOMER:"",p_urbanization_id_CUSTOMER:""}}),g=f.handleSubmit,j=f.formState.isSubmitting,y=f.watch;function b(){return(b=(0,d.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){return y("p_local_phone_CUSTOMER").length<11||y("p_mobile_phone_CUSTOMER").length<11?Fe.ZP.error("Los n\xfameros telef\xf3nicos deben ser de 11 d\xedgitos"):(n={p_index:t,p_json_cliente:JSON.stringify(e)},u(n,{onSuccess:function(){var e=JSON.parse(n.p_json_cliente);m.push({pathname:"/portal/visita/VisitaRectangulo",query:{index:n.p_index,type:"registro_intermediario",Oficina:e.p_cod_oficina_CUSTOMER,Departamento:e.p_cod_departamento_CUSTOMER,Nomasesor:e.p_nomasesor_CUSTOMER}})},onError:function(e){return Fe.ZP.error((0,D.J4)(e.response.data))}})),[2]}))}))).apply(this,arguments)}return(0,P.useEffect)((function(){var e=n.NUMID,i=n.CODCLI;s(n,t,f,o,e,i)}),[]),(0,r.jsxs)(r.Fragment,{children:[p&&(0,r.jsx)(l.a_,{noColor:!0}),(0,r.jsxs)(l.RV,{methods:f,onSubmit:g((function(e){return b.apply(this,arguments)})),children:[(0,r.jsxs)(a.Z,{spacing:3,children:[(0,r.jsx)(O.no,{title:"Motivo de la Visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)(Le.NG,{index:t,objForm:f,arrayValues:null===h||void 0===h?void 0:h.p_cursor,required:!0,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Oficina de Atenci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)($n,{index:t,objForm:f,showOficina:!0,showDepartamento:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Indentificaci\xf3n del Intermediario",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)(Xn.default,{index:t,customerType:t,readonly:!0})})}),(0,r.jsx)(O.no,{title:"Identificaci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)(Le.c9,{index:t,arrayValues:D.IQ,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Tipo visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)(ii,{objForm:f,showTipoVisita:!0,showCodVisita:!0,index:t,readOnly:!0})})}),o&&"PERSONAL"===(0,D._t)(o)&&(0,r.jsx)(O.no,{title:"Datos del Intermediario",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)(an.Vl,{index:t,customerType:t,readonly:!0})})}),y("p_country_id_CUSTOMER")&&(0,r.jsx)(O.no,{title:"Direcci\xf3n",headerColor:"purple",icon:"entypo:location-pin",children:(0,r.jsx)(xi,{children:(0,r.jsx)(Le.LF,{index:t,objForm:f,showCountry:!0,showUrbanization:!0,showAddressInput:!0,showDetails:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)(an.wo,{index:t,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Asesor del Intermediario",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(xi,{children:(0,r.jsx)(bi,{objForm:f,showTipoVisita:!0,showCodVisita:!0,index:t,readOnly:!0})})})]}),!0===i&&(0,r.jsx)(a.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:j,children:"Registrar"})})]})]})}function vi(){return(0,r.jsx)(zn.Z,{title:"Detalle Cliente",children:(0,r.jsx)(gi,{})})}vi.getLayout=function(e){return(0,r.jsx)(Bn.i,{children:e})};var fi=[{title:"Nuevo Registro",icon:"bi:card-list"}];function gi(){var e,n=(0,Y.useRouter)(),i=(0,P.useState)(!1),o=i[0],a=i[1],s=(0,(0,I.yj)().useGetPosibleIntermediarioVisitaDetail)(o,{p_identification_type:null===n||void 0===n?void 0:n.query.tipoid,p_identification_number:null===n||void 0===n?void 0:n.query.numid,p_name:null===n||void 0===n?void 0:n.query.nombre}),c=s.data,d=s.isLoading;console.log(c);return(0,P.useEffect)((function(){n.query&&a(!0)}),[n.isReady,n.query]),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(O.no,{icon:"bi:person",headerColor:"blue",title:"Posible Intermediario",children:[(0,r.jsx)(sn.Z,{component:"nav","aria-label":"mailbox folders",children:fi.map((function(e,i){return(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(ln.ZP,{children:(0,r.jsxs)(cn.Z,{onClick:function(){return i=e.title.toLowerCase(),void n.push({pathname:"/portal/visita/modulo_visitas",query:{codcli:null===n||void 0===n?void 0:n.query.codcli,type:i}});var i},children:[(0,r.jsx)(dn.Z,{children:(0,r.jsx)(l.Ir,{icon:e.icon})}),(0,r.jsx)(un.Z,{primary:e.title})]})}),(0,r.jsx)(pn.Z,{})]},"list_".concat(i,"_a"))}))}),(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,r.jsx)(E.Z,{onClick:function(){n.back()},variant:"contained",fullWidth:!0,children:"Regresar"}),(0,r.jsx)(pn.Z,{}),(0,r.jsx)(E.Z,{onClick:function(){n.push({pathname:"/portal/visita/modulo_visitas"})},variant:"contained",fullWidth:!0,children:"Regresar - Menu"})]})]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:8,children:"registro_nuevo"===(null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.type)&&(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsx)(l.a_,{disableBg:!0}),!d&&(null===c||void 0===c?void 0:c.p_cursor[0])&&(0,r.jsx)(yi,{customer:null===c||void 0===c?void 0:c.p_cursor[0],updeteable:!0})]})})]})})}yi.propTypes={customer:C().object.isRequired,updeteable:C().bool};var ji=(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,u.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));function yi(e){var n=e.customer,i=e.updeteable,t="CUSTOMER",o=(0,I.mB)().setValuesForm,s=(0,(0,Ln.Z)().useUpdateVisita)(),c=s.mutate,u=s.isLoading,p=(0,(0,Ln.Z)().useGetMotivoTipVisita)({p_motivo:"MOTIVO",p_tipo_visita:n.CODVISITA}).data;console.log(n.CODVISITA);var h=(0,Y.useRouter)(),m=(0,x.cI)({defaultValues:{p_tipo_visitante_CUSTOMER:"",P_cod_oficina_CUSTOMER:"",p_cod_departamento_CUSTOMER:"",p_motivo_visita_CUSTOMER:"",p_identification_type_CUSTOMER:"",p_profession_CUSTOMER:"",p_activity_CUSTOMER:"",p_edocivil_CUSTOMER:"",p_sex_CUSTOMER:"",p_country_id_CUSTOMER:"",p_state_id_CUSTOMER:"",p_city_id_CUSTOMER:"",p_municipality_id_CUSTOMER:"",p_urbanization_id_CUSTOMER:"",p_referencia_CUSTOMER:"",p_producto_CUSOMER:"",p_num_oficina_CUSTOMER:"",p_referncia_CUSTOMER:""}}),f=m.handleSubmit,g=m.formState.isSubmitting,j=m.watch;function y(){return(y=(0,d.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){return j("p_local_phone_CUSTOMER").length<11||j("p_mobile_phone_CUSTOMER").length<11?Fe.ZP.error("Los n\xfameros telef\xf3nicos deben ser de 11 d\xedgitos"):(n={p_index:t,p_json_cliente:JSON.stringify(e)},c(n,{onSuccess:function(){var e=JSON.parse(n.p_json_cliente);h.push({pathname:"/portal/visita/VisitaRectangulo",query:{index:n.p_index,type:"registro",Oficina:e.p_cod_oficina_CUSTOMER,Departamento:e.p_cod_departamento_CUSTOMER}})},onError:function(e){return Fe.ZP.error((0,D.J4)(e.response.data))}})),[2]}))}))).apply(this,arguments)}return(0,P.useEffect)((function(){var e=n.IDENT,i=n.NUMIDE,r=n.CODCLI;o(n,t,m,e,i,r)}),[]),(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(l.a_,{noColor:!0}),(0,r.jsxs)(l.RV,{methods:m,onSubmit:f((function(e){return y.apply(this,arguments)})),children:[(0,r.jsxs)(a.Z,{spacing:3,children:[(0,r.jsx)(O.no,{title:"Motivo de la Visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ji,{children:(0,r.jsx)(Le.NG,{index:t,objForm:m,arrayValues:null===p||void 0===p?void 0:p.p_cursor,required:!0,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Oficina de Atenci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ji,{children:(0,r.jsx)($n,{index:t,objForm:m,showOficina:!0,showDepartamento:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Identificaci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ji,{children:(0,r.jsx)(Le.c9,{index:t,arrayValues:D.IQ,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Tipo visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ji,{children:(0,r.jsx)(ii,{objForm:m,showTipoVisita:!0,showCodVisita:!0,index:t,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Datos del Intermediario",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ji,{children:(0,r.jsx)(an.Vl,{index:t,customerType:t,readonly:!1})})}),(0,r.jsx)(O.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(ji,{children:(0,r.jsx)(an.wo,{index:t,readOnly:!1})})})]}),!0===i&&(0,r.jsx)(a.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:g,children:"Registrar"})})]})]})}function bi(e){e.objForm;var n=e.showTipoVisita,i=e.showCodVisita,t=e.index;e.readonly,e.required;return(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(Le.be,{label:"Codigo Asesor",name:"p_codasesor_".concat(t),readOnly:!0,disabled:!0,required:!0}),n&&(0,r.jsx)(Le.be,{label:"Nombre Asesor",name:"p_nomasesor_".concat(t),readOnly:!0,disabled:!0,required:!0})]})}function Ci(){var e=(0,P.useState)({}),n=e[0],i=e[1];return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(Zi,{handleParams:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(Oi,{params:n})})]})})}function Zi(e){var n=e.handleParams,i=(0,De.useQueryClient)(),t=(0,x.cI)({mode:"onSubmit",defaultValues:{p_identification_type_0:"",p_identification_number_0:""}}),o=t.handleSubmit,s=t.formState.isSubmitting,c=function(){var e=(0,d.Z)((function(e){var r;return(0,_.__generator)(this,(function(t){return i.invalidateQueries("get_ExternoVisitas"),r={p_identification_type:e.p_identification_type_0,p_identification_number:e.p_identification_number_0},n(r),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(O.no,{title:"Externos",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(l.RV,{methods:t,onSubmit:o(c),children:(0,r.jsxs)(a.Z,{spacing:2.5,children:[(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!1}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:s,children:"Buscar"})]})})})}function Oi(e){var n=e.params,i=(0,(0,Ln.Z)().useGetExternosVisitas)(n),t=i.data,o=i.isLoading,a=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(O.wY,{data:(null===t||void 0===t?void 0:t.p_cursor)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:"akar-icons:person"})}},{header:"Nuevo Registro",accessorKey:"REGISTRO"},{header:"Identificaci\xf3n del Proveedor/Mensajero/Perito Exter",accessorKey:"POSINTER"}],onRowClick:function(e){console.log(e.original.NUMIDE),console.log(e.original.DIV),a.push({pathname:"/portal/visita/externos/ExternoRegistro",query:{tipoid:e.original.IDENT,numid:e.original.NUMIDE,div:e.original.DIV,type:"registro_nuevo"}})}})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){a.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}function Ri(){return(0,r.jsx)(zn.Z,{title:"Detalle Cliente",children:(0,r.jsx)(Ei,{})})}bi.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readonly:C().bool,showProducto:C().bool,showPoliza:C().bool,showOficina:C().bool,showIdepol:C().bool,showCert:C().bool},Zi.propTypes={handleParams:C().func.isRequired},Oi.propTypes={params:C().object.isRequired},Ri.getLayout=function(e){return(0,r.jsx)(Bn.i,{children:e})};var Si=[{title:"Nuevo Registro",icon:"bi:card-list"}];function Ei(){var e,n=(0,Y.useRouter)(),i=(0,P.useState)(!1),o=i[0],a=i[1],s=(0,(0,I.yj)().useGetVisitaExternoDetail)(o,{p_identification_type:null===n||void 0===n?void 0:n.query.tipoid,p_identification_number:null===n||void 0===n?void 0:n.query.numid}),c=s.data,d=s.isLoading;console.log(null===n||void 0===n?void 0:n.query.tipoid),console.log(null===n||void 0===n?void 0:n.query.numid),console.log(null===c||void 0===c?void 0:c.p_cursor[0]);return(0,P.useEffect)((function(){n.query&&a(!0)}),[n.isReady,n.query]),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(O.no,{icon:"bi:person",headerColor:"blue",title:"Externo",children:[(0,r.jsx)(sn.Z,{component:"nav","aria-label":"mailbox folders",children:Si.map((function(e,i){return(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(ln.ZP,{children:(0,r.jsxs)(cn.Z,{onClick:function(){return i=e.title.toLowerCase(),void n.push({pathname:"/portal/visita/modulo_visitas",query:{codcli:null===n||void 0===n?void 0:n.query.codcli,type:i}});var i},children:[(0,r.jsx)(dn.Z,{children:(0,r.jsx)(l.Ir,{icon:e.icon})}),(0,r.jsx)(un.Z,{primary:e.title})]})}),(0,r.jsx)(pn.Z,{})]},"list_".concat(i,"_a"))}))}),(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,r.jsx)(E.Z,{onClick:function(){n.back()},variant:"contained",fullWidth:!0,children:"Regresar"}),(0,r.jsx)(pn.Z,{}),(0,r.jsx)(E.Z,{onClick:function(){n.push({pathname:"/portal/visita/modulo_visitas"})},variant:"contained",fullWidth:!0,children:"Regresar - Menu"})]})]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:8,children:"registro_nuevo"===(null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.type)&&(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsx)(l.a_,{disableBg:!0}),!d&&(null===c||void 0===c?void 0:c.p_cursor[0])&&(0,r.jsx)(Ti,{customer:null===c||void 0===c?void 0:c.p_cursor[0],updeteable:!0})]})})]})})}Ti.propTypes={customer:C().object.isRequired,updeteable:C().bool};var Pi=(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,u.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));function Ti(e){var n=e.customer,i=e.updeteable,t="CUSTOMER",o=(0,I.mB)().setValuesForm,s=(0,(0,Ln.Z)().useUpdateVisita)(),c=s.mutate,u=s.isLoading,p=(0,(0,Ln.Z)().useGetTipVisitaTypeVisita)({p_tipo:"EXTERNO"}).data,h=(0,Y.useRouter)(),m=(0,x.cI)({defaultValues:{p_tipo_visitante_CUSTOMER:"",P_cod_oficina_CUSTOMER:"",p_cod_departamento_CUSTOMER:"",p_motivo_visita_CUSTOMER:"",p_identification_type_CUSTOMER:"",p_profession_CUSTOMER:"",p_activity_CUSTOMER:"",p_edocivil_CUSTOMER:"",p_sex_CUSTOMER:"",p_country_id_CUSTOMER:"",p_state_id_CUSTOMER:"",p_city_id_CUSTOMER:"",p_municipality_id_CUSTOMER:"",p_urbanization_id_CUSTOMER:"",p_referencia_CUSTOMER:"",p_producto_CUSOMER:"",p_num_oficina_CUSTOMER:"",p_referncia_CUSTOMER:""}}),f=m.handleSubmit,g=m.formState.isSubmitting,j=m.watch;function y(){return(y=(0,d.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){return j("p_local_phone_CUSTOMER").length<11||j("p_mobile_phone_CUSTOMER").length<11?Fe.ZP.error("Los n\xfameros telef\xf3nicos deben ser de 11 d\xedgitos"):(n={p_index:t,p_json_cliente:JSON.stringify(e)},c(n,{onSuccess:function(){var e=JSON.parse(n.p_json_cliente);h.push({pathname:"/portal/visita/VisitaRectangulo",query:{index:n.p_index,type:"registro",Oficina:e.p_cod_oficina_CUSTOMER,Departamento:e.p_cod_departamento_CUSTOMER}})},onError:function(e){return Fe.ZP.error((0,D.J4)(e.response.data))}})),[2]}))}))).apply(this,arguments)}return(0,P.useEffect)((function(){var e=n.IDENT,i=n.NUMIDE,r=n.CODCLI;o(n,t,m,e,i,r)}),[]),(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(l.a_,{noColor:!0}),(0,r.jsxs)(l.RV,{methods:m,onSubmit:f((function(e){return y.apply(this,arguments)})),children:[(0,r.jsxs)(a.Z,{spacing:3,children:[(0,r.jsx)(O.no,{title:"Tipo visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Pi,{children:(0,r.jsx)(Ii,{objForm:m,showTipoVisita:!0,index:t,arrayValues:null===p||void 0===p?void 0:p.p_cursor,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Motivo de la Visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Pi,{children:(0,r.jsx)(Le.EL,{index:t,objForm:m,required:!0,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Oficina de Atenci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Pi,{children:(0,r.jsx)(Li,{index:t,objForm:m,showOficina:!0,showDepartamento:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Identificaci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Pi,{children:(0,r.jsx)(Le.c9,{index:t,arrayValues:D.IQ,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Datos del Externo",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Pi,{children:(0,r.jsx)(an.Vl,{index:t,customerType:t,readonly:!1})})}),(0,r.jsx)(O.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Pi,{children:(0,r.jsx)(an.wo,{index:t,readOnly:!1})})})]}),!0===i&&(0,r.jsx)(a.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:g,children:"Registrar"})})]})]})}function Ii(e){e.objForm;var n=e.showTipoVisita,i=e.index,t=e.arrayValues,o=e.required;e.readOnly;return(0,r.jsx)(r.Fragment,{children:n&&(0,r.jsx)(Le.dk,{label:"Tipo de Visita",name:"p_tipo_visitante_".concat(i),arrayValues:t,required:o})})}function Di(){var e=(0,P.useState)({}),n=e[0],i=e[1];return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(wi,{handleParams:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(Mi,{params:n})})]})})}function wi(e){var n=e.handleParams,i=(0,De.useQueryClient)(),t=(0,x.cI)({mode:"onSubmit",defaultValues:{p_identification_type_0:"",p_identification_number_0:""}}),o=t.handleSubmit,s=t.formState.isSubmitting,c=function(){var e=(0,d.Z)((function(e){var r;return(0,_.__generator)(this,(function(t){return i.invalidateQueries("get_PautadosVisitas"),r={p_identification_type:e.p_identification_type_0,p_identification_number:e.p_identification_number_0},n(r),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(O.no,{title:"Visitas/Entrevistas",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(l.RV,{methods:t,onSubmit:o(c),children:(0,r.jsxs)(a.Z,{spacing:2.5,children:[(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!1}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:s,children:"Buscar"})]})})})}function Mi(e){var n=e.params,i=(0,(0,Ln.Z)().useGetPautadosVisitas)(n),t=i.data,o=i.isLoading,a=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(O.wY,{data:(null===t||void 0===t?void 0:t.p_cursor)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:"akar-icons:person"})}},{header:"Nuevo Registro",accessorKey:"REGISTRO"},{header:"VIsitas/Entrevistas",accessorKey:"POSINTER"}],onRowClick:function(e){a.push({pathname:"/portal/visita/pautados/PautadosRegistro",query:{tipoid:e.original.IDENT,numid:e.original.NUMIDE,div:e.original.DIV,type:"registro_nuevo"}})}})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){a.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}function Ai(){return(0,r.jsx)(zn.Z,{title:"Detalle Cliente",children:(0,r.jsx)(Fi,{})})}Ii.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readonly:C().bool,showProducto:C().bool,showPoliza:C().bool,showOficina:C().bool,showIdepol:C().bool,showCert:C().bool},wi.propTypes={handleParams:C().func.isRequired},Mi.propTypes={params:C().object.isRequired},Ai.getLayout=function(e){return(0,r.jsx)(Bn.i,{children:e})};var Ni=[{title:"Nuevo Registro",icon:"bi:card-list"}];function Fi(){var e,n=(0,Y.useRouter)(),i=(0,P.useState)(!1),o=i[0],a=i[1],s=(0,(0,I.yj)().useGetVisitaPautadosDetail)(o,{p_identification_type:null===n||void 0===n?void 0:n.query.tipoid,p_identification_number:null===n||void 0===n?void 0:n.query.numid}),c=s.data,d=s.isLoading;console.log(null===n||void 0===n?void 0:n.query.tipoid),console.log(null===n||void 0===n?void 0:n.query.numid),console.log(null===c||void 0===c?void 0:c.p_cursor[0]);return(0,P.useEffect)((function(){n.query&&a(!0)}),[n.isReady,n.query]),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(O.no,{icon:"bi:person",headerColor:"blue",title:"Visitas/Entrevistas",children:[(0,r.jsx)(sn.Z,{component:"nav","aria-label":"mailbox folders",children:Ni.map((function(e,i){return(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(ln.ZP,{children:(0,r.jsxs)(cn.Z,{onClick:function(){return i=e.title.toLowerCase(),void n.push({pathname:"/portal/visita/modulo_visitas",query:{codcli:null===n||void 0===n?void 0:n.query.codcli,type:i}});var i},children:[(0,r.jsx)(dn.Z,{children:(0,r.jsx)(l.Ir,{icon:e.icon})}),(0,r.jsx)(un.Z,{primary:e.title})]})}),(0,r.jsx)(pn.Z,{})]},"list_".concat(i,"_a"))}))}),(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,r.jsx)(E.Z,{onClick:function(){n.back()},variant:"contained",fullWidth:!0,children:"Regresar"}),(0,r.jsx)(pn.Z,{}),(0,r.jsx)(E.Z,{onClick:function(){n.push({pathname:"/portal/visita/modulo_visitas"})},variant:"contained",fullWidth:!0,children:"Regresar - Menu"})]})]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:8,children:"registro_nuevo"===(null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.type)&&(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsx)(l.a_,{disableBg:!0}),!d&&(null===c||void 0===c?void 0:c.p_cursor[0])&&(0,r.jsx)(qi,{customer:null===c||void 0===c?void 0:c.p_cursor[0],updeteable:!0})]})})]})})}qi.propTypes={customer:C().object.isRequired,updeteable:C().bool};var Vi=(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,u.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));function qi(e){var n=e.customer,i=e.updeteable,t="CUSTOMER",o=(0,I.mB)().setValuesForm,s=(0,(0,Ln.Z)().useUpdateVisita)(),c=s.mutate,u=s.isLoading,p=(0,(0,Ln.Z)().useGetTipVisitaTypeVisita)({p_tipo:"PAUTADOS"}).data,h=(0,Y.useRouter)(),m=(0,x.cI)({defaultValues:{p_tipo_visitante_CUSTOMER:"",P_cod_oficina_CUSTOMER:"",p_cod_departamento_CUSTOMER:"",p_motivo_visita_CUSTOMER:"",p_identification_type_CUSTOMER:"",p_profession_CUSTOMER:"",p_activity_CUSTOMER:"",p_edocivil_CUSTOMER:"",p_sex_CUSTOMER:"",p_country_id_CUSTOMER:"",p_state_id_CUSTOMER:"",p_city_id_CUSTOMER:"",p_municipality_id_CUSTOMER:"",p_urbanization_id_CUSTOMER:"",p_referencia_CUSTOMER:"",p_producto_CUSOMER:"",p_num_oficina_CUSTOMER:"",p_referncia_CUSTOMER:""}}),f=m.handleSubmit,g=m.formState.isSubmitting,j=m.watch;function y(){return(y=(0,d.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){return j("p_local_phone_CUSTOMER").length<11||j("p_mobile_phone_CUSTOMER").length<11?Fe.ZP.error("Los n\xfameros telef\xf3nicos deben ser de 11 d\xedgitos"):(n={p_index:t,p_json_cliente:JSON.stringify(e)},c(n,{onSuccess:function(){var e=JSON.parse(n.p_json_cliente);h.push({pathname:"/portal/visita/VisitaRectangulo",query:{index:n.p_index,type:"registro",Oficina:e.p_cod_oficina_CUSTOMER,Departamento:e.p_cod_departamento_CUSTOMER}})},onError:function(e){return Fe.ZP.error((0,D.J4)(e.response.data))}})),[2]}))}))).apply(this,arguments)}return(0,P.useEffect)((function(){var e=n.IDENT,i=n.NUMIDE,r=n.CODCLI;o(n,t,m,e,i,r)}),[]),(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(l.a_,{noColor:!0}),(0,r.jsxs)(l.RV,{methods:m,onSubmit:f((function(e){return y.apply(this,arguments)})),children:[(0,r.jsxs)(a.Z,{spacing:3,children:[(0,r.jsx)(O.no,{title:"Tipo visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Vi,{children:(0,r.jsx)(Ii,{objForm:m,showTipoVisita:!0,index:t,arrayValues:null===p||void 0===p?void 0:p.p_cursor,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Motivo de la Visita",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Vi,{children:(0,r.jsx)(Le.EL,{index:t,objForm:m,required:!0,readOnly:!1})})}),(0,r.jsx)(O.no,{title:"Oficina de Atenci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Vi,{children:(0,r.jsx)(Li,{index:t,objForm:m,showOficina:!0,showDepartamento:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Identificaci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Vi,{children:(0,r.jsx)(Le.c9,{index:t,arrayValues:D.IQ,required:!0,readOnly:!0})})}),(0,r.jsx)(O.no,{title:"Datos del Externo",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Vi,{children:(0,r.jsx)(an.Vl,{index:t,customerType:t,readonly:!1})})}),(0,r.jsx)(O.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(Vi,{children:(0,r.jsx)(an.wo,{index:t,readOnly:!1})})})]}),!0===i&&(0,r.jsx)(a.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:g,children:"Registrar"})})]})]})}function Li(e){var n=e.objForm,i=e.showOficina,t=e.showDepartamento,o=e.index,a=(e.readOnly,e.required),s=(0,Ln.Z)(),l=s.useGetListOficina,c=s.useGetListDepartamento,d=l({p_motivo_oficina:n.watch("p_motivo_visita_".concat(o))}).data,u=c({p_motivo_departamento:n.watch("p_motivo_visita_".concat(o)),p_codvisita:n.watch("p_tipo_visitante_".concat(o))}).data;return n.setValue("p_cod_oficina_".concat(o),null===d||void 0===d?void 0:d.p_cursor[0].VALUE),n.setValue("p_cod_departamento_".concat(o),null===u||void 0===u?void 0:u.p_cursor[0].VALUE),(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(Le.dk,{label:"Oficina",defaultValue:1,name:"p_cod_oficina_".concat(o),arrayValues:null===d||void 0===d?void 0:d.p_cursor,required:a}),t&&(0,r.jsx)(Le.dk,{label:"Departamento",defaultValue:1,name:"p_cod_departamento_".concat(o),arrayValues:null===u||void 0===u?void 0:u.p_cursor,required:a})]})}Li.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readOnly:C().bool,sshowOficina:C().bool,showDepartamento:C().bool},C().string.isRequired,C().string;(0,m.ZP)(Z.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,u.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));var Ui=i(34346);function ki(e){var n=e.handleParams,i=((0,De.useQueryClient)(),(0,x.cI)({mode:"onSubmit",defaultValues:{p_proceso_sistema:"",p_grupo_sistema_sistema:""}})),t=i.handleSubmit,o=i.formState.isSubmitting,s=(i.watch,(0,(0,Ui.Z)().useGetProcesoSistema)({}).data),c=function(){var e=(0,d.Z)((function(e){var i;return(0,_.__generator)(this,(function(r){return console.log(e.p_grupo_sistema_sistema),i={p_grupo_sistema_sistema:e.p_grupo_sistema_sistema},n(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(O.no,{title:"Procesos y Grupos",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(l.RV,{methods:i,onSubmit:t(c),children:(0,r.jsxs)(a.Z,{spacing:2.5,children:[(0,r.jsx)(Le.Gc,{index:"sistema",objForm:i,arrayValues:null===s||void 0===s?void 0:s.result,required:!0,readOnly:!1}),(0,r.jsx)(Le.aM,{index:"sistema",objForm:i,required:!0,readOnly:!1}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:o,children:"Buscar"})]})})})}function Gi(e){var n=e.params,i=(0,(0,Ui.Z)().useGetGrupoSistemaAsig)(n),t=i.data,o=i.isLoading;console.log(t);var a=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(O.wY,{data:(null===t||void 0===t?void 0:t.result)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:"akar-icons:person"})}},{header:"Cantidad",accessorKey:"CONT"},{header:"Id del Usuario",accessorKey:"USERID"},{header:"Nombre Completo",accessorKey:"FULL_NAME"}]})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){a.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}function Ki(){var e=(0,P.useState)({}),n=e[0],i=e[1];return(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:4,children:(0,r.jsx)(ki,{handleParams:i})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(Gi,{params:n})})]})})}ki.propTypes={handleParams:C().func.isRequired},Gi.propTypes={params:C().object.isRequired};var Bi=(0,Ce.Z)(o.Z)((function(e){return{padding:e.theme.spacing(.75)}}));function zi(e){var n=e.data;return console.log("ver"),console.log(n),console.log("ver 2"),console.log(n.NIDENTIF),(0,r.jsxs)(O.no,{title:n.CNOMBRECLIENTE,icon:"ic:baseline-perm-identity",iconColor:"primary",children:[(0,r.jsxs)(Bi,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Identificaci\xf3n: "})," ",n.NIDENTIF]}),(0,r.jsxs)(Bi,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Edad del paciente: "})," ",n.NEDAD]}),(0,r.jsxs)(Bi,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Sexo:"})," ",n.DESCSEXO]}),(0,r.jsxs)(Bi,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Nombre del titular: "})," ",n.CNOMBRECLIENTE]}),(0,r.jsxs)(Bi,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Tel\xe9fono:"})," ",n.TTELEF]}),(0,r.jsxs)(Bi,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Correo:"})," ",n.TEMAIL]})]})}zi.propTypes={data:C().object};var Wi={getAseguradoViajeSalud:function(e){var n=e.p_cocli;return"dbo/ViajeSalud/get_AseguradoViajeSalud/?ccodinter=&cideaseg=".concat(n,"&nidevoucher=",null)},getAseguradoDatos:function(e){var n=e.p_cocli;return"dbo/ViajeSalud/get_AseguradoDatos/?cCodCli=".concat(n)},getPaisOrigViaje:function(){return"dbo/ViajeSalud/get_PaisOrigViaje/?cCodPais=".concat(null)},getPaisDestViaje:function(e){var n=e.p_pais_dest;return"dbo/ViajeSalud/get_PaisDestViaje/?cCodPais=".concat(n)},getProveedor:"dbo/ViajeSalud/get_Proveedor/",getDiasviaje:function(e){var n=e.p_fecha_ini_viaje,i=e.p_fecha_hasta_viaje;return"dbo/ViajeSalud/get_diasviaje/?dFecIni=".concat(n,"&dFecFin=").concat(i)},getAsegViaje:function(e){var n=e.p_idepol,i=e.p_codcli;return"dbo/ViajeSalud/get_AsegViaje/?nIdePol=".concat(n,"&ccodcli=").concat(i,"&nIdeVoucher=",null)},getChk:function(e){var n=e.p_ideaseg,i=e.p_idecobert,r=e.p_pasaporte,t=e.p_chek;return"dbo/ViajeSalud/get_Chk/?nIdeaseg=".concat(n,"&nIdeCobert=").concat(i,"&cNumPasaporte=").concat(r,"&nIndIncluir=").concat(t)},getvaucher:function(e){var n=e.p_idepol,i=e.p_fecha_ini,r=e.p_fecha_fin,t=e.p_paisOri,o=e.p_paisDest,a=e.p_coproveedor;return"dbo/ViajeSalud/get_vaucher/?nIdePol=".concat(n,"&dFecIni=").concat(i,"&dFecRetorno=").concat(r,"&cPaisorig=").concat(t,"&cPaisDest=").concat(o,"&CProveedor=").concat(a)},getReqViajesalud:function(e){var n=e.p_idevaucher;return"dbo/ViajeSalud/get_ReqViajesalud/?p_idvaucher=".concat(n)},getAseguradoViajeSaludInter:function(e){var n=e.p_codinter,i=e.p_cocli;return"dbo/ViajeSalud/get_AseguradoViajeSalud/?ccodinter=".concat(n,"&cideaseg=").concat(i,"&nidevoucher=",null)},getAseguradoViajeSaludCoorp:function(e){var n=e.p_cocli;return"dbo/ViajeSalud/get_AseguradoViajeSalud/?ccodinter=&cideaseg=".concat(n,"&nidevoucher=",null)}};function Qi(){var e=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return console.log(e),[4,Ie.Z.get(Wi.getAseguradoViajeSalud(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(Wi.getAseguradoDatos(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(Wi.getPaisOrigViaje(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),r=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return console.log("useGetPaisDestViaje2"),[4,Ie.Z.get(Wi.getPaisDestViaje(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),t=function(){var e=(0,d.Z)((function(){return(0,_.__generator)(this,(function(e){switch(e.label){case 0:return console.log("paso por useGetProveedor2"),[4,Ie.Z.get(Wi.getProveedor)];case 1:return[2,e.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return console.log("useGetdiasviaje2"),[4,Ie.Z.get(Wi.getDiasviaje(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),a=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(Wi.getAsegViaje(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(Wi.getChk(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(Wi.getvaucher(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(Wi.getReqViajesalud(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return console.log(e),[4,Ie.Z.get(Wi.getAseguradoViajeSaludInter(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return console.log(e),[4,Ie.Z.get(Wi.getAseguradoViajeSaludCoorp(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}();return{useGetAseguradoViajeSalud:function(n){console.log(n);var i=n.p_cocli;return(0,De.useQuery)(["get_AseguradoViajeSalud",n],(function(){return e(n)}),{enabled:!!i})},useGetAseguradoDatos:function(e){console.log(e);var i=e.p_cocli;return(0,De.useQuery)(["get_AseguradoDatos",e],(function(){return n(e)}),{enabled:!!i})},useGetPaisOrigViaje:function(e){console.log(e);var n=e.p_pais_orig;return(0,De.useQuery)(["get_PaisOrigViaje",e],(function(){return i(e)}),{enabled:!!n})},useGetPaisDestViaje:function(e){console.log("useGetPaisDestViaje"),console.log(e);var n=e.p_pais_dest;return(0,De.useQuery)(["get_PaisDestViaje",e],(function(){return r(e)}),{enabled:!!n})},useGetProveedor:function(){return console.log("paso por useGetProveedor"),(0,De.useQuery)(["get_Proveedor"],(function(){return t()}))},useGetdiasviaje:function(e){return console.log("useGetdiasviaje"),console.log(e),(0,De.useQuery)(["get_Diasviaje",e],(function(){return o(e)}),{enabled:!(!e.p_fecha_ini_viaje||!e.p_fecha_hasta_viaje)})},useGetAsegViaje:function(e){return console.log("useGetAsegViaje"),console.log(e),(0,De.useQuery)(["get_AsegViaje",e],(function(){return a(e)}),{enabled:!(!e.p_idepol||!e.p_codcli)})},useGetChk:function(e){return console.log("useGetAsegViaje"),console.log(e),(0,De.useQuery)(["get_Chk(",e],(function(){return s(e)}),{enabled:!!(e.p_ideaseg&&e.p_idecobert&&e.p_pasaporte&&e.p_chek)})},useGetvaucher:function(e){return(0,De.useQuery)(["get_vaucher(",e],(function(){return l(e)}),{enabled:!!(e.p_idepol&&e.p_fecha_ini&&e.p_fecha_fin&&e.p_paisOri&&e.p_paisDest&&e.p_coproveedor)})},useGetReqViajeSalud:function(e){return console.log("paso por useGetReqViajeSalud"),console.log(e),(0,De.useQuery)(["get_ReqViajesalud(",e],(function(){return c(e)}),{enabled:!!e.p_idevaucher})},useGetAseguradoViajeSaludInter:function(e){console.log(e);var n=e.p_cocli;return(0,De.useQuery)(["get_AseguradoViajeSaludInter",e],(function(){return u(e)}),{enabled:!!n})},useGetAseguradoViajeSaludCoorp:function(e){console.log(e);var n=e.p_cocli;return(0,De.useQuery)(["get_AseguradoViajeSaludCoorp",e],(function(){return p(e)}),{enabled:!!n})}}}function Yi(){var e=(0,Ze.Ai)();console.log(e.p_client_code);var n=(0,Qi().useGetAseguradoDatos)({p_cocli:e.p_client_code}),i=n.data,o=n.isLoading;console.log(i);return(0,r.jsxs)(t.Z,{maxWidth:"xl",children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:4,md:4,lg:4,children:null!==i.cr_datos_cli&&(0,r.jsx)(zi,{data:i.cr_datos_cli[0]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(Hi,{params:e.p_client_code})})]})]})}function Hi(e){var n=e.params;console.log("ver que valor tiene params"),console.log(n);var i=(0,Qi().useGetAseguradoViajeSalud)({p_cocli:n}),t=i.data,o=i.isLoading,a=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(O.wY,{data:(null===t||void 0===t?void 0:t.cr_polizas)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){var n,i,t,o,a,s;return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original.ICONOPROD)?null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.ICONOPROD:"healthicons:no-outline",sx:{backgroundColor:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original.COLORPROD)?null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original.COLORPROD:"#DFE3E8","&:hover":{backgroundColor:(0,Ge._j)((null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original.COLORPROD)?null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.original.COLORPROD:"#DFE3E8",.45)}}})}},{header:"IDEPOL",accessorKey:"IDEPOL"},{header:"NUMPOLIZA",accessorKey:"NUMPOLIZA"},{header:"FECEMI",accessorKey:"FECEMI"},{header:"FECFINVIG",accessorKey:"FECFINVIG"},{header:"NOMAPECLI",accessorKey:"NOMAPECLI"},{header:"STSPOL",accessorKey:"STSPOL"}],onRowClick:function(e){a.push({pathname:"/portal/viaje_salud/SolicitudReqAsegurado",query:{codcli:n,idepol:e.original.IDEPOL,numpol:e.original.NUMPOLIZA,fecemi:e.original.FECEMI,fecfinvig:e.original.FECFINVIG,nomapecli:e.original.NOMAPECLI,stspol:e.original.STSPOL,type:"registro"}})}})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){a.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}function Ji(){var e=(0,Y.useRouter)();console.log("aseguradoregviaje"),console.log(null===e||void 0===e?void 0:e.query.codcli);var n=(0,Qi().useGetAseguradoDatos)({p_cocli:null===e||void 0===e?void 0:e.query.codcli}),i=n.data,o=n.isLoading;return(0,r.jsxs)(t.Z,{maxWidth:"xl",children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:null!==i.cr_datos_cli&&(0,r.jsx)(zi,{data:i.cr_datos_cli[0]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(er,{customer:null===e||void 0===e?void 0:e.query,updeteable:!0})})]})]})}Hi.propTypes={params:C().object.isRequired};var Xi=i(19675),$i=(0,m.ZP)(Z.Z)((function(e){return{"& .MuiTextField-root":{margin:e.theme.spacing(1)}}}));new Date;function er(e){new Date;var n=(0,Y.useRouter)(),i=(0,P.useState)(),t=i[0],o=i[1],s=(0,P.useState)(),c=s[0],u=s[1],p=(0,P.useState)(),h=p[0],m=p[1],f=(0,P.useState)(),g=f[0],j=f[1],y=(0,P.useState)(),b=y[0],C=y[1],Z=(0,P.useState)(!1),R=Z[0],S=Z[1],E=(0,P.useState)("nuevo"),T=E[0],D=E[1],w=(0,P.useState)(),M=w[0],A=w[1],N=(e.customer,e.updeteable),F=(0,(0,Xi.Z)().useFindParameters)(),V=F.data,q=F.isLoading,L=(0,P.useState)([]),U=(L[0],L[1]),k=(0,P.useState)(!1),G=(k[0],k[1],(0,I.Fs)("up","lg"),Qi()),K=G.useGetPaisOrigViaje,B=G.useGetProveedor,z=G.useGetAsegViaje,W=G.useGetvaucher,Q=K({p_pais_orig:"null"}).data,H=B().data;(0,P.useEffect)((function(){console.log("ver ojo"),console.log(X),V&&J(),"si"===T?(Fe.ZP.success("El numero del Vaucher es: "+se),n.push({pathname:"/portal/viaje_salud/SolicitudRequisitosViajes",query:{p_voucher:se,type:"registro"}})):"no"===T&&Fe.ZP.error(ae),D("nuevo"),S(!0)}),[V,T]);var J=function(){var e=V.result,n=[],i=!0,r=!1,t=void 0;try{for(var o,a=function(){var e=o.value;if(e.values){var i=e.values.map((function(n){return{COLUMN_NAME:e.column_name,T_VALUE:n.value,VALUE:"".concat(e.column_name,"**").concat(n.value),NAME:"".concat(e.label,": ").concat(n.description)}}));n=(0,xe.Z)(n).concat((0,xe.Z)(i))}},s=e.parametros[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)a()}catch(c){r=!0,t=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw t}}var l=[];n.forEach((function(e){-1===l.findIndex((function(n){return n.NAME===e.NAME}))&&l.push(e)})),U((0,xe.Z)(l))},X=(z({p_idepol:n.query.idepol}).data,(0,x.cI)({defaultValues:{p_origen_viaje:"",p_proveedor:""}})),$=X.handleSubmit,ee=X.trigger,ne=X.getValues,ie=X.watch,re=(X.setValue,X.formState.isSubmitting);console.log("prueba");var te=W({p_idepol:t,p_fecha_ini:c,p_fecha_fin:h,p_paisOri:g,p_paisDest:b,p_coproveedor:M}),oe=(te.loadingData,te.data),ae=oe?oe.cMsj:"",se=oe?oe.nIdeVoucher:"";console.log(ae+"********************"+R+"*******************"+T),"OK"===ae&&!1===R?(S(!0),D("si")):"OK"!==ae&&""!==ae&&!1===R&&(S(!0),D("no"),X.reset({})),console.log("***************valor del router"),console.log(n),console.log(n.query.idepol),console.log("****************vaucher"),console.log("pidepol: ".concat(t,", FecIni: ").concat(c,", Fecfin: ").concat(h,", paisOri: ").concat(g,", paisDest: ").concat(b,", coproveedor: ").concat(M));var le=function(){var e=(0,d.Z)((function(e){var i,r,t,a,s,l,c,d;return(0,_.__generator)(this,(function(p){return e.defaultValue,Fe.ZP.success("Registrando........"),o(""),j(""),C(""),A(""),o(n.query.idepol),j(ie("p_origen_viaje")),C(ie("p_destino_viaje")),A(ie("p_proveedor")),i=new Date(ie("p_fecha_ini_viaje")),isNaN(i.getTime())||1969===i.getFullYear()||(r=i.getDate().toString().padStart(2,"0"),t=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getFullYear(),u("".concat(r,"/").concat(t,"/").concat(a))),s=new Date(ie("p_fecha_hasta_viaje")),isNaN(s.getTime())||1969===s.getFullYear()||(l=s.getDate().toString().padStart(2,"0"),c=(s.getMonth()+1).toString().padStart(2,"0"),d=s.getFullYear(),m("".concat(l,"/").concat(c,"/").concat(d))),S(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),ce=(function(){var e=(0,d.Z)((function(){return(0,_.__generator)(this,(function(e){switch(e.label){case 0:return[4,ee()];case 1:return e.sent()&&le(ne()),[2]}}))}))}(),(0,P.useRef)(!0),(0,P.useState)(new Date)),de=(ce[0],ce[1],(0,P.useState)(null)),ue=de[0];de[1];console.log(ue+"este es el valor");return(0,r.jsxs)(l.RV,{methods:X,onSubmit:$(le),children:[q&&(0,r.jsx)(l.a_,{noColor:!0}),!q&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a.Z,{spacing:3,children:[(0,r.jsx)(O.no,{title:"Datos del Viaje",headerColor:"purple",icon:"bi:person",children:(0,r.jsxs)($i,{children:[(0,r.jsx)(Le.X5,{label:"Fecha desde",name:"p_fecha_ini_viaje",minDate:new Date,maxDate:ie("p_fecha_hasta_viaje"),required:!0,size:"small"}),(0,r.jsx)(Le.X5,{label:"Fecha hasta",name:"p_fecha_hasta_viaje",minDate:ie("p_fecha_ini_viaje"),defaultValue:ie("p_fecha_ini_viaje"),required:!0,size:"small"}),(0,r.jsx)(rr,{objForm:X,showPaisdest:!0,required:!0,disabledInfo:!0}),(0,r.jsx)(Le.dk,{label:"Pa\xeds Origen",name:"p_origen_viaje",arrayValues:null===Q||void 0===Q?void 0:Q.cr_pais,required:!0,size:"small",notBlank:!0}),(0,r.jsx)(nr,{objForm:X,showPaisdest:!0,required:!0,readOnly:!0}),(0,r.jsx)(Le.dk,{label:"Proveedor",name:"p_proveedor",arrayValues:null===H||void 0===H?void 0:H.cr_proveedor,required:!0,size:"small",notBlank:!0})]})}),(0,r.jsx)(O.no,{title:"Datos del pasajero",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)($i,{children:(0,r.jsx)(or,{objForm:X,router:null===n||void 0===n?void 0:n.query,showDatospasajero:!0,required:!0,readOnly:!0})})})]})}),!0===N&&(0,r.jsx)(a.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(v.Z,{size:"large",type:"submit",variant:"contained",loading:re,children:"Registrar"})})]})}function nr(e){var n=e.objForm,i=e.showPaisdest,t=(e.readOnly,e.required,Qi().useGetPaisDestViaje);console.log("Paso por aqu\xed"),console.log(n.watch("p_origen_viaje"));var o=t({p_pais_dest:n.watch("p_origen_viaje")}).data;return(0,r.jsx)(r.Fragment,{children:i&&(0,r.jsx)(Le.dk,{label:"Pa\xeds Destino",name:"p_destino_viaje",arrayValues:null===o||void 0===o?void 0:o.cr_pais,required:!0,size:"small",notBlank:!0})})}nr.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readOnly:C().bool,sshowOficina:C().bool,showDepartamento:C().bool};var ir=i(18838);function rr(e){e.index,e.customerType;var n=e.readonly,i=(e.budgetArea,e.disabledInfo),t=(e.disableEdoCivil,e.objForm),o=Qi().useGetdiasviaje,a=null,s=new Date(t.watch("p_fecha_ini_viaje"));if(!isNaN(s.getTime())&&1969!==s.getFullYear()){var l=s.getDate().toString().padStart(2,"0"),c=(s.getMonth()+1).toString().padStart(2,"0"),d=s.getFullYear();a="".concat(l,"/").concat(c,"/").concat(d)}var u=null,p=new Date(t.watch("p_fecha_hasta_viaje"));if(!isNaN(p.getTime())&&1969!==p.getFullYear()){var h=p.getDate().toString().padStart(2,"0"),_=(p.getMonth()+1).toString().padStart(2,"0"),x=p.getFullYear();u="".concat(h,"/").concat(_,"/").concat(x)}console.log(a),console.log(u);var m=o({p_fecha_ini_viaje:a,p_fecha_hasta_viaje:u}).data;return t.setValue("p_cant_dia_viajes",null===m||void 0===m?void 0:m.result),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Le.be,{label:"",name:"p_cant_dia_viajes",readonly:n||!1,disabled:i||!1,required:!0})})}rr.propTypes={objForm:C().object.isRequired,index:C().any.isRequired,readOnly:C().bool,sshowOficina:C().bool,showDepartamento:C().bool};var tr=i(69368);function or(e){var n=e.router,i=((0,P.useRef)(),(0,P.useState)("N")),t=i[0],o=i[1],a=(0,P.useState)(""),s=a[0],l=a[1],c=(0,P.useState)([]),d=c[0],u=c[1],p=(0,P.useState)([]),h=p[0],_=p[1],m=(0,P.useState)(),v=m[0],f=m[1],g=(0,P.useState)(),j=g[0],y=(g[1],(0,P.useState)()),b=y[0],C=y[1],Z=(0,P.useState)([]),O=Z[0],R=Z[1],S=Qi(),E=S.useGetAsegViaje,T=S.useGetChk,I=(0,P.useState)(!1),D=I[0],w=(I[1],(0,P.useState)(null)),M=w[0],A=(w[1],E({p_idepol:n.idepol,p_codcli:n.codcli}).data),N=(null===A||void 0===A||A.cr_asegurados.length,Array(30).fill(!1)),F=(0,P.useState)(N),V=F[0],q=F[1];T({p_ideaseg:v,p_idecobert:b,p_pasaporte:s,p_chek:t}).data;(0,P.useEffect)((function(){}),[v,j,b,t,s]);var L=(0,x.Gc)(),U=L.watch;L.setValue;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"N\xb0 pasajero"}),(0,r.jsx)("th",{children:"Parentesco"}),(0,r.jsx)("th",{children:"Nombre"}),(0,r.jsx)("th",{children:"Apellido"}),(0,r.jsx)("th",{children:"Pasaporte"}),(0,r.jsx)("th",{children:"D\xedas disponible"}),(0,r.jsx)("th",{children:"Activar"})]})}),(0,r.jsx)("tbody",{children:null===A||void 0===A?void 0:A.cr_asegurados.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(Le.be,{label:"",name:"p_pasajero_".concat(n),defaultValue:e.IDVIAJERO,readonly:!0,disabled:!0},n)}),(0,r.jsx)("td",{children:(0,r.jsx)(Le.be,{label:"",name:"p_parentesco_".concat(n),defaultValue:e.DESCPARENT,readonly:!0,disabled:!0},n)}),(0,r.jsx)("td",{children:(0,r.jsx)(Le.be,{label:"",name:"p_nombre_".concat(n),defaultValue:e.NOMASEG,readonly:!0,disabled:!0},n)}),(0,r.jsx)("td",{children:(0,r.jsx)(Le.be,{label:"",name:"p_apellido_".concat(n),defaultValue:e.APEASEG,readonly:!0,disabled:!0},n)}),(0,r.jsx)("td",{children:(0,r.jsx)(Le.be,{label:"",name:"p_pasaporte_".concat(n),defaultValue:d[n],readonly:!1,disabled:V[n],onChange:function(e){return function(e,n){var i=e.target.value,r=(0,xe.Z)(d);r[n]=i,u(r);var t=(0,xe.Z)(h);t[n]=i,_(t)}(e,n)}},n)}),(0,r.jsx)("td",{children:(0,r.jsx)(Le.be,{label:"",name:"p_disponible_".concat(n),defaultValue:e.DIASDISP,readonly:!0,disabled:!0},n)}),(0,r.jsx)("td",{children:(0,r.jsx)(tr.Z,{label:"",checked:V[n],name:"p_check_".concat(n),disabled:0==e.DIASDISP,onChange:function(i){return function(e,n,i,r){var t=n.target.checked;o(t?"S":"N");var a=U(["p_pasaporte_".concat(i)]);l(a[0]);var c=(0,xe.Z)(O);if(c.splice(i,1,s),R(c),f(e),C(r),""===d[i]||void 0===d[i]||null===d[i]){if(1==t){Fe.ZP.error("Por favor, inserte el numero de Pasaporte");var u=(0,xe.Z)(V);u.splice(i,1,!1),q(u),o("N")}}else{var p=h.some((function(e,n){return n!==h.indexOf(e)}));if(!0===p){h.map((function(e,n){console.log(n+" "+e),void 0!==e&&null!==e&&""!==e||console.log(h.splice(n,1,n))}));var _=h.some((function(e,n){return n!==h.indexOf(e)}));if(!0===_){Fe.ZP.error("Atenci\xf3n, el numero de pasaporte esta repetido"),d.splice(i,1,""),h.splice(i,1,i);var x=(0,xe.Z)(V);x.splice(i,1,!1),q(x),o("N")}else{var m=(0,xe.Z)(V);m.splice(i,1,t),q(m)}}else{var v=(0,xe.Z)(V);v.splice(i,1,t),q(v)}}0==t&&(d.splice(i,1,""),h.splice(i,1,i),o("N"))}(e.IDEASEG,i,n,e.IDECOBERT)},sx:{ml:2}},n)}),!1,!1]},n)}))})]}),D&&(0,r.jsx)("p",{children:"Cargando datos..."}),M&&(0,r.jsxs)("p",{children:["Ha ocurrido un error: ",M.message]})]})}or.propTypes={index:C().string.isRequired,label:C().string,arrayValues:C().array,defaultValue:C().string,onChange:C().func,readonly:C().bool,rest:C().any,required:C().bool,disabled:C().bool};var ar=i(98456),sr=i(57007),lr=i(97177),cr=(0,m.ZP)("div")((function(){return{position:"relative",display:"flex",flexDirection:"row",justifyContent:"center"}})),dr=(0,m.ZP)("div")((function(){return{overflow:"hidden","& input":{display:"block",height:"100%",left:"0",opacity:"0 !important",position:"absolute",width:"100%"}}}));function ur(e){var n,i,t=e.params,s=e.showButton,c=void 0===s||s,u=e.workflowId,p=e.taskId,h=(0,De.useQueryClient)(),x=(0,P.useState)(),m=x[0],v=x[1],f=(0,P.useState)({}),g=f[0],j=f[1],y=(0,P.useState)(),b=y[0],C=y[1],R=(0,P.useState)(!1),S=R[0],T=R[1],I=(0,P.useState)("S"),w=I[0],M=I[1],A=(0,Y.useRouter)(),N=function(){T(!S)},F=(0,sr.Z)(),V=F.useGetDocuments,q=F.useUploadFile,L=V(JSON.stringify(t)),U=L.data,k=L.isLoading,G=L.refetch,K=q(),B=K.mutate,z=K.isLoading,W=(0,Qi().useGetReqViajeSalud)({p_idevaucher:t.p_idvaucher}),Q=W.data,H=W.refetch,J=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){return h.invalidateQueries("get_document_file_digitization"),v({core_system_document_id:e.CORE_SYSTEM_DOCUMENT_ID,core_system_transaction_id:e.CORE_SYSTEM_TRANSACTION_ID,core_system_transaction_table:e.CORE_SYSTEM_TRANSACTION_TABLE,core_unique_doc_id:e.CORE_UNIQUE_DOC_ID}),j({documentName:e.OTHER_PARTICULAR_INFO,contentType:e.DOCUMENT_CONTENT_TYPE}),N(),[2]}))}));return function(n){return e.apply(this,arguments)}}();function X(e){return $.apply(this,arguments)}function $(){return $=(0,d.Z)((function(e){var n,i=arguments;return(0,_.__generator)(this,(function(r){return n=i.length>1&&void 0!==i[1]?i[1]:.7,[2,new Promise((function(i,r){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=.7*t.width,e.height=.7*t.height,r.drawImage(t,0,0,e.width,e.height),e.toBlob((function(e){i(e)}),"image/jpeg",n)},t.onerror=r},t.onerror=r}))]}))})),$.apply(this,arguments)}function ee(){return ee=(0,d.Z)((function(e,n){var i,r,t,o,a,s,l,c,d,h,x;return(0,_.__generator)(this,(function(_){switch(_.label){case 0:e.preventDefault(),i=n.row,_.label=1;case 1:if(_.trys.push([1,4,,5]),o=e.target.files[0],!["application/pdf","image/jpeg","image/png"].includes(o.type))throw"El documento debe estar en los siguientes formatos: PDF, JPG, PNG";return a=o,["image/jpeg","image/png"].includes(o.type)?[4,X(o)]:[3,3];case 2:a=_.sent(),_.label=3;case 3:return C(i.original.CORE_SYSTEM_DOCUMENT_ID),(s=new FormData).append("p_lob_file_content",a),h={core_system_document_id:i.original.CORE_SYSTEM_DOCUMENT_ID,core_system_transaction_id:i.original.CORE_SYSTEM_TRANSACTION_ID.toString(),core_system_transaction_table:i.original.CORE_SYSTEM_TRANSACTION_TABLE,core_system_person_ident:null!==(l=i.original.CORE_SYSTEM_PERSON_IDENT)&&void 0!==l?l:"",core_area_transaction_id:i.original.CORE_AREA_TRANSACTION_ID,core_group_requirement_id:i.original.CORE_GROUP_REQUIREMENT_ID,other_particular_info:i.original.CORE_SYSTEM_DOCUMENT_DESC,file_extension:o.name.substring(o.name.lastIndexOf(".")+1),document_content_type:o.type,p_workflow_id:u,p_task_id:p,core_unique_doc_id:null!==(c=null===(r=i.original)||void 0===r?void 0:r.CORE_UNIQUE_DOC_ID)&&void 0!==c?c:null,document_workflow_id:null!==(d=null===(t=i.original)||void 0===t?void 0:t.DOCUMENT_WORKFLOW_ID)&&void 0!==d?d:null},s.append("p_json_params",JSON.stringify(h)),B(s,{onSuccess:function(){G(),C(null),Fe.ZP.success("Documento cargado exitosamente!")},onError:function(e){Fe.ZP.error((0,D.J4)(e.response.data)),C(null)}}),[3,5];case 4:return x=_.sent(),Fe.ZP.error(x),[3,5];case 5:return[2]}}))})),ee.apply(this,arguments)}var ne;return(0,r.jsxs)(r.Fragment,{children:[k&&(0,r.jsx)(l.a_,{disableBg:!0}),!k&&(0,r.jsx)(O.wY,{data:(null===U||void 0===U?void 0:U.p_documents)||[],columns:[{header:"Recaudos",accessorKey:"DESCREQ",cell:function(e){return(0,r.jsx)(o.Z,{variant:"body2",textAlign:"left",children:e.row.original.CORE_SYSTEM_DOCUMENT_DESC})}},{header:"Observaciones",accessorKey:"OBSERVATION",cell:function(e){return(0,r.jsx)(o.Z,{variant:"body2",textAlign:"left",children:null!==(ne=e.row.original.OBSERVATION)&&void 0!==ne?ne:""})}},{header:"Estatus",accessorKey:"STSREQ",cell:function(e){return(0,r.jsx)(l.__,{color:"ENT"===e.row.original.CORE_SYSTEM_DOCUMENT_STS?"success":"error",children:"ENT"===e.row.original.CORE_SYSTEM_DOCUMENT_STS?"Entregado":"Pendiente"})}},{header:"Acciones",align:"center",cell:function(e){return(0,r.jsx)(cr,{children:"PEN"===e.row.original.CORE_SYSTEM_DOCUMENT_STS?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(wn.Z,{title:"Adjuntar",placement:"right-start",arrow:!0,children:(0,r.jsx)(dr,{children:(0,r.jsxs)(Mn.Z,{"aria-label":"Documentos",color:"primary",children:[(0,r.jsx)(l.Ir,{icon:"ic:baseline-backup",width:24,height:24}),(0,r.jsx)("input",{accept:"image/*,.pdf",id:"icon-button-file-".concat(e.row.original.CORE_SYSTEM_DOCUMENT_ID),onChange:function(n){return function(e,n){return ee.apply(this,arguments)}(n,e)},type:"file",style:{cursor:"pointer"}})]})})}),(0,r.jsx)(Z.Z,{children:z&&b===e.row.original.CORE_SYSTEM_DOCUMENT_ID&&(0,r.jsx)(ar.Z,{color:"secondary"})})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(wn.Z,{title:"Ver documento",placement:"right-start",arrow:!0,children:(0,r.jsx)(Mn.Z,{"aria-label":"Documentos",color:"secondary",onClick:function(){var n;return J(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original)},children:(0,r.jsx)(l.Ir,{icon:"charm:search",width:24,height:24})})})})})}}],options:{actionsColumnIndex:-1,paging:!1,search:!1,toolbar:!1,sorting:!1,pageSize:null===U||void 0===U?void 0:U.p_documents.length}}),c&&(0,r.jsx)(a.Z,{justifyContent:"center",alignItems:"center",py:2,children:(0,r.jsxs)(E.Z,{variant:"contained",color:"neutral",onClick:function(){H(),M(Q.p_resultado),console.log("ReqViaje"),console.log(Q),console.log("reqstatus"),console.log(w),"N"===Q.p_resultado?(console.log(null===A||void 0===A?void 0:A.query.p_idvaucher),A.push({pathname:"/portal/viaje_salud/RectanguloRefMot",query:{p_idvaucher:t.p_idvaucher}})):Fe.ZP.error("Se deben digitalizar todos los requisitos")},children:[(null===A||void 0===A||null===(n=A.query)||void 0===n?void 0:n.return)?"Regresar":"Culminar el proceso",(0,r.jsx)(l.Ir,{icon:(null===A||void 0===A||null===(i=A.query)||void 0===i?void 0:i.return)?"ant-design:backward-filled":"mdi:home",sx:{mx:1}})]})}),(0,r.jsx)(lr.Z,{handleClose:N,open:S,apiParams:m,metaParams:g})]})}ur.propTypes={params:C().object.isRequired,showButton:C().bool};i(65160);function pr(){var e=(0,P.useState)(),n=(e[0],e[1],(0,Y.useRouter)());console.log(null===n||void 0===n?void 0:n.query.p_voucher);var i={p_expedient_type:"VIJ",p_idvaucher:null===n||void 0===n?void 0:n.query.p_voucher},t=(0,(0,ir.Z)().usePostRequirements)(),o=(t.mutate,t.isLoading),s=function(e){var n=e.text;return(0,r.jsx)("div",{style:{backgroundColor:"#ffffe0",border:"1px solid #dcdcdc",borderRadius:"5px",margin:"10px",padding:"10px",fontSize:"14px",color:"#000"},children:(0,r.jsx)("p",{children:n})})};return(0,r.jsxs)("div",{title:"Consignaci\xf3n de Documentos",children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z,{spacing:3,children:(0,r.jsx)(kn.Z,{title:"Documentos",icon:"healthicons:i-documents-accepted-outline",children:(0,r.jsx)(f.ZP,{container:!0,justify:"center",children:(0,r.jsxs)(f.ZP,{item:!0,xs:12,sm:12,md:12,children:[i&&(0,r.jsx)(ur,{params:i,showButton:!0}),(0,r.jsx)(s,{text:"La digitalizaci\xf3n de los requisitos es de car\xe1cter obligatorio para proceder con el an\xe1lisis del voucher. Para mayor informaci\xf3n Comunicarse a asistenciaenviaje@la-internacional.com"})]})})})})})]})}function hr(){var e=(0,Ze.Ai)();console.log(e.p_insurance_broker_code);var n=(0,P.useState)({}),i=n[0],o=n[1];return console.log("paso por aqui intermediario"),console.log(o.p_busca_cocli),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(_r,{handleParams:o})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(xr,{params:i.p_busca_cocli})})]})})}function _r(e){var n=e.handleParams,i=(0,x.cI)({mode:"onSubmit",defaultValues:{p_busca_cocli:""}}),t=i.handleSubmit,o=i.formState.isSubmitting,s=function(){var e=(0,d.Z)((function(e){var i;return(0,_.__generator)(this,(function(r){return i={p_busca_cocli:e.p_identification_type_0+e.p_identification_number_0},n(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(O.no,{title:"Asegurado",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(l.RV,{methods:i,onSubmit:t(s),children:(0,r.jsxs)(a.Z,{spacing:2.5,children:[(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!1}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:o,children:"Buscar"})]})})})}function xr(e){var n=e.params;console.log("ver que valor tiene params"),console.log(n);var i=(0,Ze.Ai)();console.log(i.p_insurance_broker_code);var t=(0,Qi().useGetAseguradoViajeSaludInter)({p_codinter:i.p_insurance_broker_code,p_cocli:n}),o=t.data,a=t.isLoading;console.log(o);var s=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(l.a_,{disableBg:!0}),!a&&(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(O.wY,{data:(null===o||void 0===o?void 0:o.cr_polizas)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){var n,i,t,o,a,s;return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original.ICONOPROD)?null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.ICONOPROD:"healthicons:no-outline",sx:{backgroundColor:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original.COLORPROD)?null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original.COLORPROD:"#DFE3E8","&:hover":{backgroundColor:(0,Ge._j)((null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original.COLORPROD)?null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.original.COLORPROD:"#DFE3E8",.45)}}})}},{header:"IDEPOL",accessorKey:"IDEPOL"},{header:"NUMPOLIZA",accessorKey:"NUMPOLIZA"},{header:"FECEMI",accessorKey:"FECEMI"},{header:"FECFINVIG",accessorKey:"FECFINVIG"},{header:"CODCLI",accessorKey:"CODCLI"},{header:"NOMAPECLI",accessorKey:"NOMAPECLI"},{header:"STSPOL",accessorKey:"STSPOL"}],onRowClick:function(e){s.push({pathname:"/portal/viaje_salud/SolicitudReqAsegurado",query:{codcli:e.original.CODCLI,idepol:e.original.IDEPOL,numpol:e.original.NUMPOLIZA,fecemi:e.original.FECEMI,fecfinvig:e.original.FECFINVIG,nomapecli:e.original.NOMAPECLI,stspol:e.original.STSPOL,type:"registro"}})}})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){s.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}function mr(){var e=(0,Ze.Ai)();console.log(e.p_insurance_broker_code);var n=(0,P.useState)({}),i=n[0],o=n[1];return console.log("paso por aqui intermediario"),console.log(o.p_busca_cocli),(0,r.jsx)(t.Z,{maxWidth:"xl",children:(0,r.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(vr,{handleParams:o})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(fr,{params:i.p_busca_cocli})})]})})}function vr(e){var n=e.handleParams,i=(0,x.cI)({mode:"onSubmit",defaultValues:{p_busca_cocli:""}}),t=i.handleSubmit,o=i.formState.isSubmitting,s=function(){var e=(0,d.Z)((function(e){var i;return(0,_.__generator)(this,(function(r){return i={p_busca_cocli:e.p_identification_type_0+e.p_identification_number_0},n(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(O.no,{title:"Asegurado",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(l.RV,{methods:i,onSubmit:t(s),children:(0,r.jsxs)(a.Z,{spacing:2.5,children:[(0,r.jsx)(Le.c9,{index:0,arrayValues:D.IQ,required:!1}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:o,children:"Buscar"})]})})})}function fr(e){var n=e.params,i=(0,Qi().useGetAseguradoViajeSaludCoorp)({p_cocli:n}),t=i.data,o=i.isLoading;console.log(t);var a=(0,Y.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(l.a_,{disableBg:!0}),!o&&(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(O.wY,{data:(null===t||void 0===t?void 0:t.cr_polizas)||[],options:{pageSize:5},columns:[{header:"",accessorKey:"FILA",cell:function(e){var n,i,t,o,a,s;return(0,r.jsx)(O.b8,{textTooltip:"Cliente",color:"primary",icon:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original.ICONOPROD)?null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.ICONOPROD:"healthicons:no-outline",sx:{backgroundColor:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original.COLORPROD)?null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original.COLORPROD:"#DFE3E8","&:hover":{backgroundColor:(0,Ge._j)((null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original.COLORPROD)?null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.original.COLORPROD:"#DFE3E8",.45)}}})}},{header:"IDEPOL",accessorKey:"IDEPOL"},{header:"NUMPOLIZA",accessorKey:"NUMPOLIZA"},{header:"FECEMI",accessorKey:"FECEMI"},{header:"FECFINVIG",accessorKey:"FECFINVIG"},{header:"CODCLI",accessorKey:"CODCLI"},{header:"NOMAPECLI",accessorKey:"NOMAPECLI"},{header:"STSPOL",accessorKey:"STSPOL"}],onRowClick:function(e){a.push({pathname:"/portal/viaje_salud/SolicitudReqAsegurado",query:{codcli:e.original.CODCLI,idepol:e.original.IDEPOL,numpol:e.original.NUMPOLIZA,fecemi:e.original.FECEMI,fecfinvig:e.original.FECFINVIG,nomapecli:e.original.NOMAPECLI,stspol:e.original.STSPOL,type:"registro"}})}})}),(0,r.jsx)(ke.Z,{raise:"true",children:(0,r.jsx)(f.ZP,{container:!0,justifyContent:"center",children:(0,r.jsx)(qn.Z,{variant:"contained",children:(0,r.jsxs)(E.Z,{variant:"contained",color:"secondary",onClick:function(){a.back()},children:[(0,r.jsx)(l.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})})})]})}_r.propTypes={handleParams:C().func.isRequired},xr.propTypes={params:C().object.isRequired},vr.propTypes={handleParams:C().func.isRequired},fr.propTypes={params:C().object.isRequired};var gr={getCompany:"/dbo/service_seniat/get_obtener_comp/",generateDates:"/dbo/service_seniat/get_obtiene_monto_declarar/",generateDeclare:"/dbo/service_seniat/declare_seniat_movements/",getYear:function(e){return"/dbo/service_seniat/get_ano/?p_compania=".concat(e)},consultDetail:"/dbo/service_seniat/consulta_maestro/",consultDeclarationDetail:function(e){return"/dbo/service_seniat/consultar_detalle/?p_nro_declaracion=".concat(e)}};function jr(){var e=function(){var e=(0,d.Z)((function(){return(0,_.__generator)(this,(function(e){switch(e.label){case 0:return[4,Ie.Z.get(gr.getCompany)];case 1:return[2,e.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.post(gr.generateDates,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.post(gr.generateDeclare,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),r=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(gr.getYear(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),t=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.post(gr.consultDetail,e)];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,d.Z)((function(e){return(0,_.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie.Z.get(gr.consultDeclarationDetail(e))];case 1:return[2,n.sent().data]}}))}));return function(n){return e.apply(this,arguments)}}();return{useGetCompany:function(){return(0,De.useQuery)(["get_company"],(function(){return e()}))},useGenerateDates:function(){return(0,De.useMutation)(n)},useGenerateDeclare:function(){return(0,De.useMutation)(i)},useGetYear:function(e){return(0,De.useQuery)(["get_year",e],(function(){return r(e)}),{enabled:!!e})},useConsultDetail:function(){return(0,De.useMutation)(t)},useConsultDeclarationDetail:function(e){return(0,De.useQuery)(["consult_declaration_detail",e],(function(){return o(e)}),{enabled:!!e})}}}var yr=i(90629),br=i(94054),Cr=i(88167),Zr=i(27832),Or=function(e){var n=e.methods,i=e.handleSubmit,t=e.onSave,a=e.dataCompany,s=e.amountDeclareOriginal,l=e.listYears;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(yr.Z,{elevation:3,sx:{p:3,mb:5},children:[(0,r.jsx)(Z.Z,{component:"img",src:"/background/seniat.jpg",alt:"Logo",sx:{width:300,mb:2}}),(0,r.jsxs)(Cr.Z,{methods:n,onSubmit:i(t),noValidate:!0,autoComplete:"off",children:[(0,r.jsx)(br.Z,{fullWidth:!0,sx:{mb:2},children:(0,r.jsx)(Le.dk,{name:"p_company",label:"Compa\xf1\xeda a Consultar",arrayValues:(null===a||void 0===a?void 0:a.c_compania)||[],required:!0})}),(0,r.jsxs)(f.ZP,{container:!0,spacing:2,sx:{mb:2},children:[(0,r.jsx)(f.ZP,{item:!0,xs:6,sm:6,children:(0,r.jsx)(Le.dk,{name:"month",label:"Mes",arrayValues:Zr.M8})}),(0,r.jsx)(f.ZP,{item:!0,xs:6,sm:6,children:(0,r.jsx)(Le.dk,{name:"year",label:"A\xf1o",arrayValues:l})})]}),(0,r.jsx)(E.Z,{fullWidth:!0,variant:"contained",type:"submit",sx:{mb:2},children:"Consultar"})]})]}),(0,r.jsx)(yr.Z,{elevation:3,sx:{p:3,gap:2},children:(0,r.jsxs)(Z.Z,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)(o.Z,{htmlFor:"amountDeclareOriginal",variant:"body2",fontWeight:600,children:"Monto total declarado:"}),(0,r.jsx)(o.Z,{htmlFor:"amountDeclareOriginal",variant:"body2",children:s})]})})]})};Or.propTypes={methods:C().object.isRequired,handleSubmit:C().func.isRequired,onSave:C().func.isRequired,dataCompany:C().shape({c_compania:C().array}),amountDeclareOriginal:C().number,listYears:C().array.isRequired};var Rr=Or,Sr=i(84105),Er=function(e){var n=e.dataConsultDetail,i=e.isLoadingConsultDetail,t=e.onRowClick;return(0,r.jsx)(O.no,{title:"Declaraciones Realizadas ante el SENIAT",icon:"carbon:result",elevation:3,sx:{p:3},children:i?(0,r.jsx)(Z.Z,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,r.jsx)(l.a_,{disableBg:!0})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"end"},children:[(0,r.jsx)(o.Z,{variant:"body2",fontWeight:700,children:"Exportar:"}),(0,r.jsx)(wn.Z,{title:"Descargar Reporte",placement:"right-start",arrow:!0,children:(0,r.jsx)(Mn.Z,{"aria-label":"Excel",onClick:function(){if(n&&0!==n.length){var e=Sr.P6.json_to_sheet(n),i=Sr.P6.book_new();Sr.P6.book_append_sheet(i,e,"Movimientos"),Sr.NC(i,"Movimientos_Declarar.xlsx")}else Fe.ZP.error("No hay datos para exportar.")},children:(0,r.jsx)(l.Ir,{icon:"vscode-icons:file-type-excel",width:24,height:24})})})]}),(0,r.jsx)(Z.Z,{children:(0,r.jsx)(O.wY,{data:n||[],onRowClick:t,columns:[{header:"N\xfamero de Declaraci\xf3n",accessorKey:"NRO_DECLARACION"},{header:"Semana Declarada",accessorKey:"SEMANA"},{header:"Fecha de Declaraci\xf3n",accessorKey:"FECHA_DECLARACION"},{header:"Monto Declarar",accessorKey:"MTOPRIMACOBRADO"},{header:"Monto Declarado",accessorKey:"MTODECLARADO"},{header:"Facturas Excluidas",accessorKey:"FACTURAS_EXCLUIDAS"},{header:"Estatus Prima",accessorKey:"ESTATUS"}]})})]})})};Er.propTypes={dataConsultDetail:C().array.isRequired,isLoadingConsultDetail:C().bool.isRequired,onRowClick:C().func.isRequired};var Pr=Er,Tr=i(37645),Ir=i(6514),Dr=(0,m.ZP)(Tr.Z)((function(e){var n=e.theme;return{backgroundColor:n.palette.primary.main,color:n.palette.common.white,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px"}})),wr=(0,m.ZP)(Ir.Z)((function(e){return{padding:e.theme.spacing(3),backgroundColor:"#f5f5f5"}})),Mr=(0,m.ZP)(Mn.Z)((function(){return{color:"white"}})),Ar=function(e){var n=e.openModalDeclarationDetail,i=e.setOpenModalDeclarationDetail,t=e.dataConsultDeclarationDetail,a=e.title,s=e.isLoadingConsultDeclarationDetail;return(0,r.jsxs)(je.Z,{open:n,onClose:function(){return i(!1)},maxWidth:"lg",fullWidth:!0,children:[(0,r.jsxs)(Dr,{children:[(0,r.jsx)(o.Z,{variant:"p",children:a}),(0,r.jsx)(Mr,{onClick:function(){return i(!1)},children:(0,r.jsx)(l.Ir,{icon:"material-symbols:close"})})]}),(0,r.jsx)(wr,{children:s?(0,r.jsx)(l.a_,{disableBg:!0}):(0,r.jsx)(O.wY,{data:(null===t||void 0===t?void 0:t.c_movimientos)||[],columns:[{header:"N\xfamero de Declaraci\xf3n",accessorKey:"NRO_DECLARACION"},{header:"Codigo Producto",accessorKey:"CODPROD"},{header:"Codigo Ramo",accessorKey:"CODRAMO"},{header:"Idepol",accessorKey:"IDEPOL"},{header:"Numero Poliza",accessorKey:"NUMPOL"},{header:"Idefact",accessorKey:"IDEFACT",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.IDEFACT)}},{header:"Monto Prima Moneda",accessorKey:"MTOPRIMAMONEDA"},{header:"Fecha Emision",accessorKey:"FECEMI"},{header:"Numero Recibo",accessorKey:"NUMREC"},{header:"Numreling",accessorKey:"NUMRELING",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.NUMRELING)}},{header:"Fecha Recibo",accessorKey:"FECSTS"},{header:"Estatus Recibo",accessorKey:"STSREC"},{header:"Nombre Cliente",accessorKey:"NOMCLIFACT",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.NOMCLIFACT)}}]})})]})};Ar.propTypes={openModalDeclarationDetail:C().bool.isRequired,setOpenModalDeclarationDetail:C().func.isRequired,dataConsultDeclarationDetail:C().array.isRequired,title:C().string.isRequired,isLoadingConsultDeclarationDetail:C().bool.isRequired};var Nr=Ar,Fr=function(){var e,n=(0,x.cI)({shouldFocusError:!0}),i=n.handleSubmit,t=(0,P.useState)(0),o=t[0],a=t[1],s=(0,P.useState)([]),c=s[0],d=s[1],u=(0,P.useState)(null),_=u[0],m=u[1],v=(0,P.useState)(!1),g=v[0],j=v[1],y=jr(),b=y.useGetCompany,C=y.useGetYear,O=y.useConsultDetail,R=y.useConsultDeclarationDetail,S=b(),E=S.data,T=S.isLoading,I=C(null!==(e=null===E||void 0===E?void 0:E.c_compania[0].CODCIA)&&void 0!==e?e:null),w=I.data,M=I.isLoading,A=R(null!==_&&void 0!==_?_:null),N=A.data,F=A.isLoading,V=O(),q=V.mutate,L=V.isLoading,U=null===w||void 0===w?void 0:w.c_movimientos.map((function(e){return{value:e.ANO,label:e.ANO}}));return T||M?(0,r.jsx)(l.a_,{disableBg:!0}):(0,r.jsxs)(Z.Z,{sx:{minHeight:"auto",p:4},children:[(0,r.jsxs)(f.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,lg:4,children:(0,r.jsx)(Rr,{methods:n,handleSubmit:i,onSave:function(e){var n={p_mes:e.month,p_ano:e.year,p_compania:e.p_company};q(n,{onSuccess:function(e){var n=e.c_movimientos.map((function(e){return(0,h.Z)((0,p.Z)({},e),{MTODECLARADO:e.MTODECLARADO.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}),MTOPRIMACOBRADO:e.MTOPRIMACOBRADO.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})})})),i=e.c_movimientos.reduce((function(e,n){return e+n.MTODECLARADO}),0);d(n),a(i.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}))},onError:function(e){Fe.ZP.error((0,D.J4)(e.response.data))}})},dataCompany:E,amountDeclareOriginal:o,listYears:U})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,lg:8,children:(0,r.jsx)(Pr,{isLoadingConsultDetail:L,dataConsultDetail:c,onRowClick:function(e){m(e.original.NRO_DECLARACION),j(!0)}})})]}),(0,r.jsx)(Nr,{title:"Declaraci\xf3n ".concat(_),openModalDeclarationDetail:g,setOpenModalDeclarationDetail:j,dataConsultDeclarationDetail:N,isLoadingConsultDeclarationDetail:F})]})},Vr=i(16628),qr=function(e){var n=e.methods,i=e.handleSubmit,t=e.onGenerate,a=e.watch,s=e.setValue,c=e.getDataFilter,d=e.dataCompany,u=e.isLoadingGenerateDates,p=e.excludeInvoices,h=e.openExcludeInvoices,_=e.amountDeclareOriginal,x=e.setDetailMovementDeclare;return(0,P.useEffect)((function(){a("p_check_exclude_invoices")||(s("p_exclude_invoices",null),s("p_amount_statement",_),x(h))}),[a,s,_,h,x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(yr.Z,{elevation:3,sx:{p:3,mb:2},children:u?(0,r.jsx)(l.a_,{disableBg:!0}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.Z,{component:"img",src:"/background/seniat.jpg",alt:"Logo",sx:{width:300,mb:2}}),(0,r.jsxs)(Cr.Z,{methods:n,onSubmit:i(t),noValidate:!0,autoComplete:"off",children:[(0,r.jsx)(br.Z,{fullWidth:!0,sx:{mb:2},children:(0,r.jsx)(Le.dk,{name:"p_company",label:"Compa\xf1\xeda a Declarar",arrayValues:(null===d||void 0===d?void 0:d.c_compania)||[],required:!0})}),(0,r.jsxs)(f.ZP,{container:!0,spacing:2,sx:{mb:2},children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:6,children:(0,r.jsx)(Le.X5,{name:"p_date_from",label:"Fecha Desde",required:!0})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,sm:6,children:(0,r.jsx)(Le.X5,{name:"p_date_until",label:"Fecha Hasta",disableFuture:!0,required:!0})})]}),(0,r.jsx)(E.Z,{fullWidth:!0,variant:"contained",type:"submit",sx:{mb:2},children:"Generar Datos"}),(0,r.jsx)(pn.Z,{sx:{mb:2,mt:2}}),(0,r.jsx)(o.Z,{variant:"body2",fontWeight:600,sx:{mb:1},children:"Monto a Declarar:"}),(0,r.jsx)(Le.be,{name:"p_amount_statement",label:"",sx:{mb:2},readonly:!0}),h.length>0&&(0,r.jsxs)(Z.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,r.jsx)(Le.x3,{name:"p_check_exclude_invoices"}),(0,r.jsx)(o.Z,{htmlFor:"excluir",variant:"body2",children:"Excluir Facturas"})]}),a("p_check_exclude_invoices")&&(0,r.jsx)(Vr.Z,{in:!0,timeout:500,children:(0,r.jsx)(Z.Z,{children:(0,r.jsx)(br.Z,{fullWidth:!0,sx:{mb:2},children:(0,r.jsx)(Le.du,{name:"p_exclude_invoices",label:"Facturas a Excluir",arrayValues:p||[],noOptionsText:"No hay facturas para excluir",onChange:c,multiple:!0})})})})]})]})}),(0,r.jsx)(yr.Z,{elevation:3,sx:{p:3,gap:2},children:(0,r.jsxs)(Z.Z,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)(o.Z,{htmlFor:"amountDeclareOriginal",variant:"body2",fontWeight:600,children:"Monto total a la fecha:"}),(0,r.jsx)(o.Z,{htmlFor:"amountDeclareOriginal",variant:"body2",children:_})]})})]})};qr.propTypes={methods:C().object.isRequired,handleSubmit:C().func.isRequired,onGenerate:C().func.isRequired,watch:C().func.isRequired,setValue:C().func.isRequired,getDataFilter:C().func.isRequired,dataCompany:C().shape({c_compania:C().array}),isLoadingGenerateDates:C().bool,excludeInvoices:C().array,openExcludeInvoices:C().array.isRequired,amountDeclareOriginal:C().any,setDetailMovementDeclare:C().func.isRequired};var Lr=qr,Ur=function(e){var n=e.detailMovementDeclare,i=e.isLoadingGenerateDates,t=e.handleDeclareToSeniat;return(0,r.jsx)(O.no,{title:"Detalle de Movimientos a Declarar",icon:"carbon:result",elevation:3,sx:{p:3},children:i?(0,r.jsx)(Z.Z,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,r.jsx)(l.a_,{disableBg:!0})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"end"},children:[(0,r.jsx)(o.Z,{variant:"body2",fontWeight:700,children:"Exportar:"}),(0,r.jsx)(wn.Z,{title:"Descargar Reporte",placement:"right-start",arrow:!0,children:(0,r.jsx)(Mn.Z,{"aria-label":"Excel",onClick:function(){if(n&&0!==n.length){var e=Sr.P6.json_to_sheet(n),i=Sr.P6.book_new();Sr.P6.book_append_sheet(i,e,"Movimientos"),Sr.NC(i,"Movimientos_Declarar.xlsx")}else Fe.ZP.error("No hay datos para exportar.")},children:(0,r.jsx)(l.Ir,{icon:"vscode-icons:file-type-excel",width:24,height:24})})})]}),(0,r.jsx)(Z.Z,{children:(0,r.jsx)(O.wY,{data:n||[],columns:[{header:"Codigo Ramo",accessorKey:"CODRAMOCERT",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.CODRAMOCERT)}},{header:"Codigo Producto",accessorKey:"CODPROD",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.CODPROD)}},{header:"IdeRec",accessorKey:"IDEREC",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.IDEREC)}},{header:"IdePol",accessorKey:"IDEPOL"},{header:"IdeFact",accessorKey:"IDEFACT",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.IDEFACT)}},{header:"NumReling",accessorKey:"NUMRELING",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.NUMRELING)}},{header:"Monto Prima",accessorKey:"MTOLOCAL"},{header:"Fecha Emision",accessorKey:"FECEMI",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.FECEMI)}},{header:"Cliente Factura",accessorKey:"NOMCLIFACT",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.NOMCLIFACT)}}]})}),n.length>0&&(0,r.jsx)(Z.Z,{sx:{display:"flex",justifyContent:"end",mt:4},children:(0,r.jsx)(E.Z,{variant:"contained",sx:{mr:2,background:"#323c79",color:"#fff",textTransform:"none"},onClick:t,children:"Declarar Movimientos"})})]})})};Ur.propTypes={detailMovementDeclare:C().array,isLoadingGenerateDates:C().bool,handleDeclareToSeniat:C().func};var kr=Ur,Gr=i(31132),Kr=function(){var e=(0,De.useQueryClient)(),n=(0,x.cI)({defaultValues:{p_company:"",p_date_from:null,p_date_until:null,p_amount_statement:0,p_exclude_invoices:[],p_check_exclude_invoices:!1},shouldFocusError:!0}),i=n.setValue,t=n.handleSubmit,o=n.watch,a=n.getValues,s=n.reset,c=(0,P.useState)([]),d=c[0],u=c[1],_=(0,P.useState)([]),m=_[0],v=_[1],g=(0,P.useState)([]),j=g[0],y=g[1],b=(0,P.useState)(0),C=b[0],O=b[1],R=jr(),S=R.useGetCompany,E=R.useGenerateDates,T=R.useGenerateDeclare,I=S(),w=I.data,M=I.isLoading,A=E(),N=A.mutate,F=A.isLoading,V=T(),q=V.mutate,L=V.isLoading,U=function(e){return e.replace(".","TEMP").replaceAll(",",".").replace("TEMP",",")},k=function(e){var n=e.filter((function(e,n,i){return n===i.findIndex((function(n){return n.IDEFACT===e.IDEFACT&&null!==e.IDEFACT}))})).map((function(e){return{NAME:e.IDEFACT.toString(),VALUE:e.IDEFACT.toString()}}))||[];y(n)};return M||L?(0,r.jsx)(l.a_,{disableBg:!0}):(0,r.jsx)(Z.Z,{sx:{minHeight:"auto",p:4},children:(0,r.jsxs)(f.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,lg:4,children:(0,r.jsx)(Lr,{methods:n,handleSubmit:t,onGenerate:function(n){if(n.p_date_from>n.p_date_until)Fe.ZP.error("La fecha de inicio no puede ser mayor a la fecha de fin");else{var r={p_fecha_inicio:(0,Gr.Z)(n.p_date_from,"dd/MM/yyyy"),p_fecha_fin:(0,Gr.Z)(n.p_date_until,"dd/MM/yyyy"),p_compania:n.p_company};e.invalidateQueries(["generate_dates"]),N(r,{onSuccess:function(e){var n=e.c_det_movimientos.map((function(e){return(0,h.Z)((0,p.Z)({},e),{MTOLOCAL:U(e.MTOLOCAL)})}));i("p_amount_statement",U(e.c_monto_declarar[0].MONTOPRIMADECLARAR)),O(U(e.c_monto_declarar[0].MONTOPRIMADECLARAR)),k(n),v(n),u(n),i("p_exclude_invoices",[])},onError:function(e){Fe.ZP.error((0,D.J4)(e.response.data))}})}},watch:o,getValues:a,setValue:i,getDataFilter:function(){var e=a("p_exclude_invoices")||[],n=m.filter((function(n){return!e.some((function(e){return e.VALUE==n.IDEFACT}))})),r=n.reduce((function(e,n){var i=parseFloat(n.MTOLOCAL.replace(/\./g,"").replace(",","."));return e+(isNaN(i)?0:i)}),0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2});i("p_amount_statement",r),u(n)},dataCompany:w,amountDeclareOriginal:C,setDetailMovementDeclare:u,isLoadingGenerateDates:F,excludeInvoices:j,openExcludeInvoices:m})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,lg:8,children:(0,r.jsx)(kr,{detailMovementDeclare:d,isLoadingGenerateDates:F,handleDeclareToSeniat:function(){var e,n=a();if(n)if(n.p_date_until&&n.p_date_from)if(n.p_amount_statement){var r=(0,Gr.Z)(n.p_date_until,"MM"),t=(0,Gr.Z)(n.p_date_until,"yyyy"),o=(0,Gr.Z)(new Date,"dd/MM/yyyy"),l=(0,Gr.Z)(n.p_date_until,"dd/MM/yyyy"),c=(0,Gr.Z)(n.p_date_from,"dd/MM/yyyy"),d=(null===n||void 0===n||null===(e=n.p_exclude_invoices)||void 0===e?void 0:e.map((function(e){return e.VALUE})))||[],p={p_json_declarado:JSON.stringify({p_mes:r,p_ano:t,p_semana:"".concat(c," - ").concat(l),p_fecha_declaracion:o,p_mtoprimacobrado:parseFloat(C.replaceAll(".","").replace(",","."))||0,p_mtodeclarado:parseFloat(n.p_amount_statement.replaceAll(".","").replace(",","."))||0,p_facturas_excluidas:d,p_cia:n.p_company,p_fecha_inicio:c,p_fecha_fin:l,p_estatus:"P"})};q(p,{onSuccess:function(e){Fe.ZP.success("Movimientos declarados correctamente, su numero de declaraci\xf3n es el siguiente ".concat(e.p_num_declraracion)),u([]),v([]),y([]),O(0),i("p_amount_statement",0),s()},onError:function(e){return Fe.ZP.error((0,D.J4)(e.response.data))}})}else Fe.ZP.error("El monto a declarar es requerido.");else Fe.ZP.error("Las fechas de inicio y fin son requeridas.");else Fe.ZP.error("No se pudieron obtener los valores del formulario.")}})})]})})};i(33473)},85288:function(e,n,i){"use strict";var r=i(828),t=i(85893),o=i(45697),a=i.n(o),s=i(96087),l=i(86886),c=i(11057),d=i(72007),u=i(67294),p=i(48922),h=i(73569),_=i(87784),x=i(37514),m=i(10166),v=(0,m.Z)("div")({width:"10rem"}),f=(0,m.Z)("div")({width:"11rem"}),g=(0,m.Z)("div")({width:"5rem"}),j=[{header:"Siniestro",accessorKey:"NUMEROSIN"},{header:"Servicio",accessorKey:"SERVICO"},{header:"Beneficiario",accessorKey:"BENEFICIARIO"},{header:"Patologia",accessorKey:"DESCENFER"},{header:"F.Ocurrencia",accessorKey:"FECOCURR"},{header:(0,t.jsx)(v,{children:"Mto.Presupuesto (Bs.)"}),accessorKey:"MTOPRESUPUESTO",align:"right",cell:function(e){return(0,_.dN)(e.getValue())}},{header:(0,t.jsx)(f,{children:"Mto.Indemnizado (Bs.)"}),accessorKey:"MTOINDEM",align:"right",cell:function(e){return(0,_.dN)(e.getValue())}},{header:"Estatus",accessorKey:"STSLIQUID",cell:function(e){var n,i;return(0,t.jsx)(x.Z,{color:(null===(n=_.YS[e.getValue()])||void 0===n?void 0:n.color)||"default",children:(null===(i=_.YS[e.getValue()])||void 0===i?void 0:i.title)||e.getValue()})}},{header:(0,t.jsx)(g,{children:"Estatus WF"}),accessorKey:"STATUS_WF",cell:function(e){var n=e.getValue(),i=_.B5[n]||{},r=null==n&&_.B5.null?_.B5.null.color:i.color||"default",o=null==n&&_.B5.null?_.B5.null.texto:i.texto||n;return(0,t.jsx)(x.Z,{color:r,children:o})}},{header:"Agotamiento",accessorKey:"RESALTAR",cell:function(e){return(0,t.jsx)(x.Z,{color:"white",children:"Agotamiento"===e.getValue()?"Agotamiento":""})}}],y=function(e){var n=e.workflow_id,i=e.program_id,o=(e.tab,(0,u.useState)(null)),a=o[0],x=o[1],m=(0,u.useState)([]),v=m[0],f=m[1],g=(0,s.DW)(),y=g.useGetProgramToClob,b=g.useGetClaimsRelatedPersons,C=y(n,i).data;(0,u.useEffect)((function(){if(C){var e,n,i=null===(n=null===C||void 0===C||null===(e=C.result)||void 0===e?void 0:e.program_actions[0])||void 0===n?void 0:n.parameters[0],r=JSON.stringify({p_idepreadmin:i.p_idepreadmin,p_numliquid:i.p_numliquid});x(r)}}),[C]);var Z=b(a||""),O=Z.data,R=Z.isLoading,S=Z.error,E=v.length>0?v:null===O||void 0===O?void 0:O.c_claims,P=(E||[]).reduce((function(e,n){var i=n.SERVICO,r=n.MTOPRESUPUESTOMONEDA,t=n.MTOINDEMMONEDA;return e[i]||(e[i]={totalPresupuesto:0,totalIndemnizado:0,claims:[]}),e[i].totalPresupuesto+=parseFloat(r||0),e[i].totalIndemnizado+=parseFloat(t||0),e[i].claims.push(n),e}),{}),T=Object.entries(P).map((function(e){var n=(0,r.Z)(e,2),i=n[0],t=n[1];return{service:i,totalPresupuesto:(0,_.dN)(t.totalPresupuesto),totalIndemnizado:(0,_.dN)(t.totalIndemnizado)}}));return(0,t.jsxs)(l.ZP,{container:!0,sx:{paddingLeft:"5rem",paddingRight:"5rem",paddingTop:"1rem"},children:[(0,t.jsx)(l.ZP,{item:!0,xs:12,children:(0,t.jsxs)(p.Z,{title:"Siniestros del Asegurado",icon:"ant-design:warning-filled",children:[R&&(0,t.jsx)(d.a_,{disableBg:!0}),!R&&(null===O||void 0===O?void 0:O.c_claims)&&(0,t.jsx)(h.Z,{options:{sorting:!1},onRowClick:function(e){return function(e){e.WORKFLOW_ID&&window.open("/portal/workflow/service/?workflow_id=".concat(e.WORKFLOW_ID),"_blank")}(e.original)},data:(null===O||void 0===O?void 0:O.c_claims)||[],columns:j,setFilteredData:f}),S&&(0,t.jsx)("div",{children:"Error al cargar los datos. Por favor, intenta nuevamente."})]})}),(0,t.jsx)(l.ZP,{item:!0,xs:12,sx:{marginTop:4},children:(0,t.jsx)(p.Z,{title:"Resumen de Siniestros por Servicio",icon:"ant-design:info-circle-filled",children:(0,t.jsx)(l.ZP,{container:!0,spacing:2,children:T.map((function(e){var n=e.service,i=e.totalPresupuesto,r=e.totalIndemnizado;return(0,t.jsxs)(l.ZP,{item:!0,xs:4,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Servicio:"})," ",n]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Monto Presupuesto Total:"})," $",i]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Monto Indemnizado Total:"})," $",r]})]},n)}))})})}),(0,t.jsx)(l.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",marginTop:"2rem"},children:(0,t.jsxs)(c.Z,{variant:"contained",color:"secondary",onClick:function(){return window.history.back()},children:[(0,t.jsx)(d.Ir,{sx:{color:"white",mx:1},icon:"ic:round-fast-rewind",width:18,height:18}),"Regresar"]})})]})};y.propTypes={workflow_id:a().string,program_id:a().string,tab:a().number},n.Z=y},65360:function(e,n,i){"use strict";i.d(n,{Z:function(){return L}});var r=i(85893),t=i(67294),o=i(65582),a=i(86886),s=i(78462),l=i(97212),c=i(98619),d=i(48885),u=i(59334),p=i(67720),h=i(11057),_=i(93725),x=i(11163),m=i(72007),v=i(3367),f=i(96087),g=i(45697),j=i.n(g),y=i(87784),b=i(15861),C=i(51233),Z=i(90948),O=i(95265),R=(0,Z.ZP)(b.Z)((function(e){return{padding:e.theme.spacing(.3)}}));function S(e){var n=e.dataQuery,i=(0,(0,f.Uj)().useGetPolicyVehicle)(n),t=i.data,o=i.isLoading;return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(m.a_,{disableBg:!0}),!o&&(0,r.jsxs)(_.no,{title:"Detalle del Seguro",headerColor:"yellow",children:[(0,r.jsxs)(a.ZP,{container:!0,children:[(0,r.jsxs)(a.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Marca: "}),null===t||void 0===t?void 0:t.c_vehicle[0].DESCMARCA," "]}),(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Modelo: "}),null===t||void 0===t?void 0:t.c_vehicle[0].DESCMODELO," "]}),(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Versi\xf3n: "})," ",null===t||void 0===t?void 0:t.c_vehicle[0].DESVERSION]}),(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"A\xf1o: "}),null===t||void 0===t?void 0:t.c_vehicle[0].ANOVEH," "]}),(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Color: "}),null===t||void 0===t?void 0:t.c_vehicle[0].COLOR," "]})]}),(0,r.jsxs)(a.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Placa: "}),null===t||void 0===t?void 0:t.c_vehicle[0].NUMPLACA," "]}),(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Serial de Carroceria: "}),null===t||void 0===t?void 0:t.c_vehicle[0].SERIALCARROCERIA," "]}),(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Serial de Motor: "}),null===t||void 0===t?void 0:t.c_vehicle[0].SERIALMOTOR," "]}),(0,r.jsxs)(R,{variant:"body2",children:[(0,r.jsx)("strong",{children:"N\xfamero de puestos: "}),null===t||void 0===t?void 0:t.c_vehicle[0].NUMPUESTOS," "]})]})]}),(0,r.jsx)(a.ZP,{container:!0,py:2,children:(0,r.jsx)(a.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,r.jsx)(O.rH,{coverages:null===t||void 0===t?void 0:t.c_coverages})})})]})]})}var E=(0,Z.ZP)(b.Z)((function(e){return{padding:e.theme.spacing(.75)}}));function P(e){var n=e.data,i=e.showDetails,t={p_policy_id:null===n||void 0===n?void 0:n.IDEPOL,p_certified_id:null===n||void 0===n?void 0:n.NUMCERT};return(0,r.jsxs)(C.Z,{spacing:4,children:[(0,r.jsx)(_.no,{title:"Informaci\xf3n General",icon:"akar-icons:file",iconColor:"primary",children:(0,r.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,r.jsxs)(a.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Producto: "}),null===n||void 0===n?void 0:n.DESCPROD," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Numero: "})," ",null===n||void 0===n?void 0:n.NUMEROPOL]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Certificado: "}),null===n||void 0===n?void 0:n.NUMCERT," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Estatus Poliza: "}),null===n||void 0===n?void 0:n.ESTATUS," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Vigencia: "}),null===n||void 0===n?void 0:n.VIGENCIA," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Situaci\xf3n de Pago: "}),(0,r.jsx)(m.__,{color:y._2[(null===n||void 0===n?void 0:n.ESTADO)?n.ESTADO:"Vigente"].color,children:null===n||void 0===n?void 0:n.ESTADO})]})]}),(0,r.jsxs)(a.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Intermediario: "}),null===n||void 0===n?void 0:n.ASESOR," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Contratante: "}),null===n||void 0===n?void 0:n.CONTRATANTE," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Titular: "}),null===n||void 0===n?void 0:n.TITULAR," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Tlf. Local: "}),null===n||void 0===n?void 0:n.TELEFHAB," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Tlf. Movil: "}),null===n||void 0===n?void 0:n.TELEFCEL," "]}),(0,r.jsxs)(E,{variant:"body1",children:[(0,r.jsx)("strong",{children:"Email: "}),null===n||void 0===n?void 0:n.EMAIL," "]})]})]})}),(0,r.jsx)(v.U$,{dataQuery:t}),i&&(0,r.jsxs)(r.Fragment,{children:[["0004"].includes(null===n||void 0===n?void 0:n.CODAREA)&&(0,r.jsx)(v.B2,{dataQuery:t}),["0002"].includes(null===n||void 0===n?void 0:n.CODAREA)&&(0,r.jsx)(S,{dataQuery:t}),["0001"].includes(null===n||void 0===n?void 0:n.CODAREA)&&(0,r.jsx)(v.Vt,{dataQuery:t})]})]})}P.propTypes={data:j().object.isRequired,showDetails:j().bool};var T=i(65891),I=i(48922),D=i(76799);function w(e){var n=e.queryParams,i=(0,f.Uj)(),o=i.useGetListReports,a=i.useGetReport,c=(0,t.useState)(),d=c[0],p=c[1],h=(0,t.useState)(),_=h[0],x=h[1],m=o(n),v=m.data,g=m.isLoading,j=a({p_params:JSON.stringify(_)}).data;return(0,t.useEffect)((function(){(null===j||void 0===j?void 0:j.p_url)&&_&&("PDF"!==_.INDREPORTE?window.open("/reporte?reportDocRunId=".concat(j.p_url),"_blank"):window.open(j.p_url,"_blank"))}),[j,_]),(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)(D.Z,{disableBg:!0}),!g&&(0,r.jsx)(I.Z,{title:"Documentos",headerColor:"blue",children:(0,r.jsx)(s.Z,{children:null===v||void 0===v?void 0:v.c_reports.filter((function(e){return e.ACTIVO})).map((function(e,n){return(0,r.jsx)(t.Fragment,{children:(0,r.jsx)(l.ZP,{alignItems:"flex-start",onClick:function(){return function(e,n){p(e),x(n)}(n,e)},button:!0,divider:!0,selected:d===n,children:(0,r.jsx)(u.Z,{primary:e.REPORTE,secondary:e.DETALLE})},n)},"listing_report_".concat(n))}))})})]})}var M=i(37514),A=i(73569);V.propTypes={queryParams:j().object.isRequired,codArea:j().string.isRequired};var N=[{header:"Numero",accessorKey:"NUMEROSIN"},{header:"Ocurrencia",accessorKey:"FECOCURR"},{header:"Monto pendiente",accessorKey:"MTOTOTPEND",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.MTOTOTPEND)},cell:function(e){return(0,y.dN)(e.getValue())},align:"right"},{header:"Recaudos",accessorKey:"RECAUDOSPEN",cell:function(e){var n,i;return(0,r.jsx)(M.Z,{color:(null===(n=y.D[e.getValue()])||void 0===n?void 0:n.color)||"default",children:(null===(i=y.D[e.getValue()])||void 0===i?void 0:i.title)||"N/A"})}},{header:"Estatus",accessorKey:"STSSIN",cell:function(e){var n,i;return(0,r.jsx)(M.Z,{color:(null===(n=y.YS[e.getValue()])||void 0===n?void 0:n.color)||"default",children:(null===(i=y.YS[e.getValue()])||void 0===i?void 0:i.title)||"N/A"})}}],F=[{header:"N\xfamero de Caso",accessorKey:"NUMEROSIN"},{header:"Ocurrencia",accessorKey:"FECOCURR"},{header:"Tipo",accessorKey:"TIPO_LIQ"},{header:"Paciente",accessorKey:"PACIENTE"},{header:"Enfermedad ppal.",accessorKey:"DESCENFER"},{header:"Monto pendiente",accessorKey:"MTOTOTPEND",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.MTOTOTPEND)},cell:function(e){return(0,y.dN)(e.getValue())},align:"right"},{header:"Monto indemnizado",accessorKey:"MTOINDEM",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.MTOINDEM)},cell:function(e){return(0,y.dN)(e.getValue())},align:"right"},{header:"Recaudos",accessorKey:"RECAUDOSPEN",cell:function(e){var n,i;return(0,r.jsx)(M.Z,{color:(null===(n=y.D[e.getValue()])||void 0===n?void 0:n.color)||"default",children:(null===(i=y.D[e.getValue()])||void 0===i?void 0:i.title)||"N/A"})}},{header:"Estatus",accessorKey:"STSSIN",cell:function(e){var n,i;return(0,r.jsx)(M.Z,{color:(null===(n=y.YS[e.getValue()])||void 0===n?void 0:n.color)||"default",children:(null===(i=y.YS[e.getValue()])||void 0===i?void 0:i.title)||"N/A"})}}];function V(e){var n=e.queryParams,i=e.codArea,t=(0,x.useRouter)(),o=(0,f.WD)(),a=o.useGetClaimsPolicyPerson,s=o.useGetClaimsPolicy,l=a(n,i),c=l.data,d=l.isLoading,u=s(n,i),p=u.data,h=u.isLoading;return(0,r.jsxs)(r.Fragment,{children:[d||h?(0,r.jsx)(D.Z,{disableBg:!0}):null,!h&&!d&&(0,r.jsx)(I.Z,{title:"Siniestros",icon:"ant-design:warning-filled",children:(0,r.jsx)(A.Z,{options:{sorting:!1},onRowClick:function(e){return function(e){null!==e.WORKFLOW_ID&&t.push("/portal/workflow/service/?workflow_id=".concat(e.WORKFLOW_ID))}(e.original)},data:"0004"===i?null===c||void 0===c?void 0:c.c_claims:(null===p||void 0===p?void 0:p.c_claims)||[],columns:"0004"===i?F:N})})]})}var q=[{title:"Informaci\xf3n",icon:"bi:card-list"},{title:"Documentos",icon:"akar-icons:file"},{title:"Recaudos",icon:"akar-icons:file"},{title:"Siniestros",icon:"ant-design:warning-filled"}];function L(e){var n,i,g=e.p_policy_id,j=e.p_certified_id,y=e.p_tab,b=void 0===y?0:y,C=(0,f.Uj)().useGetPolicyClient,Z=(0,t.useState)(q[b].title.toUpperCase()),O=Z[0],R=Z[1],S=(0,x.useRouter)(),E=C(!0,{p_policy_id:g,p_certified_id:j}),I=E.data,D=E.isLoading,M={p_expedient_type:"SUS",p_policyId:g.toString(),p_certificateId:j.toString()},A={p_policy_id:g.toString(),p_certified_id:j.toString()};return(0,r.jsx)(o.Z,{maxWidth:"xl",children:(0,r.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(a.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(_.no,{icon:"akar-icons:file",headerColor:"blue",title:(null===(n=null===I||void 0===I?void 0:I.c_policy[0])||void 0===n?void 0:n.NUMEROPOL)||"",children:[(0,r.jsx)(s.Z,{component:"nav","aria-label":"mailbox folders",children:q.map((function(e,n){return(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)(l.ZP,{children:(0,r.jsxs)(c.Z,{onClick:function(){return n=e.title.toUpperCase(),void R(n);var n},children:[(0,r.jsx)(d.Z,{children:(0,r.jsx)(m.Ir,{icon:e.icon})}),(0,r.jsx)(u.Z,{primary:e.title})]})}),(0,r.jsx)(p.Z,{})]},"list_".concat(n,"_a"))}))}),(0,r.jsx)(v.et,{queryParams:{p_policy_id:g,p_certified_id:j},paramsReady:!0}),(0,r.jsx)(h.Z,{onClick:function(){S.back()},variant:"contained",fullWidth:!0,children:"Regresar"})]})}),(0,r.jsxs)(a.ZP,{item:!0,xs:12,md:9,children:[D&&(0,r.jsx)(m.a_,{disableBg:!0}),!D&&(0,r.jsxs)(r.Fragment,{children:["INFORMACI\xd3N"===O&&!D&&(0,r.jsx)(P,{data:null===I||void 0===I?void 0:I.c_policy[0],showDetails:!0}),"DOCUMENTOS"===O&&!D&&(0,r.jsx)(w,{queryParams:A,showButton:!1}),"RECAUDOS"===O&&!D&&(0,r.jsx)(T.Z,{params:M,showButton:!1}),"SINIESTROS"===O&&!D&&(0,r.jsx)(V,{queryParams:{p_policy_id:g,p_certified_id:j},codArea:null===(i=null===I||void 0===I?void 0:I.c_policy[0])||void 0===i?void 0:i.CODAREA})]})]})]})})}},3367:function(e,n,i){"use strict";i.d(n,{O8:function(){return H},jp:function(){return ae},Dx:function(){return I},pY:function(){return q},db:function(){return k},su:function(){return C},rH:function(){return j},Wt:function(){return a},B2:function(){return v},Vt:function(){return E},U$:function(){return p},et:function(){return R}});var r=i(85893),t=i(11163),o=i(65360);function a(){var e=(0,t.useRouter)().query,n=e.p_policy_id,i=e.p_certified_id;return(0,r.jsx)(o.Z,{p_policy_id:n,p_certified_id:i})}var s=i(67294),l=i(45697),c=i.n(l),d=i(93725),u=i(96087);function p(e){var n,i,t,o,a=e.dataQuery,l=(0,u.Uj)().useGetPolicyReceiptsByCert,c=(0,s.useState)(!1),p=c[0],h=c[1],_=l(p,a);return(0,s.useEffect)((function(){a&&h(!0)}),[a]),(0,r.jsx)(r.Fragment,{children:(null===_||void 0===_||null===(n=_.data)||void 0===n?void 0:n.c_receipts.length)>0&&(0,r.jsx)(d.no,{title:"Recibos",icon:"akar-icons:file",children:(0,r.jsx)(d.wY,{data:(null===_||void 0===_||null===(i=_.data)||void 0===i?void 0:i.c_receipts)||[],options:{paging:!1,search:!1,toolbar:!1,sorting:!1,pageSize:null===(t=_.data)||void 0===t||null===(o=t.c_receipts)||void 0===o?void 0:o.length},columns:[{header:"Nro",accessorKey:"NUMREC"},{header:"Estatus",accessorKey:"STSREC"},{header:"Vigencia",accessorKey:"FECINIVIG",cell:function(e){return e.row.original.FECINIVIG+" - "+e.row.original.FECFINVIG}}]})})})}p.propTypes={dataQuery:c().object.isRequired};var h=i(15861),_=i(86886),x=i(90948),m=(0,x.ZP)(h.Z)((function(e){return{padding:e.theme.spacing(.3)}}));function v(e){var n=e.dataQuery,i=(0,u.Uj)().useGetPolicyHealth,t=(0,s.useState)(!1),o=t[0],a=t[1],l=i(o,n).data;return(0,s.useEffect)((function(){n&&a(!0)}),[n]),(0,r.jsx)(d.no,{title:"Detalle del seguro",icon:"akar-icons:file",children:(0,r.jsx)(r.Fragment,{children:null===l||void 0===l?void 0:l.c_insured.map((function(e,n){return(0,r.jsxs)(d._W,{title:"".concat(e.NOMBRE," - ").concat(e.PARENTESCO),id:n,children:[(0,r.jsxs)(_.ZP,{container:!0,children:[(0,r.jsxs)(_.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,r.jsxs)(m,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Identificaci\xf3n: "}),e.IDENTIFICACION," "]}),(0,r.jsxs)(m,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Nombres y apellidos: "}),e.NOMBRE," "]}),(0,r.jsxs)(m,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Parentesco: "})," ",e.PARENTESCO]}),(0,r.jsxs)(m,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Fecha de nacimiento: "}),"".concat(e.FECNAC," (").concat(e.EDAD,")")," "]})]}),(0,r.jsxs)(_.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,r.jsxs)(m,{variant:"body2",children:[(0,r.jsx)("strong",{children:"E-Mail: "}),e.EMAIL," "]}),(0,r.jsxs)(m,{variant:"body2",children:[(0,r.jsx)("strong",{children:"T\xe9lefono local: "}),e.TELEFHAB," "]}),(0,r.jsxs)(m,{variant:"body2",children:[(0,r.jsx)("strong",{children:"T\xe9lefono m\xf3vil: "}),e.TELEFCEL," "]})]})]}),(0,r.jsx)(_.ZP,{container:!0,py:2,children:(0,r.jsx)(_.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,r.jsx)(j,{coverages:(i=e.CODCLI,(null===l||void 0===l?void 0:l.c_coverages)&&(null===l||void 0===l?void 0:l.c_coverages.filter((function(e){return e.CODCLI===i}))))})})})]},n);var i}))})})}v.propTypes={dataQuery:c().object.isRequired};var f=i(72007),g=i(87784);function j(e){var n=e.coverages;return(0,r.jsx)(d.wY,{options:{paging:!1,search:!1,toolbar:!1,sorting:!1,pageSize:n.length},columns:[{header:"Coberturas",accessorKey:"DESCCOBERT",cell:function(e){return(0,r.jsx)(h.Z,{textAlign:"left",children:e.getValue()})}},{header:"Suma asegurada",accessorKey:"SUMAASEGMONEDA",accessorFn:function(e){return"".concat(null===e||void 0===e?void 0:e.SUMAASEGMONEDA)},cell:function(e){return(0,r.jsx)(h.Z,{variant:"body1",textAlign:"right",children:e.row.original.SUMAASEGMONEDA<1?(0,r.jsx)(f.Ir,{icon:"ep:success-filled",color:"primary"}):(n=e.row.original.SUMAASEGMONEDA,i=e.row.original.CODMONEDA,"".concat((0,g.z5)(i)).concat((0,g.dN)(n)," "))});var n,i}}],data:n||[]})}j.propTypes={coverages:c().array.isRequired};var y=i(10030),b=i(41796);function C(e){var n=e.codCli,i=(0,(0,u.Uj)().useGetPoliciesCustomer)(n),o=i.data,a=i.isLoading,s=(0,t.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(f.a_,{disableBg:!0}),!a&&(0,r.jsx)(d.wY,{data:(null===o||void 0===o?void 0:o.c_policies)||[],onRowClick:function(e){return function(e){var i={p_policy_id:e.IDEPOL,p_certified_id:e.NUMCERT};"insurance_broker"===(0,y.fp)()&&(i.p_client_code=n),s.push({pathname:"/portal/policies",query:i})}(e.original)},columns:[{header:"Area",accessorKey:"DE_AREA",cell:function(e){var n,i,t,o,a,s;return(0,r.jsx)(d.b8,{textTooltip:e.getValue()||"Sin area definida",icon:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original.ICONO_PROD)?null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.ICONO_PROD:"healthicons:no-outline",sx:{backgroundColor:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original.COLOR_PROD)?null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original.COLOR_PROD:"#DFE3E8","&:hover":{backgroundColor:(0,b._j)((null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original.COLOR_PROD)?null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.original.COLOR_PROD:"#DFE3E8",.45)}}})}},{header:"No p\xf3liza",accessorKey:"NUMEROPOL"},{header:"Titular",accessorKey:"TITULAR"},{header:"Vigencia",accessorKey:"VIGENCIA"},{header:"Estatus p\xf3liza",accessorKey:"ESTATUS",cell:function(e){var n;return(0,r.jsx)(f.__,{color:(null===(n=g._2[e.getValue()])||void 0===n?void 0:n.color)||"default",children:e.getValue()})}},{header:"Situaci\xf3n de pago",accessorKey:"ESTADO",cell:function(e){var n;return(0,r.jsx)(f.__,{color:(null===(n=g._2[e.getValue()])||void 0===n?void 0:n.color)||"default",children:e.getValue()})}}]})]})}C.propTypes={codCli:c().string};var Z=i(51233),O=i(11057);function R(e){var n,i=e.queryParams,o=e.paramsReady,a=(0,t.useRouter)(),s=(0,(0,u.Uj)().useGetButtonsServices)(o,{p_container_code:"POLICY",p_json_data:JSON.stringify({p_policy_id:Number.parseInt(null===i||void 0===i?void 0:i.p_policy_id),p_certified_id:Number.parseInt(null===i||void 0===i?void 0:i.p_certified_id)})}).data;return(0,r.jsx)(Z.Z,{spacing:2,direction:"column",py:2,children:(null===s||void 0===s?void 0:s.result)&&(null===s||void 0===s||null===(n=s.result)||void 0===n?void 0:n.map((function(e){return(0,r.jsxs)(O.Z,{color:e.color,fullwidth:!0,onClick:function(){return function(e){var n=JSON.stringify({p_policy_id:Number.parseInt(null===i||void 0===i?void 0:i.p_policy_id),p_certified_id:Number.parseInt(null===i||void 0===i?void 0:i.p_certified_id)}),r=Object.keys(i).map((function(e){return e+"="+i[e]})).join("&");a.push({pathname:"".concat(e.posturl),query:{policy_data:n,path:"".concat(a.pathname,"?").concat(r||"")}})}(e)},variant:"contained",sx:{color:"white"},children:[(0,r.jsx)(f.Ir,{icon:e.icon,sx:{mr:1}})," ",e.title]},e.button_id)})))})}R.propTypes={policy:c().object,queryParams:c().object.isRequired,paramsReady:c().bool.isRequired};var S=(0,x.ZP)(h.Z)((function(e){return{padding:e.theme.spacing(.3)}}));function E(e){var n,i=e.dataQuery,t=(0,(0,u.Uj)().useGetPolicyHome)(i),o=t.data,a=t.isLoading;return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(f.a_,{disableBg:!0}),!a&&(0,r.jsxs)(d.no,{title:"Detalle del seguro",icon:"akar-icons:file",children:[(null===o||void 0===o?void 0:o.c_risk.length)>0&&(0,r.jsx)(_.ZP,{container:!0,children:(0,r.jsxs)(_.ZP,{item:!0,xs:12,children:[(0,r.jsx)(S,{variant:"body2",children:"".concat(null===o||void 0===o?void 0:o.c_risk[0].DESCZONAPOSTAL," - ").concat(null===o||void 0===o?void 0:o.c_risk[0].ZONAPOSTAL)}),(0,r.jsx)(S,{variant:"body2",children:null===o||void 0===o?void 0:o.c_risk[0].DIREC}),(0,r.jsx)(S,{variant:"body2",children:"".concat(null===o||void 0===o?void 0:o.c_risk[0].DESCMUNICIPIO," - ").concat(null===o||void 0===o?void 0:o.c_risk[0].DESCCIUDAD)}),(0,r.jsx)(S,{variant:"body2",children:"".concat(null===o||void 0===o?void 0:o.c_risk[0].DESCESTADO," - ").concat(null===o||void 0===o?void 0:o.c_risk[0].DESCPAIS)})]})}),(0,g.OX)(null!==(n=null===o||void 0===o?void 0:o.c_properties)&&void 0!==n?n:[],"DESCBIEN","DESCBIEN").map((function(e,n){return(0,r.jsx)(d._W,{title:e.name,unmount:!0,children:(0,r.jsx)(_.ZP,{container:!0,children:(0,r.jsx)(_.ZP,{item:!0,xs:12,children:(0,r.jsx)(j,{coverages:(i=e.id,null===o||void 0===o?void 0:o.c_coverages_property.filter((function(e){return e.DESCBIEN===i})))})})})},n);var i})),(null===o||void 0===o?void 0:o.c_coverages.length)>0&&(0,r.jsx)(Z.Z,{my:2,children:(0,r.jsx)(d._W,{title:"Coberturas complementarias",unmount:!0,children:(0,r.jsx)(_.ZP,{container:!0,children:(0,r.jsx)(_.ZP,{item:!0,xs:12,children:(0,r.jsx)(j,{coverages:null===o||void 0===o?void 0:o.c_coverages})})})},231)})]})]})}i(85288);var P=i(65582),T=i(95265);function I(){var e=(0,s.useState)({}),n=e[0],i=e[1];return(0,r.jsx)(P.Z,{maxWidth:"xl",children:(0,r.jsxs)(_.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(_.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,r.jsx)(T.pY,{handleParams:i})}),(0,r.jsx)(_.ZP,{item:!0,xs:12,md:12,lg:9,children:(0,r.jsx)(T.db,{params:n})})]})})}var D=i(47568),w=i(97582),M=i(87536),A=i(31812),N=i(3584),F=i(88767),V=i(86501);function q(e){var n=e.handleParams,i=(0,F.useQueryClient)(),t=(0,M.cI)({mode:"onSubmit",defaultValues:{p_identification_type_0:"",p_identification_number_0:"",p_customers_full_name:"",p_license_plate:""}}),o=t.handleSubmit,a=t.formState.isSubmitting,s=function(){var e=(0,D.Z)((function(e){var r;return(0,w.__generator)(this,(function(t){return""===e.p_identification_type_0&&""!==e.p_identification_number_0||""!==e.p_identification_type_0&&""==e.p_identification_number_0||""===e.p_identification_type_0&&""===e.p_identification_number_0&&""===e.p_customers_full_name&&""===e.p_license_plate?(V.ZP.error("Debe introducir la identificaci\xf3n completa del cliente o el nombre, verifique."),[2]):(i.invalidateQueries("get_customers"),r={p_identification_type:e.p_identification_type_0,p_identification_number:e.p_identification_number_0,p_customers_full_name:e.p_customers_full_name,p_license_plate:e.p_license_plate},console.log(r),n(r),[2])}))}));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(d.no,{title:"Cliente",icon:"akar-icons:person",headerColor:"blue",children:(0,r.jsx)(f.RV,{methods:t,onSubmit:o(s),children:(0,r.jsxs)(Z.Z,{spacing:2.5,children:[(0,r.jsx)(N.c9,{index:0,arrayValues:g.IQ,required:!1}),(0,r.jsx)(N.be,{name:"p_customers_full_name",label:"Nombre y/o Apellidos",required:!1}),(0,r.jsx)(A.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:a,children:"Buscar"})]})})})}q.propTypes={handleParams:c().func.isRequired};var L=i(66242),U=i(65452);function k(e){var n=e.params,i=(0,(0,U.Z)().useGetCustomers)(n),o=i.data,a=i.isLoading,s=(0,t.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(f.a_,{disableBg:!0}),o&&(0,r.jsx)(L.Z,{raise:"true",children:(0,r.jsx)(d.wY,{options:{pageSize:5},columns:[{header:"",accessorKey:"CODCLI",cell:function(){return(0,r.jsx)(d.b8,{textTooltip:"Cliente",color:"primary",icon:"akar-icons:person"})}},{header:"Identificaci\xf3n",accessorKey:"IDENTIFICACION"},{header:"Nombre",accessorKey:"NOMBRE"}],data:(null===o||void 0===o?void 0:o.p_cursor)||[],onRowClick:function(e){return function(e){s.push({pathname:"/portal/customer",query:{codcli:e.CODCLI,type:"general"}})}(e.original)}})})]})}k.propTypes={params:c().object.isRequired};var G=i(78462),K=i(97212),B=i(98619),z=i(48885),W=i(59334),Q=i(67720),Y=[{title:"General",icon:"bi:card-list"},{title:"Polizas",icon:"akar-icons:file"}];function H(){var e,n,i=(0,t.useRouter)(),o=(0,s.useState)(!1),a=o[0],l=o[1],c=(0,(0,U.Z)().useGetCustomerDetail)(a,{p_code_customer:null===i||void 0===i?void 0:i.query.codcli}),u=c.data,p=c.isLoading;return(0,s.useEffect)((function(){i.query&&l(!0)}),[i.isReady,i.query]),(0,r.jsx)(P.Z,{maxWidth:"xl",children:(0,r.jsxs)(_.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(_.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(d.no,{icon:"bi:person",headerColor:"blue",title:"".concat((null===u||void 0===u?void 0:u.p_cursor[0].NOMTER)||""," ").concat((null===u||void 0===u?void 0:u.p_cursor[0].APETER1)||""),children:[(0,r.jsx)(G.Z,{component:"nav","aria-label":"mailbox folders",children:Y.map((function(e,n){return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(K.ZP,{children:(0,r.jsxs)(B.Z,{onClick:function(){return n=e.title.toLowerCase(),void i.push({pathname:"/portal/customer",query:{codcli:null===i||void 0===i?void 0:i.query.codcli,type:n}});var n},children:[(0,r.jsx)(z.Z,{children:(0,r.jsx)(f.Ir,{icon:e.icon})}),(0,r.jsx)(W.Z,{primary:e.title})]})}),(0,r.jsx)(Q.Z,{})]},"list_".concat(n,"_a"))}))}),(0,r.jsx)(O.Z,{onClick:function(){i.back()},variant:"contained",fullWidth:!0,children:"Regresar"})]})}),(0,r.jsxs)(_.ZP,{item:!0,xs:12,md:8,children:["general"===(null===i||void 0===i||null===(e=i.query)||void 0===e?void 0:e.type)&&(0,r.jsxs)(r.Fragment,{children:[p&&(0,r.jsx)(f.a_,{disableBg:!0}),!p&&(null===u||void 0===u?void 0:u.p_cursor[0])&&(0,r.jsx)(ae,{customer:null===u||void 0===u?void 0:u.p_cursor[0]})]}),"polizas"===(null===i||void 0===i||null===(n=i.query)||void 0===n?void 0:n.type)&&(0,r.jsx)(d.no,{title:"P\xf3lizas",icon:"bi:card-list",iconColor:"primary",children:(0,r.jsx)(C,{codCli:null===i||void 0===i?void 0:i.query.codcli})})]})]})})}var J=i(14924),X=i(8614),$=i(46901),ee=(0,x.ZP)("div")({display:"flex",gap:"2rem"}),ne=(0,x.ZP)("div")({display:"flex",flexDirection:"column"});function ie(e){var n=e.index,i=e.readOnly,t=(0,s.useState)(""),o=t[0],a=t[1],l=(0,s.useState)(""),c=l[0],d=l[1],u=(0,(0,X.Z)().useGetNeedUpdate)({p_portal_user_id:(0,y.Ai)().P_PORTAL_USER_ID}).data;return(0,s.useEffect)((function(){if(u){var e=JSON.parse(u.p_json);a(e.status_phone),d(e.status_email)}}),[u,o,c]),(0,r.jsxs)(ee,{children:[(0,r.jsxs)(ne,{children:[(0,r.jsx)(N.np,{readonly:i,label:"Tel\xe9fono Celular",name:"p_mobile_phone_".concat(n),required:!0,typePhone:"movil"}),"S"===o||"N"===o?(0,r.jsx)($.Z,{severity:"S"===o?"success":"error",children:"S"===o?"Verificado":"No Verificado"}):null]}),(0,r.jsxs)(ne,{children:[(0,r.jsx)(N.AN,{readonly:i,label:"Correo Electr\xf3nico",name:"p_email_".concat(n),type:"email",required:!0}),"S"===c||"N"===c?(0,r.jsx)($.Z,{severity:"S"===c?"success":"error",children:"S"===c?"Verificado":"No Verificado"}):null]})]})}ie.propTypes={index:c().any,readOnly:c().bool,isPhoneVerified:c().string,isEmailVerified:c().string};var re=i(80822),te=i(16790);ae.propTypes={customer:c().object.isRequired,updeteable:c().bool};var oe=(0,x.ZP)(re.Z)((function(e){var n=e.theme;return{"& .MuiTextField-root":(0,J.Z)({margin:n.spacing(1)},n.breakpoints.up("sm"),{width:250})}}));function ae(e){var n=(0,s.useState)(!1),i=n[0],o=n[1],a=(0,s.useState)(!1),l=a[0],c=a[1],p=(0,s.useState)(!1),h=p[0],_=p[1],x=e.customer,m=e.updeteable,v="CUSTOMER",j=(0,t.useRouter)(),b=x.TIPOID,C=(0,u.ON)().setValuesForm,R=(0,(0,U.Z)().useUpdateCustomer)(),S=R.mutate,E=R.isLoading,P=(0,(0,X.Z)().useSetUpdate)({}),I=P.mutate,F=P.isLoading,q=(0,M.cI)({defaultValues:{p_identification_type_CUSTOMER:"",p_profession_CUSTOMER:"",p_activity_CUSTOMER:"",p_edocivil_CUSTOMER:"",p_sex_CUSTOMER:"",p_country_id_CUSTOMER:"",p_state_id_CUSTOMER:"",p_city_id_CUSTOMER:"",p_municipality_id_CUSTOMER:"",p_urbanization_id_CUSTOMER:""}}),L=q.handleSubmit,k=q.formState.isSubmitting,G=q.watch;function K(){return(K=(0,D.Z)((function(e){var n,i;return(0,w.__generator)(this,(function(r){return"true"===j.query.update?(n={p_update:"N",p_portal_user_id:(0,y.Ai)().P_PORTAL_USER_ID,p_json_data:JSON.stringify({phone:e["p_mobile_phone_".concat(v)],email:e["p_email_".concat(v)]})},I(n,{onSuccess:function(){V.ZP.success("Los datos se han actualizado exitosamente. Hemos enviado un correo electr\xf3nico y un mensaje de texto a los contactos proporcionados para validar la informaci\xf3n. Por favor, revise sus medios de comunicaci\xf3n para completar el proceso."),sessionStorage.setItem("modal","false"),j.push((0,y.Ri)())},onError:function(e){V.ZP.error((0,g.J4)(e.response.data))}})):(e.p_birthdate_CUSTOMER=(0,te.Z)(null===e||void 0===e?void 0:e.p_birthdate_CUSTOMER,"dd/MM/yyyy"),i={p_index:v,p_json_cliente:JSON.stringify(e)},S(i,{onSuccess:function(){V.ZP.success("Cliente actualizado correctamente")},onError:function(e){return V.ZP.error((0,g.J4)(e.response.data))}})),[2]}))}))).apply(this,arguments)}var B=function(){_(!0);var e={p_update:"S",p_portal_user_id:(0,y.Ai)().P_PORTAL_USER_ID,p_json_data:JSON.stringify({phone:x.TLFMOVIL,email:x.EMAIL})};I(e,{onSuccess:function(){V.ZP.success("Los datos se han actualizado exitosamente. Hemos enviado un correo electr\xf3nico y un mensaje de texto a los contactos proporcionados para validar la informaci\xf3n. Por favor, revise sus medios de comunicaci\xf3n para completar el proceso."),sessionStorage.setItem("modal","false"),j.push((0,y.Ri)())},onError:function(e){V.ZP.error((0,g.J4)(e.response.data))}})},z=function(){c(!0)};return(0,s.useEffect)((function(){var e=x.NUMID;C(x,v,q,b,e)}),[]),(0,s.useEffect)((function(){"true"===j.query.update&&o(!0)}),[j.query.update]),(0,r.jsxs)(r.Fragment,{children:[E&&(0,r.jsx)(f.a_,{noColor:!0}),(0,r.jsx)(f.RV,{methods:q,onSubmit:L((function(e){return K.apply(this,arguments)})),children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(oe,{children:(0,r.jsx)(ie,{index:v,readOnly:"true"!==j.query.update||!l})})}),(0,r.jsx)(Z.Z,{sx:{width:"100%",marginTop:"1rem"},spacing:2,children:(0,r.jsx)($.Z,{severity:"warning",children:"Los datos que se muestran a continuaci\xf3n son correctos?"})}),(0,r.jsx)(Z.Z,{py:3,justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"row",gap:"3rem",children:l?F?(0,r.jsx)(f.a_,{noColor:!0}):!0===m&&(0,r.jsx)(Z.Z,{py:3,justifyContent:"center",alignItems:"center",children:(0,r.jsx)(A.Z,{size:"large",type:"submit",variant:"contained",loading:k,children:"Actualizar"})}):h?F?(0,r.jsx)(f.a_,{noColor:!0}):(0,r.jsxs)(Z.Z,{py:3,justifyContent:"center",alignItems:"center",children:[(0,r.jsx)(O.Z,{size:"large",variant:"contained",onClick:B,children:"Si"}),(0,r.jsx)(O.Z,{size:"large",variant:"contained",onClick:z,children:"No"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{size:"large",variant:"contained",onClick:B,children:"Si"}),(0,r.jsx)(O.Z,{size:"large",variant:"contained",onClick:z,children:"No"})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.Z,{spacing:3,children:(0,r.jsx)(d.no,{title:"Identificaci\xf3n",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(oe,{children:(0,r.jsx)(N.c9,{index:v,arrayValues:g.IQ,required:!0,readOnly:!0})})})}),b&&"PERSONAL"===(0,g._t)(b)&&(0,r.jsx)(d.no,{title:"Datos Personales",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(oe,{children:(0,r.jsx)(T.Df,{index:v,customerType:v,readonly:!0})})}),G("p_country_id_CUSTOMER")&&(0,r.jsx)(d.no,{title:"Direcci\xf3n",headerColor:"purple",icon:"entypo:location-pin",children:(0,r.jsx)(oe,{children:(0,r.jsx)(N.LF,{index:v,objForm:q,showCountry:!0,showUrbanization:!0,showAddressInput:!0,showDetails:!0,readOnly:!0})})}),(0,r.jsx)(d.no,{title:"Datos de Contacto",headerColor:"purple",icon:"bi:person",children:(0,r.jsx)(oe,{children:(0,r.jsx)(T.wo,{index:v,readOnly:!0})})}),(0,r.jsx)(Z.Z,{sx:{width:"100%",marginTop:"1rem"},spacing:2,children:(0,r.jsxs)($.Z,{severity:"warning",children:[(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)("span",{children:"Si necesita actualizar sus datos por favor dirijase a nuestras oficinas o pongase en contacto con nosotros a traves de los siguientes medios:"})}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"10px"},children:[(0,r.jsx)("span",{children:"Correo Electr\xf3nico: contacto@la-internacional.com"}),(0,r.jsx)("span",{children:"Tel\xe9fono de Contacto: +58 (212) 211-4500"})]})]})})]})})]})}},20067:function(){},72061:function(){}}]);